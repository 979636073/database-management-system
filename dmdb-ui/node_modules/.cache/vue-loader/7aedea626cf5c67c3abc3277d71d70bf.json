{"remainingRequest":"D:\\开发\\database-management-system\\dmdb-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\开发\\database-management-system\\dmdb-ui\\src\\components\\TableDetail.vue?vue&type=style&index=0&id=79d21782&scoped=true&lang=css","dependencies":[{"path":"D:\\开发\\database-management-system\\dmdb-ui\\src\\components\\TableDetail.vue","mtime":1770398728692},{"path":"D:\\开发\\database-management-system\\dmdb-ui\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\开发\\database-management-system\\dmdb-ui\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\开发\\database-management-system\\dmdb-ui\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\开发\\database-management-system\\dmdb-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\开发\\database-management-system\\dmdb-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQovKiDkv53mjIHljp/mnInmoLflvI/vvIznnIHnlaXku6XoioLnnIHnqbrpl7TvvIzkuI7mj5DkvpvnmoQgVGFibGVEZXRhaWwudnVlIOWOn+Wni+agt+W8j+S4gOiHtCAqLw0KLnRhYmxlLWRldGFpbC13cmFwcGVyIHsNCiAgICBoZWlnaHQ6IDEwMCU7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgIGJhY2tncm91bmQ6ICNmNWY3ZmE7DQp9DQoNCi53b3Jrc3BhY2UtaGVhZGVyIHsNCiAgICBiYWNrZ3JvdW5kOiAjZmZmOw0KICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZTRlN2VkOw0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQogICAgcGFkZGluZzogMCAyMHB4Ow0KICAgIGJveC1zaGFkb3c6IDAgMXB4IDRweCByZ2JhKDAsIDIxLCA0MSwgLjA4KTsNCiAgICB6LWluZGV4OiAxMDsNCn0NCg0KLmNvbnRlbnQtYXJlYSB7DQogICAgZmxleDogMTsNCiAgICBwYWRkaW5nOiAxNXB4Ow0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KfQ0KDQoudmlldy1jb250YWluZXIgew0KICAgIGhlaWdodDogMTAwJTsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgZ2FwOiAxMnB4Ow0KICAgIGJhY2tncm91bmQ6ICNmNWY3ZmE7DQp9DQoNCi5mdWxsLWhlaWdodCB7DQogICAgaGVpZ2h0OiAxMDAlOw0KfQ0KDQouZmlsdGVyLWNhcmQgew0KICAgIGJhY2tncm91bmQ6ICNmZmY7DQogICAgcGFkZGluZzogMTJweDsNCiAgICBib3JkZXItcmFkaXVzOiA0cHg7DQogICAgYm94LXNoYWRvdzogMCAycHggMTJweCAwIHJnYmEoMCwgMCwgMCwgMC4wNSk7DQogICAgZmxleC1zaHJpbms6IDA7DQp9DQoNCi5jb21wYWN0LXF1ZXJ5LXBhbmVsIHsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQp9DQoNCi5xdWVyeS1hY3Rpb25zLXRvcC1iYXIgew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOw0KICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgbWFyZ2luLWJvdHRvbTogOHB4Ow0KfQ0KDQoucGFuZWwtdGl0bGUgew0KICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgIGNvbG9yOiAjMzAzMTMzOw0KICAgIGZvbnQtc2l6ZTogMTRweDsNCn0NCg0KLnF1ZXJ5LWNvbmRpdGlvbnMtc2Nyb2xsLWFyZWEgew0KICAgIG1heC1oZWlnaHQ6IDEyMHB4Ow0KICAgIG92ZXJmbG93LXk6IGF1dG87DQogICAgcGFkZGluZzogNXB4Ow0KICAgIGJhY2tncm91bmQ6ICNmYWZhZmE7DQogICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICAgIGJvcmRlcjogMXB4IGRhc2hlZCAjZGNkZmU2Ow0KfQ0KDQoucXVlcnktZ3JpZCB7DQogICAgZGlzcGxheTogZ3JpZDsNCiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpbGwsIG1pbm1heCg0MDBweCwgMWZyKSk7DQogICAgZ2FwOiAxMHB4Ow0KfQ0KDQoucXVlcnktaXRlbSB7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgIGdhcDogOHB4Ow0KfQ0KDQouY29uZC1pbmRleCB7DQogICAgY29sb3I6ICM5MDkzOTk7DQogICAgZm9udC1zaXplOiAxMnB4Ow0KICAgIHdpZHRoOiAxNXB4Ow0KfQ0KDQoudGFibGUtY2FyZCB7DQogICAgZmxleDogMTsNCiAgICBiYWNrZ3JvdW5kOiAjZmZmOw0KICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICBib3gtc2hhZG93OiAwIDJweCAxMnB4IDAgcmdiYSgwLCAwLCAwLCAwLjA1KTsNCiAgICBwYWRkaW5nOiAxMnB4Ow0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICBtaW4taGVpZ2h0OiAwOw0KfQ0KDQouZGF0YS10b29sYmFyIHsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsNCiAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgIG1hcmdpbi1ib3R0b206IDEycHg7DQp9DQoNCi5kYXRhLXN0YXRzIHsNCiAgICBmb250LXNpemU6IDEzcHg7DQogICAgY29sb3I6ICM2MDYyNjY7DQogICAgYmFja2dyb3VuZDogI2Y0ZjRmNTsNCiAgICBwYWRkaW5nOiA0cHggMTBweDsNCiAgICBib3JkZXItcmFkaXVzOiA0cHg7DQp9DQoNCi50YWJsZS13cmFwcGVyIHsNCiAgICBmbGV4OiAxOw0KICAgIG1pbi1oZWlnaHQ6IDA7DQp9DQoNCi5wYWdpbmF0aW9uLWJhciB7DQogICAgcGFkZGluZy10b3A6IDEycHg7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOw0KfQ0KDQouZGFuZ2VyLXRleHQgew0KICAgIGNvbG9yOiAjRjU2QzZDOw0KfQ0KDQo6OnYtZGVlcCAuY3VzdG9tLXRhYmxlIHRoPi5jZWxsIHsNCiAgICBkaXNwbGF5OiBmbGV4ICFpbXBvcnRhbnQ7DQogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7DQogICAgbGluZS1oZWlnaHQ6IDEuMjsNCn0NCg0KLmN1c3RvbS1oZWFkZXIgew0KICAgIGRpc3BsYXk6IGlubGluZS1mbGV4Ow0KICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOw0KICAgIG1heC13aWR0aDogY2FsYygxMDAlIC0gMjRweCk7DQp9DQoNCjo6di1kZWVwIC5jdXN0b20tdGFibGUgLmNhcmV0LXdyYXBwZXIgew0KICAgIG1hcmdpbi1sZWZ0OiA0cHg7DQogICAgZmxleC1zaHJpbms6IDA7DQp9DQoNCjo6di1kZWVwIC5jdXN0b20tdGFibGUgdGggew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNlZWYxZjYgIWltcG9ydGFudDsNCiAgICBjb2xvcjogIzMwMzEzMzsNCiAgICBmb250LXdlaWdodDogNjAwOw0KICAgIGhlaWdodDogNDBweDsNCiAgICBwYWRkaW5nOiA0cHggMDsNCn0NCg0KOjp2LWRlZXAgLmN1c3RvbS10YWJsZSB0ZCB7DQogICAgcGFkZGluZzogNnB4IDA7DQp9DQoNCjo6di1kZWVwIC5lbC10YWJsZS0tc3RyaXBlZCAuZWwtdGFibGVfX2JvZHkgdHIuZWwtdGFibGVfX3Jvdy0tc3RyaXBlZCB0ZCB7DQogICAgYmFja2dyb3VuZDogI2ZhZmFmYTsNCn0NCg0KOjp2LWRlZXAgLmVsLXRhYmxlLS1ib3JkZXIsDQouZWwtdGFibGUtLWdyb3VwIHsNCiAgICBib3JkZXItY29sb3I6ICNkY2RmZTY7DQp9DQoNCjo6di1kZWVwIC5lbC10YWJsZSB0ZCwNCjo6di1kZWVwIC5lbC10YWJsZSB0aC5pcy1sZWFmIHsNCiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2RjZGZlNjsNCn0NCg0KOjp2LWRlZXAgLmVsLXRhYmxlLS1ib3JkZXIgdGQsDQo6OnYtZGVlcCAuZWwtdGFibGUtLWJvcmRlciB0aCB7DQogICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgI2RjZGZlNjsNCn0NCg0KLmNvbC1uYW1lIHsNCiAgICBmb250LXNpemU6IDEzcHg7DQogICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOw0KfQ0KDQouY29sLWNvbW1lbnQgew0KICAgIGZvbnQtc2l6ZTogMTJweDsNCiAgICBjb2xvcjogIzkwOTM5OTsNCiAgICBmb250LXdlaWdodDogbm9ybWFsOw0KICAgIHRyYW5zZm9ybTogc2NhbGUoMC45NSk7DQogICAgdHJhbnNmb3JtLW9yaWdpbjogbGVmdDsNCiAgICB3aGl0ZS1zcGFjZTogbm93cmFwOw0KICAgIG92ZXJmbG93OiBoaWRkZW47DQogICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7DQp9DQoNCi5pbmxpbmUtaW5wdXQtYm94IHsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBwYWRkaW5nOiAwIDJweDsNCn0NCg0KOjp2LWRlZXAgLmlubGluZS1pbnB1dC1ib3ggLmVsLWlucHV0X19pbm5lciB7DQogICAgaGVpZ2h0OiAyNnB4Ow0KICAgIGxpbmUtaGVpZ2h0OiAyNnB4Ow0KICAgIHBhZGRpbmc6IDAgNXB4Ow0KICAgIGJvcmRlci1yYWRpdXM6IDA7DQogICAgYm9yZGVyOiAxcHggc29saWQgIzQwOUVGRjsNCn0NCg0KLmNvbmZsaWN0LWFsZXJ0IHsNCiAgICBiYWNrZ3JvdW5kOiAjZmRmNmVjOw0KICAgIGNvbG9yOiAjZTZhMjNjOw0KICAgIHBhZGRpbmc6IDEycHggMTVweDsNCiAgICBib3JkZXItcmFkaXVzOiA0cHg7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgIGZvbnQtc2l6ZTogMTRweDsNCiAgICBib3JkZXI6IDFweCBzb2xpZCAjZmFlY2Q4Ow0KfQ0KDQoucmVsYXRpb24tdmlldy1jb250YWluZXIgew0KICAgIGhlaWdodDogMTAwJTsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgYmFja2dyb3VuZDogI2Y1ZjdmYTsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgb3ZlcmZsb3c6IGhpZGRlbjsNCn0NCg0KLnJlbGF0aW9uLXRvb2xiYXIgew0KICAgIHBhZGRpbmc6IDEwcHggMjBweDsNCiAgICBiYWNrZ3JvdW5kOiAjZmZmOw0KICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWVlOw0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOw0KICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgei1pbmRleDogMTA7DQp9DQoNCi5sZWdlbmQtYm94IHsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgZ2FwOiAxNXB4Ow0KICAgIGZvbnQtc2l6ZTogMTJweDsNCiAgICBjb2xvcjogIzY2NjsNCn0NCg0KLmRvdCB7DQogICAgd2lkdGg6IDhweDsNCiAgICBoZWlnaHQ6IDhweDsNCiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogICAgYm9yZGVyLXJhZGl1czogNTAlOw0KICAgIG1hcmdpbi1yaWdodDogNXB4Ow0KfQ0KDQouZG90LmFjdGl2ZSB7DQogICAgYmFja2dyb3VuZDogIzQwOUVGRjsNCn0NCg0KLmRvdC5ub3JtYWwgew0KICAgIGJhY2tncm91bmQ6ICNEQ0RGRTY7DQp9DQoNCi5jYW52YXMtd3JhcHBlciB7DQogICAgd2lkdGg6IDEwMCU7DQogICAgaGVpZ2h0OiAxMDAlOw0KICAgIGJhY2tncm91bmQ6ICNmNWY3ZmE7DQogICAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQp9DQoNCi5nNi1jYW52YXMtYm94IHsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBoZWlnaHQ6IDEwMCU7DQogICAgZGlzcGxheTogYmxvY2s7DQp9DQoNCi5zcWwtYm94IHsNCiAgICBwYWRkaW5nOiAwOw0KICAgIGJhY2tncm91bmQ6ICNmZmY7DQogICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICAgIGJveC1zaGFkb3c6IDAgMnB4IDEycHggMCByZ2JhKDAsIDAsIDAsIDAuMDUpOw0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgIGhlaWdodDogMzAwcHg7DQp9DQoNCi5zcWwtcmVzdWx0IHsNCiAgICBmbGV4OiAxOw0KICAgIG1hcmdpbi10b3A6IDEwcHg7DQogICAgb3ZlcmZsb3c6IGF1dG87DQogICAgYmFja2dyb3VuZDogI2ZmZjsNCiAgICBwYWRkaW5nOiAxMHB4Ow0KICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCn0NCg0KLmVycm9yLWRpYWxvZy13aWR0aCB7DQogICAgbWF4LXdpZHRoOiA1MDBweDsNCn0NCg=="},{"version":3,"sources":["TableDetail.vue"],"names":[],"mappings":";AA6oCA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"TableDetail.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div class=\"table-detail-wrapper\">\r\n        <el-container class=\"main-workspace\">\r\n            <el-header height=\"50px\" class=\"workspace-header\">\r\n                <div class=\"header-left\">\r\n                    <el-breadcrumb separator=\"/\">\r\n                        <el-breadcrumb-item><i class=\"el-icon-connection\"></i> {{ connName }}</el-breadcrumb-item>\r\n                        <el-breadcrumb-item>{{ currentSchema }}</el-breadcrumb-item>\r\n                        <el-breadcrumb-item>\r\n                            <i v-if=\"tableType === 'view'\" class=\"el-icon-view\"\r\n                                style=\"color: #E6A23C; margin-right: 4px;\"></i>\r\n                            <i v-else class=\"el-icon-document-copy\" style=\"color: #409EFF; margin-right: 4px;\"></i>\r\n                            <b>{{ activeTable }}</b>\r\n                        </el-breadcrumb-item>\r\n                    </el-breadcrumb>\r\n                </div>\r\n                <div class=\"header-right\">\r\n                    <el-button-group style=\"margin-right: 15px\">\r\n                        <el-button size=\"small\" icon=\"el-icon-document\" @click=\"handleShowDDL\">查看DDL</el-button>\r\n                        <el-button v-if=\"tableType === 'table'\" size=\"small\" icon=\"el-icon-edit-outline\"\r\n                            @click=\"handleDesignTable\">设计表</el-button>\r\n                        <el-button v-else-if=\"tableType === 'view'\" size=\"small\" icon=\"el-icon-edit\"\r\n                            @click=\"handleEditView\">修改视图</el-button>\r\n                    </el-button-group>\r\n\r\n                    <el-radio-group v-model=\"viewMode\" size=\"small\" @change=\"handleViewModeSwitch\">\r\n                        <el-radio-button label=\"data\"><i class=\"el-icon-s-grid\"></i> 数据视图</el-radio-button>\r\n                        <el-radio-button label=\"relation\"><i class=\"el-icon-share\"></i> 关联关系</el-radio-button>\r\n                        <el-radio-button label=\"sql\"><i class=\"el-icon-cpu\"></i> SQL终端</el-radio-button>\r\n                    </el-radio-group>\r\n                </div>\r\n            </el-header>\r\n\r\n            <el-main class=\"content-area\">\r\n                <div v-if=\"viewMode === 'data'\" key=\"view-data\" class=\"full-height view-container\">\r\n                    <div class=\"filter-card\">\r\n                        <div class=\"compact-query-panel\">\r\n                            <div class=\"query-actions-top-bar\">\r\n                                <div class=\"left-btns\">\r\n                                    <span class=\"panel-title\"><i class=\"el-icon-search\"></i> 筛选条件</span>\r\n                                    <el-divider direction=\"vertical\"></el-divider>\r\n                                    <el-button type=\"text\" size=\"mini\" icon=\"el-icon-plus\"\r\n                                        @click=\"addCondition\">添加条件</el-button>\r\n                                    <template v-if=\"conditions.length > 1\">\r\n                                        <span class=\"v-divider\"></span>\r\n                                        <el-radio-group v-model=\"logicalOperator\" size=\"mini\">\r\n                                            <el-radio label=\"AND\">AND</el-radio>\r\n                                            <el-radio label=\"OR\">OR</el-radio>\r\n                                        </el-radio-group>\r\n                                    </template>\r\n                                </div>\r\n                                <div class=\"right-btns\">\r\n                                    <el-button type=\"primary\" size=\"mini\" icon=\"el-icon-search\" @click=\"handleQuery\"\r\n                                        :loading=\"loading\">查询</el-button>\r\n                                    <el-button size=\"mini\" icon=\"el-icon-refresh-left\"\r\n                                        @click=\"resetFilters\">重置</el-button>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"query-conditions-scroll-area\" v-if=\"conditions.length > 0\">\r\n                                <div class=\"query-grid\">\r\n                                    <div v-for=\"(cond, index) in conditions\" :key=\"index\" class=\"query-item\">\r\n                                        <span class=\"cond-index\">{{ index + 1 }}.</span>\r\n                                        <el-select v-model=\"cond.field\" placeholder=\"字段\" size=\"mini\" class=\"field-sel\"\r\n                                            filterable>\r\n                                            <el-option v-for=\"col in tableColumns\"\r\n                                                :key=\"col.COLUMN_NAME + '_' + (col.COMMENTS || '')\"\r\n                                                :label=\"col.COLUMN_NAME\" :value=\"col.COLUMN_NAME\">\r\n                                                <span style=\"float: left\">{{ col.COLUMN_NAME }}</span>\r\n                                                <span style=\"float: right; color: #8492a6; font-size: 12px\">{{\r\n                                                    col.COMMENTS }}</span>\r\n                                            </el-option>\r\n                                        </el-select>\r\n                                        <el-select v-model=\"cond.operator\" size=\"mini\" class=\"op-sel\">\r\n                                            <el-option label=\"=\" value=\"=\"></el-option>\r\n                                            <el-option label=\"LIKE\" value=\"LIKE\"></el-option>\r\n                                            <el-option label=\">\" value=\">\"></el-option>\r\n                                            <el-option label=\"<\" value=\"<\"></el-option>\r\n                                            <el-option label=\"IS NULL\" value=\"IS NULL\"></el-option>\r\n                                        </el-select>\r\n                                        <el-input v-if=\"!cond.operator.includes('NULL')\" v-model=\"cond.value\"\r\n                                            placeholder=\"值\" size=\"mini\" class=\"val-input\"\r\n                                            @keyup.enter.native=\"handleQuery\"></el-input>\r\n                                        <el-button type=\"text\" icon=\"el-icon-close\" class=\"cond-del\"\r\n                                            @click=\"removeCondition(index)\"></el-button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"table-card\">\r\n                        <div class=\"data-toolbar\">\r\n                            <div class=\"tool-left\" v-if=\"!isReadOnly\">\r\n                                <el-button size=\"mini\" icon=\"el-icon-plus\" @click=\"handleAddRow\">插入行</el-button>\r\n                                <el-button size=\"mini\" type=\"success\" icon=\"el-icon-check\" @click=\"submitBatchChanges\"\r\n                                    :disabled=\"!hasChanges\" :loading=\"saving\">保存修改</el-button>\r\n                                <el-button size=\"mini\" icon=\"el-icon-close\" @click=\"handleDiscardChanges\"\r\n                                    :disabled=\"!hasChanges\">放弃修改</el-button>\r\n                                <el-divider direction=\"vertical\"></el-divider>\r\n                                <el-button size=\"mini\" type=\"danger\" icon=\"el-icon-delete\" @click=\"handleBatchDelete\"\r\n                                    :disabled=\"selectedRows.length === 0\" plain>批量删除</el-button>\r\n                                <el-divider direction=\"vertical\"></el-divider>\r\n                                <el-tag v-if=\"tableType === 'view'\" size=\"small\" type=\"success\" effect=\"plain\"\r\n                                    style=\"margin-right: 10px;\">\r\n                                    <i class=\"el-icon-check\"></i> 简单视图 (可编辑)\r\n                                </el-tag>\r\n                                <el-button size=\"mini\" icon=\"el-icon-refresh\" @click=\"loadData\">刷新</el-button>\r\n                            </div>\r\n                            <div class=\"tool-left\" v-else>\r\n                                <el-tag size=\"small\" type=\"warning\" effect=\"plain\" style=\"margin-right: 10px;\">\r\n                                    <i class=\"el-icon-lock\"></i> 复杂视图 (只读)\r\n                                </el-tag>\r\n                                <el-button size=\"mini\" icon=\"el-icon-refresh\" @click=\"loadData\">刷新数据</el-button>\r\n                            </div>\r\n\r\n                            <div class=\"data-stats\">\r\n                                <span v-if=\"selectedRows.length > 0\" style=\"color: #409EFF; margin-right: 15px;\">已选 {{\r\n                                    selectedRows.length\r\n                                    }} 行</span>\r\n                                <span v-if=\"hasChanges\" style=\"color: #E6A23C; margin-right: 10px;\"><i\r\n                                        class=\"el-icon-warning\"></i>\r\n                                    有未保存的更改</span>\r\n                                <i class=\"el-icon-info\"></i> 共 <b>{{ totalCount }}</b> 条记录\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"table-wrapper\" v-loading=\"loading\">\r\n                            <el-table ref=\"dataTable\" :data=\"currentDataList\" border height=\"100%\" size=\"mini\" stripe\r\n                                class=\"custom-table\" highlight-current-row @sort-change=\"handleSortChange\"\r\n                                @selection-change=\"handleSelectionChange\" @cell-dblclick=\"handleCellDblClick\"\r\n                                :cell-style=\"getCellStyle\">\r\n                                <el-table-column type=\"selection\" width=\"45\" align=\"center\"\r\n                                    fixed=\"left\"></el-table-column>\r\n                                <el-table-column type=\"index\" width=\"55\" align=\"center\" fixed=\"left\" label=\"#\"\r\n                                    :index=\"indexMethod\"></el-table-column>\r\n                                <template v-if=\"tableColumns.length > 0\">\r\n                                    <el-table-column v-for=\"col in tableColumns\"\r\n                                        :key=\"col.COLUMN_NAME + '_' + (col.COMMENTS || '')\" :prop=\"col.COLUMN_NAME\"\r\n                                        min-width=\"150\" show-overflow-tooltip sortable=\"custom\">\r\n                                        <template slot=\"header\" slot-scope=\"scope\">\r\n                                            <div class=\"custom-header\">\r\n                                                <div class=\"col-name\">\r\n                                                    <i v-if=\"col.IS_PK == 1\" class=\"el-icon-key\"\r\n                                                        style=\"color:#E6A23C;margin-right:2px;\" title=\"主键\"></i>\r\n                                                    {{ col.COLUMN_NAME }}\r\n                                                </div>\r\n                                                <div v-if=\"col.COMMENTS\" class=\"col-comment\">{{ col.COMMENTS }}</div>\r\n                                            </div>\r\n                                        </template>\r\n                                        <template slot-scope=\"scope\">\r\n                                            <div v-if=\"!isReadOnly && isCellEditing(scope.row, col.COLUMN_NAME)\"\r\n                                                class=\"inline-input-box\">\r\n                                                <el-input v-model=\"scope.row[col.COLUMN_NAME]\" size=\"mini\"\r\n                                                    @blur=\"finishEditing(scope.row, col.COLUMN_NAME)\"\r\n                                                    @keyup.enter.native=\"$event.target.blur()\"></el-input>\r\n                                            </div>\r\n                                            <span v-else>{{ scope.row[col.COLUMN_NAME] }}</span>\r\n                                        </template>\r\n                                    </el-table-column>\r\n                                </template>\r\n\r\n                                <el-table-column v-if=\"!isReadOnly\" label=\"操作\" width=\"80\" fixed=\"right\" align=\"center\">\r\n                                    <template slot-scope=\"scope\">\r\n                                        <el-button type=\"text\" size=\"mini\" icon=\"el-icon-delete\" class=\"danger-text\"\r\n                                            @click=\"handleDeleteRow(scope.$index, scope.row)\"></el-button>\r\n                                    </template>\r\n                                </el-table-column>\r\n                            </el-table>\r\n                        </div>\r\n\r\n                        <div class=\"pagination-bar\">\r\n                            <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\r\n                                :current-page=\"currentPage\" :page-sizes=\"[20, 50, 100]\" :page-size=\"pageSize\"\r\n                                layout=\"total, sizes, prev, pager, next, jumper\" :total=\"totalCount\"></el-pagination>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div v-else-if=\"viewMode === 'relation'\" key=\"view-relation\"\r\n                    class=\"relation-view-container view-container\">\r\n                    <div class=\"relation-toolbar\">\r\n                        <div class=\"legend-box\">\r\n                            <span class=\"legend-item\"><span class=\"dot active\"></span> 当前表</span>\r\n                            <span class=\"legend-item\"><span class=\"dot normal\"></span> 关联表</span>\r\n                            <el-divider direction=\"vertical\"></el-divider>\r\n                            <el-switch v-model=\"showAllColumns\" active-text=\"全部展开\" @change=\"handleShowAllChange\"\r\n                                size=\"mini\"></el-switch>\r\n                        </div>\r\n                        <div class=\"zoom-btns\">\r\n                            <el-button-group>\r\n                                <el-button size=\"mini\" icon=\"el-icon-zoom-in\" @click=\"handleGraphZoom(1.1)\"></el-button>\r\n                                <el-button size=\"mini\" icon=\"el-icon-zoom-out\"\r\n                                    @click=\"handleGraphZoom(0.9)\"></el-button>\r\n                                <el-button size=\"mini\" icon=\"el-icon-aim\" @click=\"handleGraphFit\"></el-button>\r\n                            </el-button-group>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"canvas-wrapper\">\r\n                        <div ref=\"relationCanvas\" class=\"g6-canvas-box\"></div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div v-else-if=\"viewMode === 'sql'\" key=\"view-sql\" class=\"full-height view-container\">\r\n                    <div class=\"sql-box\"\r\n                        style=\"height: 300px; padding: 0; border: 1px solid #dcdfe6; overflow: hidden; display: flex; flex-direction: column;\">\r\n                        <SqlEditor v-model=\"customSql\" language=\"sql\" style=\"flex: 1; width: 100%;\" />\r\n                    </div>\r\n                    <div style=\"text-align: right; padding: 10px 0;\"><el-button type=\"success\" size=\"small\"\r\n                            @click=\"runSql\" icon=\"el-icon-video-play\">执行 SQL</el-button></div>\r\n                    <div class=\"sql-result\" v-if=\"sqlResult.length\">\r\n                        <el-divider content-position=\"left\">结果预览</el-divider>\r\n                        <el-table :data=\"sqlResult\" border height=\"100%\" size=\"mini\" stripe><el-table-column\r\n                                v-for=\"(val, key) in sqlResult[0]\" :key=\"key\" :prop=\"key\" :label=\"key\"\r\n                                show-overflow-tooltip></el-table-column></el-table>\r\n                    </div>\r\n                </div>\r\n            </el-main>\r\n        </el-container>\r\n\r\n        <el-dialog title=\"编辑视图定义\" :visible.sync=\"editViewVisible\" width=\"900px\" append-to-body\r\n            :close-on-click-modal=\"false\">\r\n            <div style=\"margin-bottom: 10px;\">\r\n                <el-alert title=\"修改视图定义将执行 CREATE OR REPLACE VIEW 语句。\" type=\"warning\" show-icon\r\n                    :closable=\"false\"></el-alert>\r\n            </div>\r\n            <div style=\"height: 450px; border: 1px solid #dcdfe6;\">\r\n                <SqlEditor v-model=\"viewSql\" language=\"sql\" />\r\n            </div>\r\n            <div slot=\"footer\">\r\n                <el-button @click=\"editViewVisible = false\">取消</el-button>\r\n                <el-button type=\"primary\" @click=\"submitViewAlter\" :loading=\"altering\">保存修改</el-button>\r\n            </div>\r\n        </el-dialog>\r\n\r\n        <el-dialog :title=\"conflictTitle\" :visible.sync=\"conflictVisible\" width=\"750px\" append-to-body\r\n            :close-on-click-modal=\"false\">\r\n            <div class=\"conflict-alert\"\r\n                :style=\"{ backgroundColor: isParentMissing ? '#fef0f0' : '#fdf6ec', color: isParentMissing ? '#F56C6C' : '#e6a23c', borderColor: isParentMissing ? '#fde2e2' : '#faecd8' }\">\r\n                <i class=\"el-icon-warning\" style=\"margin-right: 8px;\"></i>\r\n                {{ conflictMessage }}\r\n            </div>\r\n            <el-table :data=\"conflictList\" border size=\"small\" style=\"margin-top: 15px;\">\r\n                <el-table-column :label=\"isParentMissing ? '目标主表名' : '引用表名'\" width=\"220\" prop=\"TABLE_NAME\">\r\n                    <template slot-scope=\"scope\"><el-tag size=\"mini\" type=\"info\">{{ scope.row.TABLE_NAME\r\n                            }}</el-tag></template>\r\n                </el-table-column>\r\n                <el-table-column :label=\"isParentMissing ? '目标主键列' : '关联字段'\" width=\"180\"\r\n                    prop=\"COLUMN_NAME\"></el-table-column>\r\n                <el-table-column :label=\"isParentMissing ? '状态' : '冲突记录数'\" align=\"center\" width=\"120\">\r\n                    <template slot-scope=\"scope\">\r\n                        <span v-if=\"scope.row.CNT === 'MISSING'\" style=\"color:#F56C6C;font-weight:bold;\">主键缺失</span>\r\n                        <span v-else style=\"color:#F56C6C;font-weight:bold;\">{{ scope.row.CNT }}</span>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"操作\" align=\"center\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button type=\"primary\" plain size=\"mini\" @click=\"resolveConflict(scope.row)\">\r\n                            去处理 <i class=\"el-icon-right\"></i>\r\n                        </el-button>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n            <div slot=\"footer\"><el-button @click=\"conflictVisible = false\">关闭</el-button></div>\r\n        </el-dialog>\r\n\r\n        <el-dialog title=\"DDL 预览\" :visible.sync=\"ddlVisible\" width=\"800px\" append-to-body>\r\n            <div style=\"height: 500px; border: 1px solid #dcdfe6;\">\r\n                <SqlEditor v-model=\"currentDDL\" :readOnly=\"true\" />\r\n            </div>\r\n            <div slot=\"footer\"><el-button @click=\"ddlVisible = false\">关闭</el-button></div>\r\n        </el-dialog>\r\n\r\n        <el-dialog title=\"设计表结构\" :visible.sync=\"designVisible\" width=\"1100px\" append-to-body\r\n            :close-on-click-modal=\"false\" top=\"5vh\">\r\n            <div style=\"margin-bottom: 10px;\"><el-alert title=\"注意：修改结构会生成 ALTER TABLE 语句。请谨慎操作。\" type=\"warning\"\r\n                    show-icon :closable=\"false\"></el-alert></div>\r\n            <el-tabs v-model=\"designActiveTab\" type=\"card\">\r\n                <el-tab-pane label=\"字段列 (Columns)\" name=\"columns\">\r\n                    <div style=\"margin-bottom: 10px; text-align: right;\"><el-button size=\"mini\" type=\"primary\"\r\n                            icon=\"el-icon-plus\" @click=\"addDesignColumn\">添加列</el-button></div>\r\n                    <el-table :data=\"designColumns\" border size=\"mini\" height=\"400\">\r\n                        <el-table-column label=\"状态\" width=\"50\" align=\"center\"><template slot-scope=\"scope\"><i\r\n                                    v-if=\"scope.row._status === 'new'\" class=\"el-icon-plus\" style=\"color:green\"></i><i\r\n                                    v-else-if=\"scope.row._status === 'modified'\" class=\"el-icon-edit\"\r\n                                    style=\"color:orange\"></i></template></el-table-column>\r\n                        <el-table-column label=\"列名\" width=\"150\"><template slot-scope=\"scope\"><el-input\r\n                                    v-model=\"scope.row.COLUMN_NAME\" @change=\"markModified(scope.row)\"\r\n                                    size=\"mini\"></el-input></template></el-table-column>\r\n                        <el-table-column label=\"类型\" width=\"120\"><template slot-scope=\"scope\"><el-select\r\n                                    v-model=\"scope.row.DATA_TYPE\" @change=\"markModified(scope.row)\" size=\"mini\"\r\n                                    filterable allow-create><el-option value=\"VARCHAR2\"></el-option><el-option\r\n                                        value=\"NUMBER\"></el-option><el-option\r\n                                        value=\"DATE\"></el-option></el-select></template></el-table-column>\r\n                        <el-table-column label=\"长度\" width=\"100\"><template slot-scope=\"scope\"><el-input\r\n                                    v-model=\"scope.row.DATA_LENGTH\" @change=\"markModified(scope.row)\"\r\n                                    size=\"mini\"></el-input></template></el-table-column>\r\n                        <el-table-column label=\"主键\" width=\"50\"><template slot-scope=\"scope\"><el-checkbox\r\n                                    v-model=\"scope.row.IS_PK\"\r\n                                    @change=\"handlePkChange(scope.row)\"></el-checkbox></template></el-table-column>\r\n                        <el-table-column label=\"空值\" width=\"50\"><template slot-scope=\"scope\"><el-checkbox\r\n                                    v-model=\"scope.row.NULLABLE\" @change=\"markModified(scope.row)\" true-label=\"Y\"\r\n                                    false-label=\"N\"></el-checkbox></template></el-table-column>\r\n                        <el-table-column label=\"注释\"><template slot-scope=\"scope\"><el-input v-model=\"scope.row.COMMENTS\"\r\n                                    @change=\"markModified(scope.row)\"\r\n                                    size=\"mini\"></el-input></template></el-table-column>\r\n                        <el-table-column label=\"操作\"><template slot-scope=\"scope\"><el-button type=\"text\"\r\n                                    style=\"color:#F56C6C\" icon=\"el-icon-delete\"\r\n                                    @click=\"removeDesignColumn(scope.$index, scope.row)\"></el-button></template></el-table-column>\r\n                    </el-table>\r\n                </el-tab-pane>\r\n                <el-tab-pane label=\"索引 (Indexes)\" name=\"indexes\">\r\n                    <div style=\"margin-bottom: 10px; text-align: right;\"><el-button size=\"mini\" type=\"primary\"\r\n                            icon=\"el-icon-plus\" @click=\"addDesignIndex\">添加索引</el-button></div>\r\n                    <el-table :data=\"designIndexes\" border size=\"mini\" height=\"400\">\r\n                        <el-table-column label=\"状态\" width=\"50\" align=\"center\"><template slot-scope=\"scope\"><i\r\n                                    v-if=\"scope.row._status === 'new'\" class=\"el-icon-plus\"\r\n                                    style=\"color:green\"></i></template></el-table-column>\r\n                        <el-table-column label=\"索引名称\" width=\"200\"><template slot-scope=\"scope\"><el-input\r\n                                    v-model=\"scope.row.INDEX_NAME\" size=\"mini\"></el-input></template></el-table-column>\r\n                        <el-table-column label=\"包含列\"><template slot-scope=\"scope\"><el-select v-model=\"scope.row.COLUMNS\"\r\n                                    multiple size=\"mini\" style=\"width: 100%\"><el-option v-for=\"c in designColumns\"\r\n                                        :key=\"c.COLUMN_NAME\" :label=\"c.COLUMN_NAME\"\r\n                                        :value=\"c.COLUMN_NAME\"></el-option></el-select></template></el-table-column>\r\n                        <el-table-column label=\"操作\" width=\"60\" align=\"center\"><template slot-scope=\"scope\"><el-button\r\n                                    type=\"text\" style=\"color:#F56C6C\" icon=\"el-icon-delete\"\r\n                                    @click=\"removeDesignIndex(scope.$index, scope.row)\"></el-button></template></el-table-column>\r\n                    </el-table>\r\n                </el-tab-pane>\r\n                <el-tab-pane label=\"外键 (Foreign Keys)\" name=\"fks\">\r\n                    <div style=\"margin-bottom: 10px; text-align: right;\"><el-button size=\"mini\" type=\"primary\"\r\n                            icon=\"el-icon-plus\" @click=\"addDesignFk\">添加外键</el-button></div>\r\n                    <el-table :data=\"designForeignKeys\" border size=\"mini\" height=\"400\">\r\n                        <el-table-column label=\"状态\" width=\"50\" align=\"center\"><template slot-scope=\"scope\"><i\r\n                                    v-if=\"scope.row._status === 'new'\" class=\"el-icon-plus\"\r\n                                    style=\"color:green\"></i></template></el-table-column>\r\n                        <el-table-column label=\"外键名称\" width=\"180\"><template slot-scope=\"scope\"><el-input\r\n                                    v-model=\"scope.row.CONSTRAINT_NAME\"\r\n                                    size=\"mini\"></el-input></template></el-table-column>\r\n                        <el-table-column label=\"本表字段\" width=\"150\"><template slot-scope=\"scope\"><el-select\r\n                                    v-model=\"scope.row.COLUMN_NAME\" size=\"mini\"><el-option v-for=\"c in designColumns\"\r\n                                        :key=\"c.COLUMN_NAME\" :label=\"c.COLUMN_NAME\"\r\n                                        :value=\"c.COLUMN_NAME\"></el-option></el-select></template></el-table-column>\r\n                        <el-table-column label=\"关联主表\" width=\"180\"><template slot-scope=\"scope\"><el-select\r\n                                    v-model=\"scope.row.R_TABLE_NAME\" size=\"mini\" allow-create\r\n                                    @change=\"handleRefTableChange(scope.row)\"><el-option v-for=\"t in allTableNames\"\r\n                                        :key=\"t\" :label=\"t\"\r\n                                        :value=\"t\"></el-option></el-select></template></el-table-column>\r\n                        <el-table-column label=\"目标列\" width=\"150\"><template slot-scope=\"scope\"><el-select\r\n                                    v-model=\"scope.row.R_COLUMN_NAME\" size=\"mini\"\r\n                                    @visible-change=\"(vis) => vis && loadRefColumns(scope.row.R_TABLE_NAME)\"><el-option\r\n                                        v-for=\"col in (refColumnsCache[scope.row.R_TABLE_NAME] || [])\"\r\n                                        :key=\"col.COLUMN_NAME\" :label=\"col.COLUMN_NAME\"\r\n                                        :value=\"col.COLUMN_NAME\"></el-option></el-select></template></el-table-column>\r\n                        <el-table-column label=\"操作\" width=\"60\" align=\"center\"><template slot-scope=\"scope\"><el-button\r\n                                    type=\"text\" style=\"color:#F56C6C\" icon=\"el-icon-delete\"\r\n                                    @click=\"removeDesignFk(scope.$index, scope.row)\"></el-button></template></el-table-column>\r\n                    </el-table>\r\n                </el-tab-pane>\r\n            </el-tabs>\r\n            <div slot=\"footer\"><el-button @click=\"designVisible = false\">取消</el-button><el-button type=\"primary\"\r\n                    @click=\"generateAndRunAlter\">预览并保存</el-button></div>\r\n        </el-dialog>\r\n\r\n        <el-dialog title=\"确认修改\" :visible.sync=\"sqlConfirmVisible\" width=\"600px\" append-to-body>\r\n            <div style=\"margin-bottom:10px;\">即将执行以下变更语句：</div>\r\n            <div style=\"height: 300px; border: 1px solid #dcdfe6;\">\r\n                <SqlEditor v-model=\"generatedSql\" />\r\n            </div>\r\n            <div slot=\"footer\"><el-button @click=\"sqlConfirmVisible = false\">取消</el-button><el-button type=\"primary\"\r\n                    @click=\"executeAlter\" :loading=\"altering\">确认执行</el-button></div>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport request from '@/utils/request';\r\nimport G6 from '@antv/g6';\r\nimport SqlEditor from './SqlEditor.vue';\r\n\r\n// G6 logic remains same\r\nG6.registerNode('db-table', {\r\n    draw: (cfg, group) => {\r\n        const { label, tableComment, columns = [], isCenter, isTruncated, totalColCount } = cfg;\r\n        const width = 300;\r\n        const headerHeight = 50;\r\n        const rowHeight = 28;\r\n        const contentHeight = columns.length * rowHeight;\r\n\r\n        let footerHeight = 0;\r\n        if (isTruncated) footerHeight = 24;\r\n        else if (totalColCount > 10) footerHeight = 24;\r\n\r\n        const height = headerHeight + contentHeight + footerHeight + 8;\r\n\r\n        group.addShape('rect', { attrs: { x: 0, y: 0, width, height, fill: '#fff', stroke: isCenter ? '#409EFF' : '#DCDFE6', lineWidth: 1, radius: 4 }, name: 'container-shape' });\r\n        group.addShape('rect', { attrs: { x: 0, y: 0, width, height: headerHeight, fill: isCenter ? '#409EFF' : '#F2F6FC', radius: [4, 4, 0, 0] }, name: 'header-shape' });\r\n\r\n        group.addShape('text', { attrs: { x: 10, y: 20, text: label, fill: isCenter ? '#fff' : '#333', fontSize: 13, fontWeight: 'bold', textBaseline: 'middle' }, name: 'title-text' });\r\n        if (tableComment) {\r\n            group.addShape('text', { attrs: { x: 10, y: 38, text: tableComment, fill: isCenter ? '#eee' : '#909399', fontSize: 11, textBaseline: 'middle' }, name: 'comment-text' });\r\n        }\r\n\r\n        columns.forEach((col, i) => {\r\n            const y = headerHeight + (i * rowHeight) + (rowHeight / 2);\r\n            group.addShape('text', { attrs: { x: 28, y: y, text: col.COLUMN_NAME, fill: col.IS_PK ? '#E6A23C' : '#333', fontSize: 12, textBaseline: 'middle', fontWeight: col.IS_PK ? 'bold' : 'normal' } });\r\n            if (col.IS_PK) {\r\n                group.addShape('circle', { attrs: { x: 14, y: y, r: 3, fill: '#E6A23C' } });\r\n            }\r\n            if (col.COMMENTS) {\r\n                let comment = col.COMMENTS;\r\n                if (comment.length > 10) comment = comment.substring(0, 10) + '...';\r\n                group.addShape('text', { attrs: { x: 160, y: y, text: comment, fill: '#909399', fontSize: 11, textBaseline: 'middle' } });\r\n            }\r\n        });\r\n\r\n        const y = headerHeight + contentHeight + 12;\r\n        if (isTruncated) {\r\n            group.addShape('text', { attrs: { x: width / 2, y: y, text: `... (共 ${totalColCount} 列，点击展开)`, fill: '#909399', fontSize: 11, textAlign: 'center', textBaseline: 'middle', cursor: 'pointer' }, name: 'expand-text' });\r\n        } else if (totalColCount > 10) {\r\n            group.addShape('text', { attrs: { x: width / 2, y: y, text: '⬆ 点击折叠', fill: '#409EFF', fontSize: 11, textAlign: 'center', textBaseline: 'middle', cursor: 'pointer' }, name: 'collapse-text' });\r\n        }\r\n\r\n        return group.get('children')[0];\r\n    }\r\n});\r\n\r\nexport default {\r\n    name: 'TableDetail',\r\n    components: { SqlEditor },\r\n    props: ['connId', 'connName', 'schema', 'tableName', 'initialFilter', 'initViewMode', 'tableType'],\r\n    data() {\r\n        return {\r\n            currentSchema: this.schema, activeTable: this.tableName,\r\n            viewMode: this.initViewMode || 'data',\r\n            loading: false, saving: false,\r\n            currentDataList: [], totalCount: 0, currentPage: 1, pageSize: 50,\r\n            editingCell: null, originalDataMap: {}, modifiedRows: new Set(), newRows: [],\r\n            tableColumns: [], conditions: [], logicalOperator: 'AND',\r\n            conflictVisible: false, conflictList: [], conflictPkValue: null, conflictType: 'delete',\r\n            customSql: '', sqlResult: [],\r\n            ddlVisible: false, currentDDL: '',\r\n\r\n            editViewVisible: false, viewSql: '',\r\n            isSimpleView: true,\r\n\r\n            // 标记是否从冲突跳转\r\n            jumpFromConflict: false,\r\n\r\n            // 【新增】选中的行\r\n            selectedRows: [],\r\n\r\n            designVisible: false, designActiveTab: 'columns',\r\n            designColumns: [], originalColumns: [], deleteColumnList: [],\r\n            designIndexes: [], deleteIndexList: [],\r\n            designForeignKeys: [], deleteFkList: [],\r\n            allTableNames: [], refColumnsCache: {},\r\n\r\n            showAllColumns: false, expandedTableList: [], graphNodeIds: [],\r\n            sqlConfirmVisible: false, generatedSql: '', altering: false\r\n        };\r\n    },\r\n\r\n    computed: {\r\n        rawKeys() { return this.currentDataList.length ? Object.keys(this.currentDataList[0]).filter(k => k !== 'DB_INTERNAL_ID') : []; },\r\n        hasChanges() { return this.modifiedRows.size > 0 || this.newRows.length > 0; },\r\n        isReadOnly() {\r\n            if (this.tableType === 'table') return false;\r\n            if (this.tableType === 'view') return !this.isSimpleView;\r\n            return true;\r\n        },\r\n        isParentMissing() {\r\n            return this.conflictList.length > 0 && this.conflictList[0].CNT === 'MISSING';\r\n        },\r\n        conflictTitle() {\r\n            if (this.isParentMissing) return '⚠️ 保存失败：目标主键缺失';\r\n            return this.conflictType === 'delete' ? '⚠️ 无法删除：存在关联引用' : '⚠️ 无法修改：存在关联引用';\r\n        },\r\n        conflictMessage() {\r\n            if (this.isParentMissing) return '您输入的 外键值 在目标主表中不存在。请先在主表中创建该数据，或修改为已存在的值。';\r\n            return `该记录被以下 ${this.conflictList.length} 张表引用，请先处理这些关联数据。`;\r\n        }\r\n    },\r\n\r\n    mounted() { this.initView(); },\r\n\r\n    watch: {\r\n        initialFilter: {\r\n            immediate: true, deep: true,\r\n            handler(val) {\r\n                if (val && val.field && val.value !== undefined) {\r\n                    if (this.viewMode !== 'data') this.handleViewModeSwitch('data');\r\n                    // 标记从外部跳转\r\n                    this.jumpFromConflict = true;\r\n                    this.applyAutoFilter(val);\r\n                }\r\n            }\r\n        },\r\n        tableName: {\r\n            immediate: true,\r\n            handler(val) {\r\n                if (val) {\r\n                    this.activeTable = val;\r\n                    this.currentSchema = this.schema;\r\n                    this.currentPage = 1;\r\n                    this.expandedTableList = [];\r\n                    this.showAllColumns = false;\r\n                    this.selectedRows = []; // 清空选中\r\n\r\n                    // 如果有跳转条件，跳过普通加载\r\n                    if (this.initialFilter && this.initialFilter.field) {\r\n                        return;\r\n                    }\r\n                    this.loadData();\r\n                }\r\n            }\r\n        },\r\n        initViewMode(val) { if (val && val !== this.viewMode) this.handleViewModeSwitch(val); },\r\n    },\r\n\r\n    methods: {\r\n        async request(method, url, dataOrParams = {}) {\r\n            const config = { method, url, headers: { 'Conn-Id': this.connId } };\r\n            if (!url.startsWith('/db')) url = '/db' + url;\r\n            config.url = url;\r\n            if (method === 'get' || method === 'delete') config.params = dataOrParams; else config.data = dataOrParams;\r\n            return request(config);\r\n        },\r\n\r\n        handleError(e, title = '操作失败') {\r\n            let rawMsg = e.response?.data?.msg || e.response?.data?.message || e.message || '未知错误';\r\n            if (rawMsg.includes('nested exception is')) rawMsg = rawMsg.split('nested exception is').pop();\r\n            rawMsg = rawMsg.replace(/[\\w\\.]*Exception:\\s*/g, '').trim();\r\n            if (rawMsg.length > 300) rawMsg = rawMsg.substring(0, 300) + '...';\r\n            this.$alert(`<div style=\"font-size: 14px; line-height: 1.5; color: #606266;\"><p style=\"font-weight: bold; color: #F56C6C;\">❌ ${title}：</p><p style=\"background: #fef0f0; padding: 8px; border-radius: 4px; margin: 5px 0; word-break: break-all;\">${rawMsg}</p></div>`, title, { dangerouslyUseHTMLString: true, confirmButtonText: '知道了', type: 'error', customClass: 'error-dialog-width' });\r\n        },\r\n\r\n        initView() {\r\n            this.destroyGraph();\r\n            if (this.viewMode === 'relation') this.loadRelations();\r\n            else if (this.viewMode === 'data') {\r\n                if (!this.initialFilter || !this.initialFilter.field) this.loadData();\r\n            }\r\n        },\r\n\r\n        handleViewModeSwitch(val) {\r\n            if (this.hasChanges) {\r\n                this.$confirm('当前有未保存的修改，切换视图将丢失这些修改，是否继续？', '提示', { type: 'warning' })\r\n                    .then(() => { this.resetEditState(); this._doSwitch(val); })\r\n                    .catch(() => { this.viewMode = 'data'; });\r\n            } else { this._doSwitch(val); }\r\n        },\r\n\r\n        _doSwitch(val) {\r\n            const mode = (typeof val === 'string') ? val : this.viewMode;\r\n            this.viewMode = mode;\r\n            this.$emit('view-mode-change', mode);\r\n            if (mode === 'relation') this.$nextTick(() => { this.loadRelations(); });\r\n            else { this.destroyGraph(); if (mode === 'data') this.loadData(); }\r\n        },\r\n\r\n        async loadData() {\r\n            this.resetEditState();\r\n            this.selectedRows = [];\r\n            this.loading = true;\r\n            try {\r\n                const colRes = await this.request('get', '/columns', { schema: this.currentSchema, tableName: this.activeTable });\r\n                this.tableColumns = colRes.data.data || [];\r\n                let list = []; let total = 0;\r\n                const params = { schema: this.currentSchema, tableName: this.activeTable, page: this.currentPage, size: this.pageSize };\r\n                if (this.conditions.length > 0) {\r\n                    const filterRes = await this.request('post', '/filter', { ...params, logic: this.logicalOperator, conditions: this.conditions });\r\n                    list = filterRes.data.data.list || []; total = filterRes.data.data.total || 0; if (filterRes.data.data.isView) { this.isSimpleView = filterRes.data.data.isSimpleView; }\r\n                } else {\r\n                    const dataRes = await this.request('get', '/data', params);\r\n                    list = dataRes.data.data.list || []; total = dataRes.data.data.total || 0; if (dataRes.data.data.isView) { this.isSimpleView = dataRes.data.data.isSimpleView; }\r\n                }\r\n                this.currentDataList = list; this.totalCount = total; this.originalDataMap = {}; list.forEach(row => { if (row.DB_INTERNAL_ID) this.originalDataMap[row.DB_INTERNAL_ID] = JSON.parse(JSON.stringify(row)); });\r\n\r\n                // 【核心优化】从冲突跳转来且无数据 -> 批量自动插入\r\n                if (this.jumpFromConflict && this.totalCount === 0) {\r\n                    this.jumpFromConflict = false;\r\n                    this.$nextTick(() => {\r\n                        // 遍历所有过滤条件，如果存在多个 OR 条件，生成多行\r\n                        if (this.conditions.length > 0 && this.logicalOperator === 'OR') {\r\n                            let addedCount = 0;\r\n                            this.conditions.forEach(cond => {\r\n                                if (cond.operator === '=' && cond.value) {\r\n                                    this.handleAddRow(cond.value, cond.field);\r\n                                    addedCount++;\r\n                                }\r\n                            });\r\n                            if (addedCount > 0) {\r\n                                this.$message({ message: `已为您批量创建 ${addedCount} 条新行并填入缺失的主键，请补充其他信息。`, type: 'success', duration: 6000, showClose: true });\r\n                            }\r\n                        } else {\r\n                            // 单条件情况\r\n                            this.handleAddRow();\r\n                            this.$message({ message: '未找到指定主键记录，已自动为您创建新行并填入主键，请补充其他信息。', type: 'success', duration: 5000, showClose: true });\r\n                        }\r\n                    });\r\n                } else if (this.totalCount > 0) {\r\n                    this.jumpFromConflict = false;\r\n                }\r\n            } catch (e) { this.handleError(e, '数据加载失败'); } finally { this.loading = false; }\r\n        },\r\n\r\n        async handleEditView() {\r\n            try {\r\n                const res = await this.request('get', '/ddl', { schema: this.currentSchema, tableName: this.activeTable });\r\n                let rawDDL = res.data.data || '';\r\n                this.viewSql = rawDDL.replace(/&quot;/g, '\"').replace(/&apos;/g, \"'\").replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&amp;/g, '&');\r\n                this.editViewVisible = true;\r\n            } catch (e) { this.handleError(e, '获取视图定义失败'); }\r\n        },\r\n\r\n        async submitViewAlter() {\r\n            this.altering = true;\r\n            try {\r\n                const res = await this.request('post', '/execute', { sql: this.viewSql });\r\n                if (res.data.code === 200) {\r\n                    this.$message.success('视图修改成功');\r\n                    this.editViewVisible = false;\r\n                    this.loadData();\r\n                } else {\r\n                    throw new Error(res.data.msg);\r\n                }\r\n            } catch (e) {\r\n                this.handleError(e, '修改视图失败');\r\n            } finally {\r\n                this.altering = false;\r\n            }\r\n        },\r\n\r\n        resetEditState() { this.editingCell = null; this.modifiedRows = new Set(); this.newRows = []; },\r\n        handleDiscardChanges() { this.resetEditState(); this.loadData(); },\r\n        handleCellDblClick(row, column) {\r\n            if (this.isReadOnly) return;\r\n            this.editingCell = { rowId: row.DB_INTERNAL_ID || row._tempId, col: column.property };\r\n            this.$nextTick(() => { const inputs = document.getElementsByTagName('input'); if (inputs && inputs.length > 0) inputs[inputs.length - 1].focus(); });\r\n        },\r\n        isCellEditing(row, colName) { if (!this.editingCell) return false; const id = row.DB_INTERNAL_ID || row._tempId; return this.editingCell.rowId === id && this.editingCell.col === colName; },\r\n        finishEditing(row, colName) { this.editingCell = null; const id = row.DB_INTERNAL_ID; if (!id) return; const originalRow = this.originalDataMap[id]; let newVal = row[colName]; let oldVal = originalRow ? originalRow[colName] : ''; if (newVal == null) newVal = ''; if (oldVal == null) oldVal = ''; if (String(newVal) !== String(oldVal)) { this.modifiedRows.add(id); this.modifiedRows = new Set(this.modifiedRows); } },\r\n        getCellStyle({ row, column }) { const id = row.DB_INTERNAL_ID; const col = column.property; if (!id && row._tempId) return { backgroundColor: '#f0f9eb' }; if (this.modifiedRows.has(id)) { const original = this.originalDataMap[id]; let newVal = row[col]; let oldVal = original ? original[col] : ''; if (newVal == null) newVal = ''; if (oldVal == null) oldVal = ''; if (String(newVal) !== String(oldVal)) return { backgroundColor: '#fdf6ec', color: '#E6A23C', fontWeight: 'bold' }; } return {}; },\r\n\r\n        // 【核心修改】支持参数化填充\r\n        handleAddRow(prefillValue = null, prefillField = null) {\r\n            const newRow = { _tempId: 'NEW_' + Date.now() + Math.random().toString(36).substr(2, 5) };\r\n            this.tableColumns.forEach(c => newRow[c.COLUMN_NAME] = null);\r\n\r\n            // 优先使用传入的填充值\r\n            if (prefillValue !== null && prefillField) {\r\n                newRow[prefillField] = prefillValue;\r\n            }\r\n            // 否则使用当前的筛选条件 (单条件)\r\n            else if (this.conditions.length === 1 && this.conditions[0].operator === '=') {\r\n                const fieldName = this.conditions[0].field;\r\n                const val = this.conditions[0].value;\r\n                const matchKey = Object.keys(newRow).find(k => k.toUpperCase() === fieldName.toUpperCase());\r\n                if (matchKey && val !== undefined && val !== null) {\r\n                    newRow[matchKey] = val;\r\n                }\r\n            }\r\n            this.currentDataList.unshift(newRow);\r\n            this.newRows.push(newRow);\r\n        },\r\n\r\n        getPkColumnName() {\r\n            const pkCol = this.tableColumns.find(c => ['1', 1, 'Y', true].includes(c.IS_PK));\r\n            if (pkCol) return pkCol.COLUMN_NAME;\r\n            const idCol = this.tableColumns.find(c => c.COLUMN_NAME.toUpperCase() === 'ID');\r\n            if (idCol) return idCol.COLUMN_NAME;\r\n            if (this.tableColumns.length > 0) return this.tableColumns[0].COLUMN_NAME;\r\n            return null;\r\n        },\r\n        getCleanRowData(row) { const cleanData = {}; this.tableColumns.forEach(col => { cleanData[col.COLUMN_NAME] = row[col.COLUMN_NAME]; }); if (row.DB_INTERNAL_ID) cleanData.DB_INTERNAL_ID = row.DB_INTERNAL_ID; return cleanData; },\r\n\r\n        async submitBatchChanges() {\r\n            if (this.saving) return;\r\n            this.saving = true;\r\n\r\n            const insertList = this.newRows.map(row => {\r\n                const clean = this.getCleanRowData(row);\r\n                delete clean.DB_INTERNAL_ID;\r\n                return clean;\r\n            });\r\n\r\n            const updateList = Array.from(this.modifiedRows).map(id => {\r\n                const row = this.currentDataList.find(r => r.DB_INTERNAL_ID === id);\r\n                return row ? this.getCleanRowData(row) : null;\r\n            }).filter(r => r !== null);\r\n\r\n            if (insertList.length === 0 && updateList.length === 0) {\r\n                this.$message.info(\"没有检测到有效变更\");\r\n                this.saving = false;\r\n                return;\r\n            }\r\n\r\n            const loadingInstance = this.$loading({ lock: true, text: '正在批量保存中...', background: 'rgba(0, 0, 0, 0.7)' });\r\n\r\n            try {\r\n                const res = await this.request('post', `/save/batch?schema=${this.currentSchema}&tableName=${this.activeTable}`, {\r\n                    insertList,\r\n                    updateList\r\n                });\r\n\r\n                loadingInstance.close();\r\n\r\n                if (res.data.code === 200) {\r\n                    this.$message.success('批量保存成功！');\r\n                    this.loadData();\r\n                } else if (res.data.code === 503) {\r\n                    this.conflictList = res.data.data;\r\n                    this.conflictType = 'save';\r\n                    this.conflictVisible = true;\r\n                } else {\r\n                    throw new Error(res.data.msg);\r\n                }\r\n            } catch (e) {\r\n                loadingInstance.close();\r\n                this.handleError(e, '保存失败');\r\n            } finally {\r\n                this.saving = false;\r\n            }\r\n        },\r\n\r\n        handleDeleteRow(index, row) {\r\n            if (!row.DB_INTERNAL_ID) { this.currentDataList.splice(index, 1); const idx = this.newRows.indexOf(row); if (idx > -1) this.newRows.splice(idx, 1); }\r\n            else {\r\n                this.$confirm('确定删除该行数据吗?', '提示', { type: 'warning' }).then(async () => {\r\n                    const pkName = this.getPkColumnName(); const pkVal = pkName ? row[pkName] : null;\r\n                    const res = await this.request('delete', '/delete', { schema: this.currentSchema, tableName: this.activeTable, internalId: row.DB_INTERNAL_ID, pkValue: pkVal });\r\n                    if (res.data.code === 200) { this.$message.success('删除成功'); this.loadData(); }\r\n                    else if (res.data.code === 503) { this.conflictList = res.data.data; this.conflictPkValue = pkVal; this.conflictType = 'delete'; this.conflictVisible = true; }\r\n                    else { throw new Error(res.data.msg); }\r\n                }).catch((e) => {\r\n                    if (e !== 'cancel') this.handleError({ message: e.message || '删除失败' }, '删除失败');\r\n                });\r\n            }\r\n        },\r\n\r\n        // 【新增】选区变更\r\n        handleSelectionChange(val) {\r\n            this.selectedRows = val;\r\n        },\r\n\r\n        // 【新增】批量删除方法\r\n        async handleBatchDelete() {\r\n            if (this.selectedRows.length === 0) return;\r\n            const existRowsToDelete = this.selectedRows.filter(row => row.DB_INTERNAL_ID).map(row => row.DB_INTERNAL_ID);\r\n            const newRowsToDelete = this.selectedRows.filter(row => !row.DB_INTERNAL_ID);\r\n\r\n            this.$confirm(`确定要删除选中的 ${this.selectedRows.length} 条数据吗？`, '批量删除', { type: 'warning' }).then(async () => {\r\n                // 1. 先删本地新行\r\n                newRowsToDelete.forEach(row => {\r\n                    const idx = this.currentDataList.indexOf(row);\r\n                    if (idx > -1) this.currentDataList.splice(idx, 1);\r\n                    const nIdx = this.newRows.indexOf(row);\r\n                    if (nIdx > -1) this.newRows.splice(nIdx, 1);\r\n                });\r\n\r\n                // 2. 再调后端删持久化行\r\n                if (existRowsToDelete.length > 0) {\r\n                    const loadingInstance = this.$loading({ lock: true, text: '正在批量删除...', background: 'rgba(0,0,0,0.7)' });\r\n                    try {\r\n                        const res = await this.request('post', `/delete/batch?schema=${this.currentSchema}&tableName=${this.activeTable}`, existRowsToDelete);\r\n                        loadingInstance.close();\r\n\r\n                        if (res.data.code === 200) {\r\n                            this.$message.success('批量删除成功');\r\n                            this.loadData();\r\n                        } else if (res.data.code === 503) {\r\n                            this.conflictList = res.data.data;\r\n                            this.conflictType = 'delete';\r\n                            this.conflictVisible = true;\r\n                        } else {\r\n                            throw new Error(res.data.msg);\r\n                        }\r\n                    } catch (e) {\r\n                        loadingInstance.close();\r\n                        this.handleError(e, '批量删除失败');\r\n                    }\r\n                } else {\r\n                    this.$message.success('删除成功');\r\n                }\r\n            }).catch(() => { });\r\n        },\r\n\r\n        addCondition() { if (this.tableColumns.length > 0) this.conditions.push({ field: this.tableColumns[0].COLUMN_NAME, operator: '=', value: '' }); },\r\n        removeCondition(index) { this.conditions.splice(index, 1); },\r\n        handleQuery() { this.currentPage = 1; this.loadData(); },\r\n        resetFilters() { this.conditions = []; this.handleQuery(); },\r\n        // 【核心修复】自动筛选：支持多值 (OR)\r\n        applyAutoFilter(filter) {\r\n            if (Array.isArray(filter.value)) {\r\n                this.conditions = filter.value.map(v => ({\r\n                    field: filter.field,\r\n                    operator: '=',\r\n                    value: v\r\n                }));\r\n                this.logicalOperator = 'OR';\r\n            } else {\r\n                this.conditions = [{ field: filter.field, operator: '=', value: filter.value }];\r\n            }\r\n            this.$nextTick(() => { this.handleQuery(); });\r\n        },\r\n\r\n        // 【核心修复】处理聚合冲突列表\r\n        resolveConflict(row) {\r\n            this.conflictVisible = false;\r\n\r\n            // 优先使用聚合值列表\r\n            let filterValue = [];\r\n            if (row.MY_VAL_LIST && row.MY_VAL_LIST.length > 0) {\r\n                filterValue = row.MY_VAL_LIST;\r\n            } else if (row.MY_VAL !== undefined && row.MY_VAL !== null) {\r\n                filterValue = [row.MY_VAL];\r\n            } else if (this.conflictPkValue) {\r\n                filterValue = [this.conflictPkValue];\r\n            }\r\n\r\n            this.$emit('open-table', {\r\n                connId: this.connId,\r\n                schema: this.currentSchema,\r\n                tableName: row.TABLE_NAME,\r\n                initViewMode: 'data',\r\n                filter: {\r\n                    field: row.COLUMN_NAME,\r\n                    value: filterValue // 传数组\r\n                }\r\n            });\r\n        },\r\n        async handleShowDDL() {\r\n            try {\r\n                const res = await this.request('get', '/ddl', { schema: this.currentSchema, tableName: this.activeTable });\r\n                let rawDDL = res.data.data || '';\r\n                this.currentDDL = rawDDL.replace(/&quot;/g, '\"').replace(/&apos;/g, \"'\").replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&amp;/g, '&');\r\n                this.ddlVisible = true;\r\n            } catch (e) { this.handleError(e, '获取DDL失败'); }\r\n        },\r\n\r\n        // ... Design table related methods (omitted for brevity, keep as is) ...\r\n        async handleDesignTable() {\r\n            try {\r\n                const colRes = await this.request('get', '/columns', { schema: this.currentSchema, tableName: this.activeTable });\r\n                const cols = colRes.data.data;\r\n                this.originalColumns = JSON.parse(JSON.stringify(cols.map(c => ({\r\n                    ...c,\r\n                    DATA_LENGTH: c.DATA_LENGTH ? String(c.DATA_LENGTH) : '',\r\n                    COMMENTS: c.COMMENTS || '',\r\n                    DATA_DEFAULT: c.DATA_DEFAULT || '',\r\n                    IS_PK: ['1', 1, 'Y', 'y', 'true', true].includes(c.IS_PK)\r\n                }))));\r\n\r\n                this.designColumns = JSON.parse(JSON.stringify(this.originalColumns)).map(c => ({ ...c, _status: 'original', _originalName: c.COLUMN_NAME }));\r\n\r\n                try {\r\n                    const idxRes = await this.request('get', '/indexes', { schema: this.currentSchema, tableName: this.activeTable });\r\n                    if (idxRes.data.code === 200) {\r\n                        this.designIndexes = idxRes.data.data.map(i => ({ ...i, _status: 'original', COLUMNS: i.COLUMNS.split(',') }));\r\n                    }\r\n                } catch (e) { this.designIndexes = []; }\r\n\r\n                try {\r\n                    const fkRes = await this.request('get', '/foreign-keys', { schema: this.currentSchema, tableName: this.activeTable });\r\n                    if (fkRes.data.code === 200) {\r\n                        this.designForeignKeys = fkRes.data.data.map(f => ({ ...f, _status: 'original' }));\r\n                        const refTables = [...new Set(this.designForeignKeys.map(f => f.R_TABLE_NAME).filter(t => t))];\r\n                        refTables.forEach(t => this.loadRefColumns(t));\r\n                    }\r\n                } catch (e) { this.designForeignKeys = []; }\r\n\r\n                const tablesRes = await this.request('get', '/tables', { schema: this.currentSchema });\r\n                this.allTableNames = (tablesRes.data.data || []).map(t => t.TABLE_NAME);\r\n\r\n                this.deleteColumnList = [];\r\n                this.deleteIndexList = [];\r\n                this.deleteFkList = [];\r\n                this.designActiveTab = 'columns';\r\n                this.designVisible = true;\r\n            } catch (e) { this.handleError(e, '加载设计器失败'); }\r\n        },\r\n\r\n        async loadRefColumns(tableName) {\r\n            if (!tableName || this.refColumnsCache[tableName]) return;\r\n            try {\r\n                const res = await this.request('get', '/columns', { schema: this.currentSchema, tableName: tableName });\r\n                this.$set(this.refColumnsCache, tableName, res.data.data || []);\r\n            } catch (e) {\r\n                console.error(\"加载引用表列失败\", e);\r\n            }\r\n        },\r\n\r\n        handleRefTableChange(row) {\r\n            row.R_COLUMN_NAME = '';\r\n            if (row.R_TABLE_NAME) {\r\n                this.loadRefColumns(row.R_TABLE_NAME);\r\n            }\r\n        },\r\n\r\n        isDiff(newVal, oldVal) {\r\n            const n = (newVal === null || newVal === undefined) ? \"\" : String(newVal).trim();\r\n            const o = (oldVal === null || oldVal === undefined) ? \"\" : String(oldVal).trim();\r\n            return n !== o;\r\n        },\r\n\r\n        addDesignColumn() { this.designColumns.push({ COLUMN_NAME: 'NEW_COL', DATA_TYPE: 'VARCHAR2', DATA_LENGTH: '50', NULLABLE: 'Y', IS_PK: false, _status: 'new' }); },\r\n\r\n        removeDesignColumn(index, row) { if (row._status !== 'new') this.deleteColumnList.push(row.COLUMN_NAME); this.designColumns.splice(index, 1); },\r\n\r\n        markModified(row) {\r\n            if (row._status === 'new') return;\r\n\r\n            const original = this.originalColumns.find(o => o.COLUMN_NAME === row._originalName);\r\n            if (!original) return;\r\n\r\n            const isChanged =\r\n                this.isDiff(row.COLUMN_NAME, original.COLUMN_NAME) ||\r\n                this.isDiff(row.DATA_TYPE, original.DATA_TYPE) ||\r\n                this.isDiff(row.DATA_LENGTH, original.DATA_LENGTH) ||\r\n                (row.IS_PK !== original.IS_PK) ||\r\n                this.isDiff(row.NULLABLE, original.NULLABLE) ||\r\n                this.isDiff(row.DATA_DEFAULT, original.DATA_DEFAULT) ||\r\n                this.isDiff(row.COMMENTS, original.COMMENTS);\r\n\r\n            row._status = isChanged ? 'modified' : 'original';\r\n        },\r\n\r\n        handlePkChange(row) {\r\n            this.markModified(row);\r\n        },\r\n\r\n        addDesignIndex() { this.designIndexes.push({ INDEX_NAME: '', INDEX_TYPE: 'NORMAL', COLUMNS: [], _status: 'new' }); },\r\n        removeDesignIndex(index, row) { if (row._status !== 'new') this.deleteIndexList.push(row.INDEX_NAME); this.designIndexes.splice(index, 1); },\r\n\r\n        addDesignFk() { this.designForeignKeys.push({ CONSTRAINT_NAME: '', COLUMN_NAME: '', R_TABLE_NAME: '', R_COLUMN_NAME: '', DELETE_RULE: 'NO ACTION', _status: 'new' }); },\r\n        removeDesignFk(index, row) { if (row._status !== 'new') this.deleteFkList.push(row.CONSTRAINT_NAME); this.designForeignKeys.splice(index, 1); },\r\n\r\n        generateAndRunAlter() {\r\n            let sqls = []; const s = this.currentSchema; const t = this.activeTable;\r\n\r\n            const nameRegex = /^[a-zA-Z0-9_]+$/;\r\n            for (const c of this.designColumns) {\r\n                if (!nameRegex.test(c.COLUMN_NAME)) {\r\n                    this.$message.error(`列名 \"${c.COLUMN_NAME}\" 不合法，仅支持字母、数字和下划线。`);\r\n                    return;\r\n                }\r\n            }\r\n\r\n            this.deleteColumnList.forEach(c => sqls.push(`ALTER TABLE \"${s}\".\"${t}\" DROP COLUMN \"${c}\";`));\r\n\r\n            this.designColumns.filter(c => c._status === 'modified').forEach(c => {\r\n                const original = this.originalColumns.find(o => o.COLUMN_NAME === c._originalName);\r\n                if (!original) return;\r\n\r\n                if (this.isDiff(c.COLUMN_NAME, c._originalName)) {\r\n                    sqls.push(`ALTER TABLE \"${s}\".\"${t}\" RENAME COLUMN \"${c._originalName}\" TO \"${c.COLUMN_NAME}\";`);\r\n                }\r\n\r\n                let typeLen = c.DATA_TYPE;\r\n                if (c.DATA_LENGTH && !['NUMBER', 'DATE', 'TIMESTAMP', 'CLOB', 'BLOB'].includes(c.DATA_TYPE)) typeLen += `(${c.DATA_LENGTH})`;\r\n\r\n                let modifySql = `ALTER TABLE \"${s}\".\"${t}\" MODIFY \"${c.COLUMN_NAME}\" ${typeLen}`;\r\n                if (c.DATA_DEFAULT && this.isDiff(c.DATA_DEFAULT, original.DATA_DEFAULT)) modifySql += ` DEFAULT ${c.DATA_DEFAULT}`;\r\n                if (this.isDiff(c.NULLABLE, original.NULLABLE)) modifySql += (c.NULLABLE === 'N' ? ' NOT NULL' : ' NULL');\r\n\r\n                const isAttrChanged = this.isDiff(c.DATA_TYPE, original.DATA_TYPE) ||\r\n                    this.isDiff(c.DATA_LENGTH, original.DATA_LENGTH) ||\r\n                    this.isDiff(c.NULLABLE, original.NULLABLE) ||\r\n                    this.isDiff(c.DATA_DEFAULT, original.DATA_DEFAULT);\r\n\r\n                if (isAttrChanged) sqls.push(modifySql + ';');\r\n\r\n                if (this.isDiff(c.COMMENTS, original.COMMENTS)) {\r\n                    sqls.push(`COMMENT ON COLUMN \"${s}\".\"${t}\".\"${c.COLUMN_NAME}\" IS '${c.COMMENTS}';`);\r\n                }\r\n            });\r\n\r\n            const oldPkCols = this.originalColumns.filter(c => ['1', 1, 'Y', true].includes(c.IS_PK)).map(c => c.COLUMN_NAME).sort();\r\n            const newPkCols = this.designColumns.filter(c => c.IS_PK).map(c => c.COLUMN_NAME).sort();\r\n\r\n            const isPkChanged = JSON.stringify(oldPkCols) !== JSON.stringify(newPkCols);\r\n\r\n            if (isPkChanged) {\r\n                if (oldPkCols.length > 0) sqls.push(`ALTER TABLE \"${s}\".\"${t}\" DROP PRIMARY KEY;`);\r\n                if (newPkCols.length > 0) {\r\n                    const pkList = newPkCols.map(c => `\"${c}\"`).join(',');\r\n                    sqls.push(`ALTER TABLE \"${s}\".\"${t}\" ADD PRIMARY KEY (${pkList});`);\r\n                }\r\n            }\r\n\r\n            this.designColumns.filter(c => c._status === 'new').forEach(c => {\r\n                let l = `ALTER TABLE \"${s}\".\"${t}\" ADD \"${c.COLUMN_NAME}\" ${c.DATA_TYPE}`;\r\n                if (c.DATA_LENGTH && !['NUMBER', 'DATE', 'TIMESTAMP', 'CLOB', 'BLOB'].includes(c.DATA_TYPE)) l += `(${c.DATA_LENGTH})`;\r\n                if (c.DATA_DEFAULT) l += ` DEFAULT ${c.DATA_DEFAULT}`;\r\n                if (c.NULLABLE === 'N') l += ' NOT NULL';\r\n                sqls.push(l + ';');\r\n                if (c.COMMENTS) sqls.push(`COMMENT ON COLUMN \"${s}\".\"${t}\".\"${c.COLUMN_NAME}\" IS '${c.COMMENTS}';`);\r\n            });\r\n\r\n            this.deleteIndexList.forEach(idx => sqls.push(`DROP INDEX \"${s}\".\"${idx}\";`));\r\n            this.designIndexes.filter(i => i._status === 'new').forEach(i => {\r\n                if (!i.INDEX_NAME || i.COLUMNS.length === 0) return;\r\n                const cols = i.COLUMNS.map(c => `\"${c}\"`).join(',');\r\n                const unique = i.INDEX_TYPE === 'UNIQUE' ? 'UNIQUE' : (i.INDEX_TYPE === 'BITMAP' ? 'BITMAP' : '');\r\n                sqls.push(`CREATE ${unique} INDEX \"${i.INDEX_NAME}\" ON \"${s}\".\"${t}\" (${cols});`);\r\n            });\r\n\r\n            this.deleteFkList.forEach(fk => sqls.push(`ALTER TABLE \"${s}\".\"${t}\" DROP CONSTRAINT \"${fk}\";`));\r\n            this.designForeignKeys.filter(f => f._status === 'new').forEach(f => {\r\n                if (!f.CONSTRAINT_NAME || !f.COLUMN_NAME || !f.R_TABLE_NAME || !f.R_COLUMN_NAME) return;\r\n                let sql = `ALTER TABLE \"${s}\".\"${t}\" ADD CONSTRAINT \"${f.CONSTRAINT_NAME}\" FOREIGN KEY (\"${f.COLUMN_NAME}\") REFERENCES \"${s}\".\"${f.R_TABLE_NAME}\"(\"${f.R_COLUMN_NAME}\")`;\r\n                if (f.DELETE_RULE === 'CASCADE') sql += ' ON DELETE CASCADE';\r\n                else if (f.DELETE_RULE === 'SET NULL') sql += ' ON DELETE SET NULL';\r\n                sqls.push(sql + ';');\r\n            });\r\n\r\n            if (!sqls.length) return this.$message.info('无结构变更');\r\n            this.generatedSql = sqls.join('\\n');\r\n            this.sqlConfirmVisible = true;\r\n        },\r\n\r\n        async executeAlter() {\r\n            this.altering = true;\r\n            try {\r\n                const statements = this.generatedSql.split(';').map(s => s.trim()).filter(s => s);\r\n                const res = await this.request('post', '/execute/batch', { sqls: statements });\r\n                if (res.data.code === 200) {\r\n                    this.$message.success('修改成功');\r\n                    this.sqlConfirmVisible = false;\r\n                    this.designVisible = false;\r\n\r\n                    if (this.viewMode === 'relation') {\r\n                        this.loadRelations();\r\n                    } else {\r\n                        this.loadData();\r\n                    }\r\n                } else {\r\n                    throw new Error(res.data.msg);\r\n                }\r\n            } catch (e) {\r\n                this.handleError(e, '表结构变更失败');\r\n            } finally { this.altering = false; }\r\n        },\r\n\r\n        indexMethod(index) { return (this.currentPage - 1) * this.pageSize + index + 1; },\r\n        handleSortChange({ prop, order }) { if (!prop) return; const sortedData = [...this.currentDataList]; sortedData.sort((a, b) => { let valA = a[prop]; let valB = b[prop]; if (valA == null) valA = ''; if (valB == null) valB = ''; if (valA > valB) return order === 'ascending' ? 1 : -1; if (valA < valB) return order === 'ascending' ? -1 : 1; return 0; }); this.currentDataList = sortedData; },\r\n        handleSizeChange(v) { this.pageSize = v; this.currentPage = 1; this.loadData(); },\r\n        handleCurrentChange(v) { this.currentPage = v; this.loadData(); },\r\n\r\n        async runSql() { const res = await this.request('post', '/execute', { sql: this.customSql }); if (res.data.code === 200) this.sqlResult = res.data.data; },\r\n        destroyGraph() { if (this.graphInstance) { this.graphInstance.destroy(); this.graphInstance = null; } const c = this.$refs.relationCanvas; if (c) c.innerHTML = ''; },\r\n\r\n        handleShowAllChange(val) {\r\n            if (val) {\r\n                if (this.graphNodeIds.length > 0) {\r\n                    this.expandedTableList = [...this.graphNodeIds];\r\n                }\r\n            } else {\r\n                this.expandedTableList = [];\r\n            }\r\n            this.loadRelations();\r\n        },\r\n\r\n        async loadRelations() {\r\n            this.destroyGraph();\r\n            try {\r\n                const res = await this.request('get', '/er-data', {\r\n                    schema: this.currentSchema,\r\n                    tableName: this.activeTable,\r\n                    showAll: this.showAllColumns,\r\n                    expandedTables: this.expandedTableList.join(',')\r\n                });\r\n                if (this.viewMode === 'relation') {\r\n                    this.graphNodeIds = res.data.data.nodes.map(n => n.id);\r\n                    this.checkAutoExpandState();\r\n                    this.$nextTick(() => this.initGraph(res.data.data));\r\n                }\r\n            } catch (e) { }\r\n        },\r\n\r\n        checkAutoExpandState() {\r\n            if (this.graphNodeIds.length > 0) {\r\n                const allExpanded = this.graphNodeIds.every(id => this.expandedTableList.includes(id));\r\n                if (this.showAllColumns !== allExpanded) {\r\n                    this.showAllColumns = allExpanded;\r\n                }\r\n            }\r\n        },\r\n\r\n        handleGraphZoom(ratio) {\r\n            if (!this.graphInstance) return;\r\n            const zoom = this.graphInstance.getZoom();\r\n            this.graphInstance.zoomTo(zoom * ratio, { x: this.$refs.relationCanvas.offsetWidth / 2, y: this.$refs.relationCanvas.offsetHeight / 2 });\r\n        },\r\n        handleGraphFit() {\r\n            if (!this.graphInstance) return;\r\n            this.graphInstance.fitView();\r\n        },\r\n\r\n        initGraph(data) {\r\n            const container = this.$refs.relationCanvas; if (!container) return;\r\n            container.innerHTML = '';\r\n\r\n            const nodeCount = data.nodes.length;\r\n            const ranksep = nodeCount > 5 ? 150 : 100;\r\n\r\n            this.graphInstance = new G6.Graph({\r\n                container,\r\n                width: container.offsetWidth,\r\n                height: container.offsetHeight,\r\n                fitView: true,\r\n                fitViewPadding: 40,\r\n                renderer: 'canvas',\r\n                layout: {\r\n                    type: 'dagre',\r\n                    rankdir: 'LR',\r\n                    nodesep: 50,\r\n                    ranksep: ranksep\r\n                },\r\n                defaultNode: {\r\n                    type: 'db-table',\r\n                    anchorPoints: [[0, 0.5], [1, 0.5]]\r\n                },\r\n                defaultEdge: {\r\n                    type: 'cubic-horizontal',\r\n                    style: { stroke: '#A3B1BF', lineWidth: 2, endArrow: true },\r\n                    labelCfg: { autoRotate: true, style: { fontSize: 10, fill: '#aaa' } }\r\n                },\r\n                modes: { default: ['drag-canvas', 'zoom-canvas', 'drag-node'] }\r\n            });\r\n            this.graphInstance.data(JSON.parse(JSON.stringify(data)));\r\n            this.graphInstance.render();\r\n\r\n            this.graphInstance.on('node:click', (e) => {\r\n                const shapeName = e.target.get('name');\r\n                const nodeId = e.item.getModel().id;\r\n\r\n                if (shapeName === 'expand-text') {\r\n                    if (!this.expandedTableList.includes(nodeId)) {\r\n                        this.expandedTableList.push(nodeId);\r\n                        this.loadRelations();\r\n                    }\r\n                } else if (shapeName === 'collapse-text') {\r\n                    const index = this.expandedTableList.indexOf(nodeId);\r\n                    if (index > -1) {\r\n                        this.expandedTableList.splice(index, 1);\r\n                        this.showAllColumns = false;\r\n                        this.loadRelations();\r\n                    }\r\n                }\r\n            });\r\n\r\n            this.graphInstance.on('node:dblclick', (e) => {\r\n                const t = e.item.getModel().label;\r\n                if (t !== this.activeTable) {\r\n                    this.$emit('open-table', { connId: this.connId, schema: this.currentSchema, tableName: t, initViewMode: 'data' });\r\n                }\r\n            });\r\n        }\r\n    },\r\n    beforeDestroy() { this.destroyGraph(); }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* 保持原有样式，省略以节省空间，与提供的 TableDetail.vue 原始样式一致 */\r\n.table-detail-wrapper {\r\n    height: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    background: #f5f7fa;\r\n}\r\n\r\n.workspace-header {\r\n    background: #fff;\r\n    border-bottom: 1px solid #e4e7ed;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    padding: 0 20px;\r\n    box-shadow: 0 1px 4px rgba(0, 21, 41, .08);\r\n    z-index: 10;\r\n}\r\n\r\n.content-area {\r\n    flex: 1;\r\n    padding: 15px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    overflow: hidden;\r\n}\r\n\r\n.view-container {\r\n    height: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 12px;\r\n    background: #f5f7fa;\r\n}\r\n\r\n.full-height {\r\n    height: 100%;\r\n}\r\n\r\n.filter-card {\r\n    background: #fff;\r\n    padding: 12px;\r\n    border-radius: 4px;\r\n    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.05);\r\n    flex-shrink: 0;\r\n}\r\n\r\n.compact-query-panel {\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n\r\n.query-actions-top-bar {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 8px;\r\n}\r\n\r\n.panel-title {\r\n    font-weight: bold;\r\n    color: #303133;\r\n    font-size: 14px;\r\n}\r\n\r\n.query-conditions-scroll-area {\r\n    max-height: 120px;\r\n    overflow-y: auto;\r\n    padding: 5px;\r\n    background: #fafafa;\r\n    border-radius: 4px;\r\n    border: 1px dashed #dcdfe6;\r\n}\r\n\r\n.query-grid {\r\n    display: grid;\r\n    grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));\r\n    gap: 10px;\r\n}\r\n\r\n.query-item {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n}\r\n\r\n.cond-index {\r\n    color: #909399;\r\n    font-size: 12px;\r\n    width: 15px;\r\n}\r\n\r\n.table-card {\r\n    flex: 1;\r\n    background: #fff;\r\n    border-radius: 4px;\r\n    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.05);\r\n    padding: 12px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    min-height: 0;\r\n}\r\n\r\n.data-toolbar {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 12px;\r\n}\r\n\r\n.data-stats {\r\n    font-size: 13px;\r\n    color: #606266;\r\n    background: #f4f4f5;\r\n    padding: 4px 10px;\r\n    border-radius: 4px;\r\n}\r\n\r\n.table-wrapper {\r\n    flex: 1;\r\n    min-height: 0;\r\n}\r\n\r\n.pagination-bar {\r\n    padding-top: 12px;\r\n    display: flex;\r\n    justify-content: flex-end;\r\n}\r\n\r\n.danger-text {\r\n    color: #F56C6C;\r\n}\r\n\r\n::v-deep .custom-table th>.cell {\r\n    display: flex !important;\r\n    align-items: center;\r\n    justify-content: flex-start;\r\n    line-height: 1.2;\r\n}\r\n\r\n.custom-header {\r\n    display: inline-flex;\r\n    flex-direction: column;\r\n    vertical-align: middle;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    max-width: calc(100% - 24px);\r\n}\r\n\r\n::v-deep .custom-table .caret-wrapper {\r\n    margin-left: 4px;\r\n    flex-shrink: 0;\r\n}\r\n\r\n::v-deep .custom-table th {\r\n    background-color: #eef1f6 !important;\r\n    color: #303133;\r\n    font-weight: 600;\r\n    height: 40px;\r\n    padding: 4px 0;\r\n}\r\n\r\n::v-deep .custom-table td {\r\n    padding: 6px 0;\r\n}\r\n\r\n::v-deep .el-table--striped .el-table__body tr.el-table__row--striped td {\r\n    background: #fafafa;\r\n}\r\n\r\n::v-deep .el-table--border,\r\n.el-table--group {\r\n    border-color: #dcdfe6;\r\n}\r\n\r\n::v-deep .el-table td,\r\n::v-deep .el-table th.is-leaf {\r\n    border-bottom: 1px solid #dcdfe6;\r\n}\r\n\r\n::v-deep .el-table--border td,\r\n::v-deep .el-table--border th {\r\n    border-right: 1px solid #dcdfe6;\r\n}\r\n\r\n.col-name {\r\n    font-size: 13px;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\n.col-comment {\r\n    font-size: 12px;\r\n    color: #909399;\r\n    font-weight: normal;\r\n    transform: scale(0.95);\r\n    transform-origin: left;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\n.inline-input-box {\r\n    width: 100%;\r\n    padding: 0 2px;\r\n}\r\n\r\n::v-deep .inline-input-box .el-input__inner {\r\n    height: 26px;\r\n    line-height: 26px;\r\n    padding: 0 5px;\r\n    border-radius: 0;\r\n    border: 1px solid #409EFF;\r\n}\r\n\r\n.conflict-alert {\r\n    background: #fdf6ec;\r\n    color: #e6a23c;\r\n    padding: 12px 15px;\r\n    border-radius: 4px;\r\n    display: flex;\r\n    align-items: center;\r\n    font-size: 14px;\r\n    border: 1px solid #faecd8;\r\n}\r\n\r\n.relation-view-container {\r\n    height: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    background: #f5f7fa;\r\n    position: relative;\r\n    overflow: hidden;\r\n}\r\n\r\n.relation-toolbar {\r\n    padding: 10px 20px;\r\n    background: #fff;\r\n    border-bottom: 1px solid #eee;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    z-index: 10;\r\n}\r\n\r\n.legend-box {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 15px;\r\n    font-size: 12px;\r\n    color: #666;\r\n}\r\n\r\n.dot {\r\n    width: 8px;\r\n    height: 8px;\r\n    display: inline-block;\r\n    border-radius: 50%;\r\n    margin-right: 5px;\r\n}\r\n\r\n.dot.active {\r\n    background: #409EFF;\r\n}\r\n\r\n.dot.normal {\r\n    background: #DCDFE6;\r\n}\r\n\r\n.canvas-wrapper {\r\n    width: 100%;\r\n    height: 100%;\r\n    background: #f5f7fa;\r\n    overflow: hidden;\r\n    position: relative;\r\n}\r\n\r\n.g6-canvas-box {\r\n    width: 100%;\r\n    height: 100%;\r\n    display: block;\r\n}\r\n\r\n.sql-box {\r\n    padding: 0;\r\n    background: #fff;\r\n    border-radius: 4px;\r\n    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.05);\r\n    display: flex;\r\n    flex-direction: column;\r\n    overflow: hidden;\r\n    height: 300px;\r\n}\r\n\r\n.sql-result {\r\n    flex: 1;\r\n    margin-top: 10px;\r\n    overflow: auto;\r\n    background: #fff;\r\n    padding: 10px;\r\n    border-radius: 4px;\r\n}\r\n\r\n.error-dialog-width {\r\n    max-width: 500px;\r\n}\r\n</style>"]}]}
{"remainingRequest":"D:\\开发\\database-management-system\\dmdb-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\开发\\database-management-system\\dmdb-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\开发\\database-management-system\\dmdb-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\开发\\database-management-system\\dmdb-ui\\src\\components\\TableDetail.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\开发\\database-management-system\\dmdb-ui\\src\\components\\TableDetail.vue","mtime":1770398728692},{"path":"D:\\开发\\database-management-system\\dmdb-ui\\babel.config.js","mtime":1770389611317},{"path":"D:\\开发\\database-management-system\\dmdb-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\开发\\database-management-system\\dmdb-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\开发\\database-management-system\\dmdb-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\开发\\database-management-system\\dmdb-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5ldmVyeS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24ucGFyc2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnNldC5kaWZmZXJlbmNlLnYyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc2V0LmludGVyc2VjdGlvbi52Mi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnNldC5pcy1kaXNqb2ludC1mcm9tLnYyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc2V0LmlzLXN1YnNldC1vZi52Mi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnNldC5pcy1zdXBlcnNldC1vZi52Mi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnNldC5zeW1tZXRyaWMtZGlmZmVyZW5jZS52Mi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnNldC51bmlvbi52Mi5qcyI7CmltcG9ydCByZXF1ZXN0IGZyb20gJ0AvdXRpbHMvcmVxdWVzdCc7CmltcG9ydCBHNiBmcm9tICdAYW50di9nNic7CmltcG9ydCBTcWxFZGl0b3IgZnJvbSAnLi9TcWxFZGl0b3IudnVlJzsKCi8vIEc2IGxvZ2ljIHJlbWFpbnMgc2FtZQpHNi5yZWdpc3Rlck5vZGUoJ2RiLXRhYmxlJywgewogIGRyYXc6IChjZmcsIGdyb3VwKSA9PiB7CiAgICBjb25zdCB7CiAgICAgIGxhYmVsLAogICAgICB0YWJsZUNvbW1lbnQsCiAgICAgIGNvbHVtbnMgPSBbXSwKICAgICAgaXNDZW50ZXIsCiAgICAgIGlzVHJ1bmNhdGVkLAogICAgICB0b3RhbENvbENvdW50CiAgICB9ID0gY2ZnOwogICAgY29uc3Qgd2lkdGggPSAzMDA7CiAgICBjb25zdCBoZWFkZXJIZWlnaHQgPSA1MDsKICAgIGNvbnN0IHJvd0hlaWdodCA9IDI4OwogICAgY29uc3QgY29udGVudEhlaWdodCA9IGNvbHVtbnMubGVuZ3RoICogcm93SGVpZ2h0OwogICAgbGV0IGZvb3RlckhlaWdodCA9IDA7CiAgICBpZiAoaXNUcnVuY2F0ZWQpIGZvb3RlckhlaWdodCA9IDI0O2Vsc2UgaWYgKHRvdGFsQ29sQ291bnQgPiAxMCkgZm9vdGVySGVpZ2h0ID0gMjQ7CiAgICBjb25zdCBoZWlnaHQgPSBoZWFkZXJIZWlnaHQgKyBjb250ZW50SGVpZ2h0ICsgZm9vdGVySGVpZ2h0ICsgODsKICAgIGdyb3VwLmFkZFNoYXBlKCdyZWN0JywgewogICAgICBhdHRyczogewogICAgICAgIHg6IDAsCiAgICAgICAgeTogMCwKICAgICAgICB3aWR0aCwKICAgICAgICBoZWlnaHQsCiAgICAgICAgZmlsbDogJyNmZmYnLAogICAgICAgIHN0cm9rZTogaXNDZW50ZXIgPyAnIzQwOUVGRicgOiAnI0RDREZFNicsCiAgICAgICAgbGluZVdpZHRoOiAxLAogICAgICAgIHJhZGl1czogNAogICAgICB9LAogICAgICBuYW1lOiAnY29udGFpbmVyLXNoYXBlJwogICAgfSk7CiAgICBncm91cC5hZGRTaGFwZSgncmVjdCcsIHsKICAgICAgYXR0cnM6IHsKICAgICAgICB4OiAwLAogICAgICAgIHk6IDAsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0OiBoZWFkZXJIZWlnaHQsCiAgICAgICAgZmlsbDogaXNDZW50ZXIgPyAnIzQwOUVGRicgOiAnI0YyRjZGQycsCiAgICAgICAgcmFkaXVzOiBbNCwgNCwgMCwgMF0KICAgICAgfSwKICAgICAgbmFtZTogJ2hlYWRlci1zaGFwZScKICAgIH0pOwogICAgZ3JvdXAuYWRkU2hhcGUoJ3RleHQnLCB7CiAgICAgIGF0dHJzOiB7CiAgICAgICAgeDogMTAsCiAgICAgICAgeTogMjAsCiAgICAgICAgdGV4dDogbGFiZWwsCiAgICAgICAgZmlsbDogaXNDZW50ZXIgPyAnI2ZmZicgOiAnIzMzMycsCiAgICAgICAgZm9udFNpemU6IDEzLAogICAgICAgIGZvbnRXZWlnaHQ6ICdib2xkJywKICAgICAgICB0ZXh0QmFzZWxpbmU6ICdtaWRkbGUnCiAgICAgIH0sCiAgICAgIG5hbWU6ICd0aXRsZS10ZXh0JwogICAgfSk7CiAgICBpZiAodGFibGVDb21tZW50KSB7CiAgICAgIGdyb3VwLmFkZFNoYXBlKCd0ZXh0JywgewogICAgICAgIGF0dHJzOiB7CiAgICAgICAgICB4OiAxMCwKICAgICAgICAgIHk6IDM4LAogICAgICAgICAgdGV4dDogdGFibGVDb21tZW50LAogICAgICAgICAgZmlsbDogaXNDZW50ZXIgPyAnI2VlZScgOiAnIzkwOTM5OScsCiAgICAgICAgICBmb250U2l6ZTogMTEsCiAgICAgICAgICB0ZXh0QmFzZWxpbmU6ICdtaWRkbGUnCiAgICAgICAgfSwKICAgICAgICBuYW1lOiAnY29tbWVudC10ZXh0JwogICAgICB9KTsKICAgIH0KICAgIGNvbHVtbnMuZm9yRWFjaCgoY29sLCBpKSA9PiB7CiAgICAgIGNvbnN0IHkgPSBoZWFkZXJIZWlnaHQgKyBpICogcm93SGVpZ2h0ICsgcm93SGVpZ2h0IC8gMjsKICAgICAgZ3JvdXAuYWRkU2hhcGUoJ3RleHQnLCB7CiAgICAgICAgYXR0cnM6IHsKICAgICAgICAgIHg6IDI4LAogICAgICAgICAgeTogeSwKICAgICAgICAgIHRleHQ6IGNvbC5DT0xVTU5fTkFNRSwKICAgICAgICAgIGZpbGw6IGNvbC5JU19QSyA/ICcjRTZBMjNDJyA6ICcjMzMzJywKICAgICAgICAgIGZvbnRTaXplOiAxMiwKICAgICAgICAgIHRleHRCYXNlbGluZTogJ21pZGRsZScsCiAgICAgICAgICBmb250V2VpZ2h0OiBjb2wuSVNfUEsgPyAnYm9sZCcgOiAnbm9ybWFsJwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGlmIChjb2wuSVNfUEspIHsKICAgICAgICBncm91cC5hZGRTaGFwZSgnY2lyY2xlJywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgeDogMTQsCiAgICAgICAgICAgIHk6IHksCiAgICAgICAgICAgIHI6IDMsCiAgICAgICAgICAgIGZpbGw6ICcjRTZBMjNDJwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmIChjb2wuQ09NTUVOVFMpIHsKICAgICAgICBsZXQgY29tbWVudCA9IGNvbC5DT01NRU5UUzsKICAgICAgICBpZiAoY29tbWVudC5sZW5ndGggPiAxMCkgY29tbWVudCA9IGNvbW1lbnQuc3Vic3RyaW5nKDAsIDEwKSArICcuLi4nOwogICAgICAgIGdyb3VwLmFkZFNoYXBlKCd0ZXh0JywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgeDogMTYwLAogICAgICAgICAgICB5OiB5LAogICAgICAgICAgICB0ZXh0OiBjb21tZW50LAogICAgICAgICAgICBmaWxsOiAnIzkwOTM5OScsCiAgICAgICAgICAgIGZvbnRTaXplOiAxMSwKICAgICAgICAgICAgdGV4dEJhc2VsaW5lOiAnbWlkZGxlJwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKICAgIGNvbnN0IHkgPSBoZWFkZXJIZWlnaHQgKyBjb250ZW50SGVpZ2h0ICsgMTI7CiAgICBpZiAoaXNUcnVuY2F0ZWQpIHsKICAgICAgZ3JvdXAuYWRkU2hhcGUoJ3RleHQnLCB7CiAgICAgICAgYXR0cnM6IHsKICAgICAgICAgIHg6IHdpZHRoIC8gMiwKICAgICAgICAgIHk6IHksCiAgICAgICAgICB0ZXh0OiBgLi4uICjlhbEgJHt0b3RhbENvbENvdW50fSDliJfvvIzngrnlh7vlsZXlvIApYCwKICAgICAgICAgIGZpbGw6ICcjOTA5Mzk5JywKICAgICAgICAgIGZvbnRTaXplOiAxMSwKICAgICAgICAgIHRleHRBbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICB0ZXh0QmFzZWxpbmU6ICdtaWRkbGUnLAogICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicKICAgICAgICB9LAogICAgICAgIG5hbWU6ICdleHBhbmQtdGV4dCcKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKHRvdGFsQ29sQ291bnQgPiAxMCkgewogICAgICBncm91cC5hZGRTaGFwZSgndGV4dCcsIHsKICAgICAgICBhdHRyczogewogICAgICAgICAgeDogd2lkdGggLyAyLAogICAgICAgICAgeTogeSwKICAgICAgICAgIHRleHQ6ICfirIYg54K55Ye75oqY5Y+gJywKICAgICAgICAgIGZpbGw6ICcjNDA5RUZGJywKICAgICAgICAgIGZvbnRTaXplOiAxMSwKICAgICAgICAgIHRleHRBbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICB0ZXh0QmFzZWxpbmU6ICdtaWRkbGUnLAogICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicKICAgICAgICB9LAogICAgICAgIG5hbWU6ICdjb2xsYXBzZS10ZXh0JwogICAgICB9KTsKICAgIH0KICAgIHJldHVybiBncm91cC5nZXQoJ2NoaWxkcmVuJylbMF07CiAgfQp9KTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdUYWJsZURldGFpbCcsCiAgY29tcG9uZW50czogewogICAgU3FsRWRpdG9yCiAgfSwKICBwcm9wczogWydjb25uSWQnLCAnY29ubk5hbWUnLCAnc2NoZW1hJywgJ3RhYmxlTmFtZScsICdpbml0aWFsRmlsdGVyJywgJ2luaXRWaWV3TW9kZScsICd0YWJsZVR5cGUnXSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY3VycmVudFNjaGVtYTogdGhpcy5zY2hlbWEsCiAgICAgIGFjdGl2ZVRhYmxlOiB0aGlzLnRhYmxlTmFtZSwKICAgICAgdmlld01vZGU6IHRoaXMuaW5pdFZpZXdNb2RlIHx8ICdkYXRhJywKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIHNhdmluZzogZmFsc2UsCiAgICAgIGN1cnJlbnREYXRhTGlzdDogW10sCiAgICAgIHRvdGFsQ291bnQ6IDAsCiAgICAgIGN1cnJlbnRQYWdlOiAxLAogICAgICBwYWdlU2l6ZTogNTAsCiAgICAgIGVkaXRpbmdDZWxsOiBudWxsLAogICAgICBvcmlnaW5hbERhdGFNYXA6IHt9LAogICAgICBtb2RpZmllZFJvd3M6IG5ldyBTZXQoKSwKICAgICAgbmV3Um93czogW10sCiAgICAgIHRhYmxlQ29sdW1uczogW10sCiAgICAgIGNvbmRpdGlvbnM6IFtdLAogICAgICBsb2dpY2FsT3BlcmF0b3I6ICdBTkQnLAogICAgICBjb25mbGljdFZpc2libGU6IGZhbHNlLAogICAgICBjb25mbGljdExpc3Q6IFtdLAogICAgICBjb25mbGljdFBrVmFsdWU6IG51bGwsCiAgICAgIGNvbmZsaWN0VHlwZTogJ2RlbGV0ZScsCiAgICAgIGN1c3RvbVNxbDogJycsCiAgICAgIHNxbFJlc3VsdDogW10sCiAgICAgIGRkbFZpc2libGU6IGZhbHNlLAogICAgICBjdXJyZW50RERMOiAnJywKICAgICAgZWRpdFZpZXdWaXNpYmxlOiBmYWxzZSwKICAgICAgdmlld1NxbDogJycsCiAgICAgIGlzU2ltcGxlVmlldzogdHJ1ZSwKICAgICAgLy8g5qCH6K6w5piv5ZCm5LuO5Yay56qB6Lez6L2sCiAgICAgIGp1bXBGcm9tQ29uZmxpY3Q6IGZhbHNlLAogICAgICAvLyDjgJDmlrDlop7jgJHpgInkuK3nmoTooYwKICAgICAgc2VsZWN0ZWRSb3dzOiBbXSwKICAgICAgZGVzaWduVmlzaWJsZTogZmFsc2UsCiAgICAgIGRlc2lnbkFjdGl2ZVRhYjogJ2NvbHVtbnMnLAogICAgICBkZXNpZ25Db2x1bW5zOiBbXSwKICAgICAgb3JpZ2luYWxDb2x1bW5zOiBbXSwKICAgICAgZGVsZXRlQ29sdW1uTGlzdDogW10sCiAgICAgIGRlc2lnbkluZGV4ZXM6IFtdLAogICAgICBkZWxldGVJbmRleExpc3Q6IFtdLAogICAgICBkZXNpZ25Gb3JlaWduS2V5czogW10sCiAgICAgIGRlbGV0ZUZrTGlzdDogW10sCiAgICAgIGFsbFRhYmxlTmFtZXM6IFtdLAogICAgICByZWZDb2x1bW5zQ2FjaGU6IHt9LAogICAgICBzaG93QWxsQ29sdW1uczogZmFsc2UsCiAgICAgIGV4cGFuZGVkVGFibGVMaXN0OiBbXSwKICAgICAgZ3JhcGhOb2RlSWRzOiBbXSwKICAgICAgc3FsQ29uZmlybVZpc2libGU6IGZhbHNlLAogICAgICBnZW5lcmF0ZWRTcWw6ICcnLAogICAgICBhbHRlcmluZzogZmFsc2UKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgcmF3S2V5cygpIHsKICAgICAgcmV0dXJuIHRoaXMuY3VycmVudERhdGFMaXN0Lmxlbmd0aCA/IE9iamVjdC5rZXlzKHRoaXMuY3VycmVudERhdGFMaXN0WzBdKS5maWx0ZXIoayA9PiBrICE9PSAnREJfSU5URVJOQUxfSUQnKSA6IFtdOwogICAgfSwKICAgIGhhc0NoYW5nZXMoKSB7CiAgICAgIHJldHVybiB0aGlzLm1vZGlmaWVkUm93cy5zaXplID4gMCB8fCB0aGlzLm5ld1Jvd3MubGVuZ3RoID4gMDsKICAgIH0sCiAgICBpc1JlYWRPbmx5KCkgewogICAgICBpZiAodGhpcy50YWJsZVR5cGUgPT09ICd0YWJsZScpIHJldHVybiBmYWxzZTsKICAgICAgaWYgKHRoaXMudGFibGVUeXBlID09PSAndmlldycpIHJldHVybiAhdGhpcy5pc1NpbXBsZVZpZXc7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICAgIGlzUGFyZW50TWlzc2luZygpIHsKICAgICAgcmV0dXJuIHRoaXMuY29uZmxpY3RMaXN0Lmxlbmd0aCA+IDAgJiYgdGhpcy5jb25mbGljdExpc3RbMF0uQ05UID09PSAnTUlTU0lORyc7CiAgICB9LAogICAgY29uZmxpY3RUaXRsZSgpIHsKICAgICAgaWYgKHRoaXMuaXNQYXJlbnRNaXNzaW5nKSByZXR1cm4gJ+KaoO+4jyDkv53lrZjlpLHotKXvvJrnm67moIfkuLvplK7nvLrlpLEnOwogICAgICByZXR1cm4gdGhpcy5jb25mbGljdFR5cGUgPT09ICdkZWxldGUnID8gJ+KaoO+4jyDml6Dms5XliKDpmaTvvJrlrZjlnKjlhbPogZTlvJXnlKgnIDogJ+KaoO+4jyDml6Dms5Xkv67mlLnvvJrlrZjlnKjlhbPogZTlvJXnlKgnOwogICAgfSwKICAgIGNvbmZsaWN0TWVzc2FnZSgpIHsKICAgICAgaWYgKHRoaXMuaXNQYXJlbnRNaXNzaW5nKSByZXR1cm4gJ+aCqOi+k+WFpeeahCDlpJbplK7lgLwg5Zyo55uu5qCH5Li76KGo5Lit5LiN5a2Y5Zyo44CC6K+35YWI5Zyo5Li76KGo5Lit5Yib5bu66K+l5pWw5o2u77yM5oiW5L+u5pS55Li65bey5a2Y5Zyo55qE5YC844CCJzsKICAgICAgcmV0dXJuIGDor6XorrDlvZXooqvku6XkuIsgJHt0aGlzLmNvbmZsaWN0TGlzdC5sZW5ndGh9IOW8oOihqOW8leeUqO+8jOivt+WFiOWkhOeQhui/meS6m+WFs+iBlOaVsOaNruOAgmA7CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5pbml0VmlldygpOwogIH0sCiAgd2F0Y2g6IHsKICAgIGluaXRpYWxGaWx0ZXI6IHsKICAgICAgaW1tZWRpYXRlOiB0cnVlLAogICAgICBkZWVwOiB0cnVlLAogICAgICBoYW5kbGVyKHZhbCkgewogICAgICAgIGlmICh2YWwgJiYgdmFsLmZpZWxkICYmIHZhbC52YWx1ZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBpZiAodGhpcy52aWV3TW9kZSAhPT0gJ2RhdGEnKSB0aGlzLmhhbmRsZVZpZXdNb2RlU3dpdGNoKCdkYXRhJyk7CiAgICAgICAgICAvLyDmoIforrDku47lpJbpg6jot7PovawKICAgICAgICAgIHRoaXMuanVtcEZyb21Db25mbGljdCA9IHRydWU7CiAgICAgICAgICB0aGlzLmFwcGx5QXV0b0ZpbHRlcih2YWwpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHRhYmxlTmFtZTogewogICAgICBpbW1lZGlhdGU6IHRydWUsCiAgICAgIGhhbmRsZXIodmFsKSB7CiAgICAgICAgaWYgKHZhbCkgewogICAgICAgICAgdGhpcy5hY3RpdmVUYWJsZSA9IHZhbDsKICAgICAgICAgIHRoaXMuY3VycmVudFNjaGVtYSA9IHRoaXMuc2NoZW1hOwogICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IDE7CiAgICAgICAgICB0aGlzLmV4cGFuZGVkVGFibGVMaXN0ID0gW107CiAgICAgICAgICB0aGlzLnNob3dBbGxDb2x1bW5zID0gZmFsc2U7CiAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93cyA9IFtdOyAvLyDmuIXnqbrpgInkuK0KCiAgICAgICAgICAvLyDlpoLmnpzmnInot7PovazmnaHku7bvvIzot7Pov4fmma7pgJrliqDovb0KICAgICAgICAgIGlmICh0aGlzLmluaXRpYWxGaWx0ZXIgJiYgdGhpcy5pbml0aWFsRmlsdGVyLmZpZWxkKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMubG9hZERhdGEoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBpbml0Vmlld01vZGUodmFsKSB7CiAgICAgIGlmICh2YWwgJiYgdmFsICE9PSB0aGlzLnZpZXdNb2RlKSB0aGlzLmhhbmRsZVZpZXdNb2RlU3dpdGNoKHZhbCk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyByZXF1ZXN0KG1ldGhvZCwgdXJsLCBkYXRhT3JQYXJhbXMgPSB7fSkgewogICAgICBjb25zdCBjb25maWcgPSB7CiAgICAgICAgbWV0aG9kLAogICAgICAgIHVybCwKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAnQ29ubi1JZCc6IHRoaXMuY29ubklkCiAgICAgICAgfQogICAgICB9OwogICAgICBpZiAoIXVybC5zdGFydHNXaXRoKCcvZGInKSkgdXJsID0gJy9kYicgKyB1cmw7CiAgICAgIGNvbmZpZy51cmwgPSB1cmw7CiAgICAgIGlmIChtZXRob2QgPT09ICdnZXQnIHx8IG1ldGhvZCA9PT0gJ2RlbGV0ZScpIGNvbmZpZy5wYXJhbXMgPSBkYXRhT3JQYXJhbXM7ZWxzZSBjb25maWcuZGF0YSA9IGRhdGFPclBhcmFtczsKICAgICAgcmV0dXJuIHJlcXVlc3QoY29uZmlnKTsKICAgIH0sCiAgICBoYW5kbGVFcnJvcihlLCB0aXRsZSA9ICfmk43kvZzlpLHotKUnKSB7CiAgICAgIHZhciBfZSRyZXNwb25zZSwgX2UkcmVzcG9uc2UyOwogICAgICBsZXQgcmF3TXNnID0gKChfZSRyZXNwb25zZSA9IGUucmVzcG9uc2UpID09PSBudWxsIHx8IF9lJHJlc3BvbnNlID09PSB2b2lkIDAgfHwgKF9lJHJlc3BvbnNlID0gX2UkcmVzcG9uc2UuZGF0YSkgPT09IG51bGwgfHwgX2UkcmVzcG9uc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lJHJlc3BvbnNlLm1zZykgfHwgKChfZSRyZXNwb25zZTIgPSBlLnJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfZSRyZXNwb25zZTIgPT09IHZvaWQgMCB8fCAoX2UkcmVzcG9uc2UyID0gX2UkcmVzcG9uc2UyLmRhdGEpID09PSBudWxsIHx8IF9lJHJlc3BvbnNlMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2UkcmVzcG9uc2UyLm1lc3NhZ2UpIHx8IGUubWVzc2FnZSB8fCAn5pyq55+l6ZSZ6K+vJzsKICAgICAgaWYgKHJhd01zZy5pbmNsdWRlcygnbmVzdGVkIGV4Y2VwdGlvbiBpcycpKSByYXdNc2cgPSByYXdNc2cuc3BsaXQoJ25lc3RlZCBleGNlcHRpb24gaXMnKS5wb3AoKTsKICAgICAgcmF3TXNnID0gcmF3TXNnLnJlcGxhY2UoL1tcd1wuXSpFeGNlcHRpb246XHMqL2csICcnKS50cmltKCk7CiAgICAgIGlmIChyYXdNc2cubGVuZ3RoID4gMzAwKSByYXdNc2cgPSByYXdNc2cuc3Vic3RyaW5nKDAsIDMwMCkgKyAnLi4uJzsKICAgICAgdGhpcy4kYWxlcnQoYDxkaXYgc3R5bGU9ImZvbnQtc2l6ZTogMTRweDsgbGluZS1oZWlnaHQ6IDEuNTsgY29sb3I6ICM2MDYyNjY7Ij48cCBzdHlsZT0iZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjRjU2QzZDOyI+4p2MICR7dGl0bGV977yaPC9wPjxwIHN0eWxlPSJiYWNrZ3JvdW5kOiAjZmVmMGYwOyBwYWRkaW5nOiA4cHg7IGJvcmRlci1yYWRpdXM6IDRweDsgbWFyZ2luOiA1cHggMDsgd29yZC1icmVhazogYnJlYWstYWxsOyI+JHtyYXdNc2d9PC9wPjwvZGl2PmAsIHRpdGxlLCB7CiAgICAgICAgZGFuZ2Vyb3VzbHlVc2VIVE1MU3RyaW5nOiB0cnVlLAogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn55+l6YGT5LqGJywKICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgIGN1c3RvbUNsYXNzOiAnZXJyb3ItZGlhbG9nLXdpZHRoJwogICAgICB9KTsKICAgIH0sCiAgICBpbml0VmlldygpIHsKICAgICAgdGhpcy5kZXN0cm95R3JhcGgoKTsKICAgICAgaWYgKHRoaXMudmlld01vZGUgPT09ICdyZWxhdGlvbicpIHRoaXMubG9hZFJlbGF0aW9ucygpO2Vsc2UgaWYgKHRoaXMudmlld01vZGUgPT09ICdkYXRhJykgewogICAgICAgIGlmICghdGhpcy5pbml0aWFsRmlsdGVyIHx8ICF0aGlzLmluaXRpYWxGaWx0ZXIuZmllbGQpIHRoaXMubG9hZERhdGEoKTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZVZpZXdNb2RlU3dpdGNoKHZhbCkgewogICAgICBpZiAodGhpcy5oYXNDaGFuZ2VzKSB7CiAgICAgICAgdGhpcy4kY29uZmlybSgn5b2T5YmN5pyJ5pyq5L+d5a2Y55qE5L+u5pS577yM5YiH5o2i6KeG5Zu+5bCG5Lii5aSx6L+Z5Lqb5L+u5pS577yM5piv5ZCm57un57ut77yfJywgJ+aPkOekuicsIHsKICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy5yZXNldEVkaXRTdGF0ZSgpOwogICAgICAgICAgdGhpcy5fZG9Td2l0Y2godmFsKTsKICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICB0aGlzLnZpZXdNb2RlID0gJ2RhdGEnOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuX2RvU3dpdGNoKHZhbCk7CiAgICAgIH0KICAgIH0sCiAgICBfZG9Td2l0Y2godmFsKSB7CiAgICAgIGNvbnN0IG1vZGUgPSB0eXBlb2YgdmFsID09PSAnc3RyaW5nJyA/IHZhbCA6IHRoaXMudmlld01vZGU7CiAgICAgIHRoaXMudmlld01vZGUgPSBtb2RlOwogICAgICB0aGlzLiRlbWl0KCd2aWV3LW1vZGUtY2hhbmdlJywgbW9kZSk7CiAgICAgIGlmIChtb2RlID09PSAncmVsYXRpb24nKSB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy5sb2FkUmVsYXRpb25zKCk7CiAgICAgIH0pO2Vsc2UgewogICAgICAgIHRoaXMuZGVzdHJveUdyYXBoKCk7CiAgICAgICAgaWYgKG1vZGUgPT09ICdkYXRhJykgdGhpcy5sb2FkRGF0YSgpOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgbG9hZERhdGEoKSB7CiAgICAgIHRoaXMucmVzZXRFZGl0U3RhdGUoKTsKICAgICAgdGhpcy5zZWxlY3RlZFJvd3MgPSBbXTsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBjb2xSZXMgPSBhd2FpdCB0aGlzLnJlcXVlc3QoJ2dldCcsICcvY29sdW1ucycsIHsKICAgICAgICAgIHNjaGVtYTogdGhpcy5jdXJyZW50U2NoZW1hLAogICAgICAgICAgdGFibGVOYW1lOiB0aGlzLmFjdGl2ZVRhYmxlCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy50YWJsZUNvbHVtbnMgPSBjb2xSZXMuZGF0YS5kYXRhIHx8IFtdOwogICAgICAgIGxldCBsaXN0ID0gW107CiAgICAgICAgbGV0IHRvdGFsID0gMDsKICAgICAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgICAgICBzY2hlbWE6IHRoaXMuY3VycmVudFNjaGVtYSwKICAgICAgICAgIHRhYmxlTmFtZTogdGhpcy5hY3RpdmVUYWJsZSwKICAgICAgICAgIHBhZ2U6IHRoaXMuY3VycmVudFBhZ2UsCiAgICAgICAgICBzaXplOiB0aGlzLnBhZ2VTaXplCiAgICAgICAgfTsKICAgICAgICBpZiAodGhpcy5jb25kaXRpb25zLmxlbmd0aCA+IDApIHsKICAgICAgICAgIGNvbnN0IGZpbHRlclJlcyA9IGF3YWl0IHRoaXMucmVxdWVzdCgncG9zdCcsICcvZmlsdGVyJywgewogICAgICAgICAgICAuLi5wYXJhbXMsCiAgICAgICAgICAgIGxvZ2ljOiB0aGlzLmxvZ2ljYWxPcGVyYXRvciwKICAgICAgICAgICAgY29uZGl0aW9uczogdGhpcy5jb25kaXRpb25zCiAgICAgICAgICB9KTsKICAgICAgICAgIGxpc3QgPSBmaWx0ZXJSZXMuZGF0YS5kYXRhLmxpc3QgfHwgW107CiAgICAgICAgICB0b3RhbCA9IGZpbHRlclJlcy5kYXRhLmRhdGEudG90YWwgfHwgMDsKICAgICAgICAgIGlmIChmaWx0ZXJSZXMuZGF0YS5kYXRhLmlzVmlldykgewogICAgICAgICAgICB0aGlzLmlzU2ltcGxlVmlldyA9IGZpbHRlclJlcy5kYXRhLmRhdGEuaXNTaW1wbGVWaWV3OwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCBkYXRhUmVzID0gYXdhaXQgdGhpcy5yZXF1ZXN0KCdnZXQnLCAnL2RhdGEnLCBwYXJhbXMpOwogICAgICAgICAgbGlzdCA9IGRhdGFSZXMuZGF0YS5kYXRhLmxpc3QgfHwgW107CiAgICAgICAgICB0b3RhbCA9IGRhdGFSZXMuZGF0YS5kYXRhLnRvdGFsIHx8IDA7CiAgICAgICAgICBpZiAoZGF0YVJlcy5kYXRhLmRhdGEuaXNWaWV3KSB7CiAgICAgICAgICAgIHRoaXMuaXNTaW1wbGVWaWV3ID0gZGF0YVJlcy5kYXRhLmRhdGEuaXNTaW1wbGVWaWV3OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0aGlzLmN1cnJlbnREYXRhTGlzdCA9IGxpc3Q7CiAgICAgICAgdGhpcy50b3RhbENvdW50ID0gdG90YWw7CiAgICAgICAgdGhpcy5vcmlnaW5hbERhdGFNYXAgPSB7fTsKICAgICAgICBsaXN0LmZvckVhY2gocm93ID0+IHsKICAgICAgICAgIGlmIChyb3cuREJfSU5URVJOQUxfSUQpIHRoaXMub3JpZ2luYWxEYXRhTWFwW3Jvdy5EQl9JTlRFUk5BTF9JRF0gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJvdykpOwogICAgICAgIH0pOwoKICAgICAgICAvLyDjgJDmoLjlv4PkvJjljJbjgJHku47lhrLnqoHot7PovazmnaXkuJTml6DmlbDmja4gLT4g5om56YeP6Ieq5Yqo5o+S5YWlCiAgICAgICAgaWYgKHRoaXMuanVtcEZyb21Db25mbGljdCAmJiB0aGlzLnRvdGFsQ291bnQgPT09IDApIHsKICAgICAgICAgIHRoaXMuanVtcEZyb21Db25mbGljdCA9IGZhbHNlOwogICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgICAvLyDpgY3ljobmiYDmnInov4fmu6TmnaHku7bvvIzlpoLmnpzlrZjlnKjlpJrkuKogT1Ig5p2h5Lu277yM55Sf5oiQ5aSa6KGMCiAgICAgICAgICAgIGlmICh0aGlzLmNvbmRpdGlvbnMubGVuZ3RoID4gMCAmJiB0aGlzLmxvZ2ljYWxPcGVyYXRvciA9PT0gJ09SJykgewogICAgICAgICAgICAgIGxldCBhZGRlZENvdW50ID0gMDsKICAgICAgICAgICAgICB0aGlzLmNvbmRpdGlvbnMuZm9yRWFjaChjb25kID0+IHsKICAgICAgICAgICAgICAgIGlmIChjb25kLm9wZXJhdG9yID09PSAnPScgJiYgY29uZC52YWx1ZSkgewogICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUFkZFJvdyhjb25kLnZhbHVlLCBjb25kLmZpZWxkKTsKICAgICAgICAgICAgICAgICAgYWRkZWRDb3VudCsrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGlmIChhZGRlZENvdW50ID4gMCkgewogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGDlt7LkuLrmgqjmibnph4/liJvlu7ogJHthZGRlZENvdW50fSDmnaHmlrDooYzlubbloavlhaXnvLrlpLHnmoTkuLvplK7vvIzor7fooaXlhYXlhbbku5bkv6Hmga/jgIJgLAogICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA2MDAwLAogICAgICAgICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyDljZXmnaHku7bmg4XlhrUKICAgICAgICAgICAgICB0aGlzLmhhbmRsZUFkZFJvdygpOwogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgbWVzc2FnZTogJ+acquaJvuWIsOaMh+WumuS4u+mUruiusOW9le+8jOW3suiHquWKqOS4uuaCqOWIm+W7uuaWsOihjOW5tuWhq+WFpeS4u+mUru+8jOivt+ihpeWFheWFtuS7luS/oeaBr+OAgicsCiAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICBkdXJhdGlvbjogNTAwMCwKICAgICAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMudG90YWxDb3VudCA+IDApIHsKICAgICAgICAgIHRoaXMuanVtcEZyb21Db25mbGljdCA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZSwgJ+aVsOaNruWKoOi9veWksei0pScpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgaGFuZGxlRWRpdFZpZXcoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5yZXF1ZXN0KCdnZXQnLCAnL2RkbCcsIHsKICAgICAgICAgIHNjaGVtYTogdGhpcy5jdXJyZW50U2NoZW1hLAogICAgICAgICAgdGFibGVOYW1lOiB0aGlzLmFjdGl2ZVRhYmxlCiAgICAgICAgfSk7CiAgICAgICAgbGV0IHJhd0RETCA9IHJlcy5kYXRhLmRhdGEgfHwgJyc7CiAgICAgICAgdGhpcy52aWV3U3FsID0gcmF3RERMLnJlcGxhY2UoLyZxdW90Oy9nLCAnIicpLnJlcGxhY2UoLyZhcG9zOy9nLCAiJyIpLnJlcGxhY2UoLyZsdDsvZywgJzwnKS5yZXBsYWNlKC8mZ3Q7L2csICc+JykucmVwbGFjZSgvJmFtcDsvZywgJyYnKTsKICAgICAgICB0aGlzLmVkaXRWaWV3VmlzaWJsZSA9IHRydWU7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGUsICfojrflj5bop4blm77lrprkuYnlpLHotKUnKTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIHN1Ym1pdFZpZXdBbHRlcigpIHsKICAgICAgdGhpcy5hbHRlcmluZyA9IHRydWU7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5yZXF1ZXN0KCdwb3N0JywgJy9leGVjdXRlJywgewogICAgICAgICAgc3FsOiB0aGlzLnZpZXdTcWwKICAgICAgICB9KTsKICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+inhuWbvuS/ruaUueaIkOWKnycpOwogICAgICAgICAgdGhpcy5lZGl0Vmlld1Zpc2libGUgPSBmYWxzZTsKICAgICAgICAgIHRoaXMubG9hZERhdGEoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlcy5kYXRhLm1zZyk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlLCAn5L+u5pS56KeG5Zu+5aSx6LSlJyk7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdGhpcy5hbHRlcmluZyA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgcmVzZXRFZGl0U3RhdGUoKSB7CiAgICAgIHRoaXMuZWRpdGluZ0NlbGwgPSBudWxsOwogICAgICB0aGlzLm1vZGlmaWVkUm93cyA9IG5ldyBTZXQoKTsKICAgICAgdGhpcy5uZXdSb3dzID0gW107CiAgICB9LAogICAgaGFuZGxlRGlzY2FyZENoYW5nZXMoKSB7CiAgICAgIHRoaXMucmVzZXRFZGl0U3RhdGUoKTsKICAgICAgdGhpcy5sb2FkRGF0YSgpOwogICAgfSwKICAgIGhhbmRsZUNlbGxEYmxDbGljayhyb3csIGNvbHVtbikgewogICAgICBpZiAodGhpcy5pc1JlYWRPbmx5KSByZXR1cm47CiAgICAgIHRoaXMuZWRpdGluZ0NlbGwgPSB7CiAgICAgICAgcm93SWQ6IHJvdy5EQl9JTlRFUk5BTF9JRCB8fCByb3cuX3RlbXBJZCwKICAgICAgICBjb2w6IGNvbHVtbi5wcm9wZXJ0eQogICAgICB9OwogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgY29uc3QgaW5wdXRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2lucHV0Jyk7CiAgICAgICAgaWYgKGlucHV0cyAmJiBpbnB1dHMubGVuZ3RoID4gMCkgaW5wdXRzW2lucHV0cy5sZW5ndGggLSAxXS5mb2N1cygpOwogICAgICB9KTsKICAgIH0sCiAgICBpc0NlbGxFZGl0aW5nKHJvdywgY29sTmFtZSkgewogICAgICBpZiAoIXRoaXMuZWRpdGluZ0NlbGwpIHJldHVybiBmYWxzZTsKICAgICAgY29uc3QgaWQgPSByb3cuREJfSU5URVJOQUxfSUQgfHwgcm93Ll90ZW1wSWQ7CiAgICAgIHJldHVybiB0aGlzLmVkaXRpbmdDZWxsLnJvd0lkID09PSBpZCAmJiB0aGlzLmVkaXRpbmdDZWxsLmNvbCA9PT0gY29sTmFtZTsKICAgIH0sCiAgICBmaW5pc2hFZGl0aW5nKHJvdywgY29sTmFtZSkgewogICAgICB0aGlzLmVkaXRpbmdDZWxsID0gbnVsbDsKICAgICAgY29uc3QgaWQgPSByb3cuREJfSU5URVJOQUxfSUQ7CiAgICAgIGlmICghaWQpIHJldHVybjsKICAgICAgY29uc3Qgb3JpZ2luYWxSb3cgPSB0aGlzLm9yaWdpbmFsRGF0YU1hcFtpZF07CiAgICAgIGxldCBuZXdWYWwgPSByb3dbY29sTmFtZV07CiAgICAgIGxldCBvbGRWYWwgPSBvcmlnaW5hbFJvdyA/IG9yaWdpbmFsUm93W2NvbE5hbWVdIDogJyc7CiAgICAgIGlmIChuZXdWYWwgPT0gbnVsbCkgbmV3VmFsID0gJyc7CiAgICAgIGlmIChvbGRWYWwgPT0gbnVsbCkgb2xkVmFsID0gJyc7CiAgICAgIGlmIChTdHJpbmcobmV3VmFsKSAhPT0gU3RyaW5nKG9sZFZhbCkpIHsKICAgICAgICB0aGlzLm1vZGlmaWVkUm93cy5hZGQoaWQpOwogICAgICAgIHRoaXMubW9kaWZpZWRSb3dzID0gbmV3IFNldCh0aGlzLm1vZGlmaWVkUm93cyk7CiAgICAgIH0KICAgIH0sCiAgICBnZXRDZWxsU3R5bGUoewogICAgICByb3csCiAgICAgIGNvbHVtbgogICAgfSkgewogICAgICBjb25zdCBpZCA9IHJvdy5EQl9JTlRFUk5BTF9JRDsKICAgICAgY29uc3QgY29sID0gY29sdW1uLnByb3BlcnR5OwogICAgICBpZiAoIWlkICYmIHJvdy5fdGVtcElkKSByZXR1cm4gewogICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNmMGY5ZWInCiAgICAgIH07CiAgICAgIGlmICh0aGlzLm1vZGlmaWVkUm93cy5oYXMoaWQpKSB7CiAgICAgICAgY29uc3Qgb3JpZ2luYWwgPSB0aGlzLm9yaWdpbmFsRGF0YU1hcFtpZF07CiAgICAgICAgbGV0IG5ld1ZhbCA9IHJvd1tjb2xdOwogICAgICAgIGxldCBvbGRWYWwgPSBvcmlnaW5hbCA/IG9yaWdpbmFsW2NvbF0gOiAnJzsKICAgICAgICBpZiAobmV3VmFsID09IG51bGwpIG5ld1ZhbCA9ICcnOwogICAgICAgIGlmIChvbGRWYWwgPT0gbnVsbCkgb2xkVmFsID0gJyc7CiAgICAgICAgaWYgKFN0cmluZyhuZXdWYWwpICE9PSBTdHJpbmcob2xkVmFsKSkgcmV0dXJuIHsKICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNmZGY2ZWMnLAogICAgICAgICAgY29sb3I6ICcjRTZBMjNDJywKICAgICAgICAgIGZvbnRXZWlnaHQ6ICdib2xkJwogICAgICAgIH07CiAgICAgIH0KICAgICAgcmV0dXJuIHt9OwogICAgfSwKICAgIC8vIOOAkOaguOW/g+S/ruaUueOAkeaUr+aMgeWPguaVsOWMluWhq+WFhQogICAgaGFuZGxlQWRkUm93KHByZWZpbGxWYWx1ZSA9IG51bGwsIHByZWZpbGxGaWVsZCA9IG51bGwpIHsKICAgICAgY29uc3QgbmV3Um93ID0gewogICAgICAgIF90ZW1wSWQ6ICdORVdfJyArIERhdGUubm93KCkgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgNSkKICAgICAgfTsKICAgICAgdGhpcy50YWJsZUNvbHVtbnMuZm9yRWFjaChjID0+IG5ld1Jvd1tjLkNPTFVNTl9OQU1FXSA9IG51bGwpOwoKICAgICAgLy8g5LyY5YWI5L2/55So5Lyg5YWl55qE5aGr5YWF5YC8CiAgICAgIGlmIChwcmVmaWxsVmFsdWUgIT09IG51bGwgJiYgcHJlZmlsbEZpZWxkKSB7CiAgICAgICAgbmV3Um93W3ByZWZpbGxGaWVsZF0gPSBwcmVmaWxsVmFsdWU7CiAgICAgIH0KICAgICAgLy8g5ZCm5YiZ5L2/55So5b2T5YmN55qE562b6YCJ5p2h5Lu2ICjljZXmnaHku7YpCiAgICAgIGVsc2UgaWYgKHRoaXMuY29uZGl0aW9ucy5sZW5ndGggPT09IDEgJiYgdGhpcy5jb25kaXRpb25zWzBdLm9wZXJhdG9yID09PSAnPScpIHsKICAgICAgICBjb25zdCBmaWVsZE5hbWUgPSB0aGlzLmNvbmRpdGlvbnNbMF0uZmllbGQ7CiAgICAgICAgY29uc3QgdmFsID0gdGhpcy5jb25kaXRpb25zWzBdLnZhbHVlOwogICAgICAgIGNvbnN0IG1hdGNoS2V5ID0gT2JqZWN0LmtleXMobmV3Um93KS5maW5kKGsgPT4gay50b1VwcGVyQ2FzZSgpID09PSBmaWVsZE5hbWUudG9VcHBlckNhc2UoKSk7CiAgICAgICAgaWYgKG1hdGNoS2V5ICYmIHZhbCAhPT0gdW5kZWZpbmVkICYmIHZhbCAhPT0gbnVsbCkgewogICAgICAgICAgbmV3Um93W21hdGNoS2V5XSA9IHZhbDsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5jdXJyZW50RGF0YUxpc3QudW5zaGlmdChuZXdSb3cpOwogICAgICB0aGlzLm5ld1Jvd3MucHVzaChuZXdSb3cpOwogICAgfSwKICAgIGdldFBrQ29sdW1uTmFtZSgpIHsKICAgICAgY29uc3QgcGtDb2wgPSB0aGlzLnRhYmxlQ29sdW1ucy5maW5kKGMgPT4gWycxJywgMSwgJ1knLCB0cnVlXS5pbmNsdWRlcyhjLklTX1BLKSk7CiAgICAgIGlmIChwa0NvbCkgcmV0dXJuIHBrQ29sLkNPTFVNTl9OQU1FOwogICAgICBjb25zdCBpZENvbCA9IHRoaXMudGFibGVDb2x1bW5zLmZpbmQoYyA9PiBjLkNPTFVNTl9OQU1FLnRvVXBwZXJDYXNlKCkgPT09ICdJRCcpOwogICAgICBpZiAoaWRDb2wpIHJldHVybiBpZENvbC5DT0xVTU5fTkFNRTsKICAgICAgaWYgKHRoaXMudGFibGVDb2x1bW5zLmxlbmd0aCA+IDApIHJldHVybiB0aGlzLnRhYmxlQ29sdW1uc1swXS5DT0xVTU5fTkFNRTsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9LAogICAgZ2V0Q2xlYW5Sb3dEYXRhKHJvdykgewogICAgICBjb25zdCBjbGVhbkRhdGEgPSB7fTsKICAgICAgdGhpcy50YWJsZUNvbHVtbnMuZm9yRWFjaChjb2wgPT4gewogICAgICAgIGNsZWFuRGF0YVtjb2wuQ09MVU1OX05BTUVdID0gcm93W2NvbC5DT0xVTU5fTkFNRV07CiAgICAgIH0pOwogICAgICBpZiAocm93LkRCX0lOVEVSTkFMX0lEKSBjbGVhbkRhdGEuREJfSU5URVJOQUxfSUQgPSByb3cuREJfSU5URVJOQUxfSUQ7CiAgICAgIHJldHVybiBjbGVhbkRhdGE7CiAgICB9LAogICAgYXN5bmMgc3VibWl0QmF0Y2hDaGFuZ2VzKCkgewogICAgICBpZiAodGhpcy5zYXZpbmcpIHJldHVybjsKICAgICAgdGhpcy5zYXZpbmcgPSB0cnVlOwogICAgICBjb25zdCBpbnNlcnRMaXN0ID0gdGhpcy5uZXdSb3dzLm1hcChyb3cgPT4gewogICAgICAgIGNvbnN0IGNsZWFuID0gdGhpcy5nZXRDbGVhblJvd0RhdGEocm93KTsKICAgICAgICBkZWxldGUgY2xlYW4uREJfSU5URVJOQUxfSUQ7CiAgICAgICAgcmV0dXJuIGNsZWFuOwogICAgICB9KTsKICAgICAgY29uc3QgdXBkYXRlTGlzdCA9IEFycmF5LmZyb20odGhpcy5tb2RpZmllZFJvd3MpLm1hcChpZCA9PiB7CiAgICAgICAgY29uc3Qgcm93ID0gdGhpcy5jdXJyZW50RGF0YUxpc3QuZmluZChyID0+IHIuREJfSU5URVJOQUxfSUQgPT09IGlkKTsKICAgICAgICByZXR1cm4gcm93ID8gdGhpcy5nZXRDbGVhblJvd0RhdGEocm93KSA6IG51bGw7CiAgICAgIH0pLmZpbHRlcihyID0+IHIgIT09IG51bGwpOwogICAgICBpZiAoaW5zZXJ0TGlzdC5sZW5ndGggPT09IDAgJiYgdXBkYXRlTGlzdC5sZW5ndGggPT09IDApIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmluZm8oIuayoeacieajgOa1i+WIsOacieaViOWPmOabtCIpOwogICAgICAgIHRoaXMuc2F2aW5nID0gZmFsc2U7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnN0IGxvYWRpbmdJbnN0YW5jZSA9IHRoaXMuJGxvYWRpbmcoewogICAgICAgIGxvY2s6IHRydWUsCiAgICAgICAgdGV4dDogJ+ato+WcqOaJuemHj+S/neWtmOS4rS4uLicsCiAgICAgICAgYmFja2dyb3VuZDogJ3JnYmEoMCwgMCwgMCwgMC43KScKICAgICAgfSk7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5yZXF1ZXN0KCdwb3N0JywgYC9zYXZlL2JhdGNoP3NjaGVtYT0ke3RoaXMuY3VycmVudFNjaGVtYX0mdGFibGVOYW1lPSR7dGhpcy5hY3RpdmVUYWJsZX1gLCB7CiAgICAgICAgICBpbnNlcnRMaXN0LAogICAgICAgICAgdXBkYXRlTGlzdAogICAgICAgIH0pOwogICAgICAgIGxvYWRpbmdJbnN0YW5jZS5jbG9zZSgpOwogICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAyMDApIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5om56YeP5L+d5a2Y5oiQ5Yqf77yBJyk7CiAgICAgICAgICB0aGlzLmxvYWREYXRhKCk7CiAgICAgICAgfSBlbHNlIGlmIChyZXMuZGF0YS5jb2RlID09PSA1MDMpIHsKICAgICAgICAgIHRoaXMuY29uZmxpY3RMaXN0ID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICAgIHRoaXMuY29uZmxpY3RUeXBlID0gJ3NhdmUnOwogICAgICAgICAgdGhpcy5jb25mbGljdFZpc2libGUgPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzLmRhdGEubXNnKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBsb2FkaW5nSW5zdGFuY2UuY2xvc2UoKTsKICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGUsICfkv53lrZjlpLHotKUnKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICB0aGlzLnNhdmluZyA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlRGVsZXRlUm93KGluZGV4LCByb3cpIHsKICAgICAgaWYgKCFyb3cuREJfSU5URVJOQUxfSUQpIHsKICAgICAgICB0aGlzLmN1cnJlbnREYXRhTGlzdC5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgIGNvbnN0IGlkeCA9IHRoaXMubmV3Um93cy5pbmRleE9mKHJvdyk7CiAgICAgICAgaWYgKGlkeCA+IC0xKSB0aGlzLm5ld1Jvd3Muc3BsaWNlKGlkeCwgMSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kY29uZmlybSgn56Gu5a6a5Yig6Zmk6K+l6KGM5pWw5o2u5ZCXPycsICfmj5DnpLonLCB7CiAgICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgICB9KS50aGVuKGFzeW5jICgpID0+IHsKICAgICAgICAgIGNvbnN0IHBrTmFtZSA9IHRoaXMuZ2V0UGtDb2x1bW5OYW1lKCk7CiAgICAgICAgICBjb25zdCBwa1ZhbCA9IHBrTmFtZSA/IHJvd1twa05hbWVdIDogbnVsbDsKICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMucmVxdWVzdCgnZGVsZXRlJywgJy9kZWxldGUnLCB7CiAgICAgICAgICAgIHNjaGVtYTogdGhpcy5jdXJyZW50U2NoZW1hLAogICAgICAgICAgICB0YWJsZU5hbWU6IHRoaXMuYWN0aXZlVGFibGUsCiAgICAgICAgICAgIGludGVybmFsSWQ6IHJvdy5EQl9JTlRFUk5BTF9JRCwKICAgICAgICAgICAgcGtWYWx1ZTogcGtWYWwKICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WIoOmZpOaIkOWKnycpOwogICAgICAgICAgICB0aGlzLmxvYWREYXRhKCk7CiAgICAgICAgICB9IGVsc2UgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDUwMykgewogICAgICAgICAgICB0aGlzLmNvbmZsaWN0TGlzdCA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgICAgIHRoaXMuY29uZmxpY3RQa1ZhbHVlID0gcGtWYWw7CiAgICAgICAgICAgIHRoaXMuY29uZmxpY3RUeXBlID0gJ2RlbGV0ZSc7CiAgICAgICAgICAgIHRoaXMuY29uZmxpY3RWaXNpYmxlID0gdHJ1ZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihyZXMuZGF0YS5tc2cpOwogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKGUgPT4gewogICAgICAgICAgaWYgKGUgIT09ICdjYW5jZWwnKSB0aGlzLmhhbmRsZUVycm9yKHsKICAgICAgICAgICAgbWVzc2FnZTogZS5tZXNzYWdlIHx8ICfliKDpmaTlpLHotKUnCiAgICAgICAgICB9LCAn5Yig6Zmk5aSx6LSlJyk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDjgJDmlrDlop7jgJHpgInljLrlj5jmm7QKICAgIGhhbmRsZVNlbGVjdGlvbkNoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5zZWxlY3RlZFJvd3MgPSB2YWw7CiAgICB9LAogICAgLy8g44CQ5paw5aKe44CR5om56YeP5Yig6Zmk5pa55rOVCiAgICBhc3luYyBoYW5kbGVCYXRjaERlbGV0ZSgpIHsKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRSb3dzLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgICBjb25zdCBleGlzdFJvd3NUb0RlbGV0ZSA9IHRoaXMuc2VsZWN0ZWRSb3dzLmZpbHRlcihyb3cgPT4gcm93LkRCX0lOVEVSTkFMX0lEKS5tYXAocm93ID0+IHJvdy5EQl9JTlRFUk5BTF9JRCk7CiAgICAgIGNvbnN0IG5ld1Jvd3NUb0RlbGV0ZSA9IHRoaXMuc2VsZWN0ZWRSb3dzLmZpbHRlcihyb3cgPT4gIXJvdy5EQl9JTlRFUk5BTF9JRCk7CiAgICAgIHRoaXMuJGNvbmZpcm0oYOehruWumuimgeWIoOmZpOmAieS4reeahCAke3RoaXMuc2VsZWN0ZWRSb3dzLmxlbmd0aH0g5p2h5pWw5o2u5ZCX77yfYCwgJ+aJuemHj+WIoOmZpCcsIHsKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbihhc3luYyAoKSA9PiB7CiAgICAgICAgLy8gMS4g5YWI5Yig5pys5Zyw5paw6KGMCiAgICAgICAgbmV3Um93c1RvRGVsZXRlLmZvckVhY2gocm93ID0+IHsKICAgICAgICAgIGNvbnN0IGlkeCA9IHRoaXMuY3VycmVudERhdGFMaXN0LmluZGV4T2Yocm93KTsKICAgICAgICAgIGlmIChpZHggPiAtMSkgdGhpcy5jdXJyZW50RGF0YUxpc3Quc3BsaWNlKGlkeCwgMSk7CiAgICAgICAgICBjb25zdCBuSWR4ID0gdGhpcy5uZXdSb3dzLmluZGV4T2Yocm93KTsKICAgICAgICAgIGlmIChuSWR4ID4gLTEpIHRoaXMubmV3Um93cy5zcGxpY2UobklkeCwgMSk7CiAgICAgICAgfSk7CgogICAgICAgIC8vIDIuIOWGjeiwg+WQjuerr+WIoOaMgeS5heWMluihjAogICAgICAgIGlmIChleGlzdFJvd3NUb0RlbGV0ZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICBjb25zdCBsb2FkaW5nSW5zdGFuY2UgPSB0aGlzLiRsb2FkaW5nKHsKICAgICAgICAgICAgbG9jazogdHJ1ZSwKICAgICAgICAgICAgdGV4dDogJ+ato+WcqOaJuemHj+WIoOmZpC4uLicsCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICdyZ2JhKDAsMCwwLDAuNyknCiAgICAgICAgICB9KTsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMucmVxdWVzdCgncG9zdCcsIGAvZGVsZXRlL2JhdGNoP3NjaGVtYT0ke3RoaXMuY3VycmVudFNjaGVtYX0mdGFibGVOYW1lPSR7dGhpcy5hY3RpdmVUYWJsZX1gLCBleGlzdFJvd3NUb0RlbGV0ZSk7CiAgICAgICAgICAgIGxvYWRpbmdJbnN0YW5jZS5jbG9zZSgpOwogICAgICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmibnph4/liKDpmaTmiJDlip8nKTsKICAgICAgICAgICAgICB0aGlzLmxvYWREYXRhKCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzLmRhdGEuY29kZSA9PT0gNTAzKSB7CiAgICAgICAgICAgICAgdGhpcy5jb25mbGljdExpc3QgPSByZXMuZGF0YS5kYXRhOwogICAgICAgICAgICAgIHRoaXMuY29uZmxpY3RUeXBlID0gJ2RlbGV0ZSc7CiAgICAgICAgICAgICAgdGhpcy5jb25mbGljdFZpc2libGUgPSB0cnVlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihyZXMuZGF0YS5tc2cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIGxvYWRpbmdJbnN0YW5jZS5jbG9zZSgpOwogICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGUsICfmibnph4/liKDpmaTlpLHotKUnKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfliKDpmaTmiJDlip8nKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKCgpID0+IHt9KTsKICAgIH0sCiAgICBhZGRDb25kaXRpb24oKSB7CiAgICAgIGlmICh0aGlzLnRhYmxlQ29sdW1ucy5sZW5ndGggPiAwKSB0aGlzLmNvbmRpdGlvbnMucHVzaCh7CiAgICAgICAgZmllbGQ6IHRoaXMudGFibGVDb2x1bW5zWzBdLkNPTFVNTl9OQU1FLAogICAgICAgIG9wZXJhdG9yOiAnPScsCiAgICAgICAgdmFsdWU6ICcnCiAgICAgIH0pOwogICAgfSwKICAgIHJlbW92ZUNvbmRpdGlvbihpbmRleCkgewogICAgICB0aGlzLmNvbmRpdGlvbnMuc3BsaWNlKGluZGV4LCAxKTsKICAgIH0sCiAgICBoYW5kbGVRdWVyeSgpIHsKICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IDE7CiAgICAgIHRoaXMubG9hZERhdGEoKTsKICAgIH0sCiAgICByZXNldEZpbHRlcnMoKSB7CiAgICAgIHRoaXMuY29uZGl0aW9ucyA9IFtdOwogICAgICB0aGlzLmhhbmRsZVF1ZXJ5KCk7CiAgICB9LAogICAgLy8g44CQ5qC45b+D5L+u5aSN44CR6Ieq5Yqo562b6YCJ77ya5pSv5oyB5aSa5YC8IChPUikKICAgIGFwcGx5QXV0b0ZpbHRlcihmaWx0ZXIpIHsKICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZmlsdGVyLnZhbHVlKSkgewogICAgICAgIHRoaXMuY29uZGl0aW9ucyA9IGZpbHRlci52YWx1ZS5tYXAodiA9PiAoewogICAgICAgICAgZmllbGQ6IGZpbHRlci5maWVsZCwKICAgICAgICAgIG9wZXJhdG9yOiAnPScsCiAgICAgICAgICB2YWx1ZTogdgogICAgICAgIH0pKTsKICAgICAgICB0aGlzLmxvZ2ljYWxPcGVyYXRvciA9ICdPUic7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jb25kaXRpb25zID0gW3sKICAgICAgICAgIGZpZWxkOiBmaWx0ZXIuZmllbGQsCiAgICAgICAgICBvcGVyYXRvcjogJz0nLAogICAgICAgICAgdmFsdWU6IGZpbHRlci52YWx1ZQogICAgICAgIH1dOwogICAgICB9CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLmhhbmRsZVF1ZXJ5KCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOOAkOaguOW/g+S/ruWkjeOAkeWkhOeQhuiBmuWQiOWGsueqgeWIl+ihqAogICAgcmVzb2x2ZUNvbmZsaWN0KHJvdykgewogICAgICB0aGlzLmNvbmZsaWN0VmlzaWJsZSA9IGZhbHNlOwoKICAgICAgLy8g5LyY5YWI5L2/55So6IGa5ZCI5YC85YiX6KGoCiAgICAgIGxldCBmaWx0ZXJWYWx1ZSA9IFtdOwogICAgICBpZiAocm93Lk1ZX1ZBTF9MSVNUICYmIHJvdy5NWV9WQUxfTElTVC5sZW5ndGggPiAwKSB7CiAgICAgICAgZmlsdGVyVmFsdWUgPSByb3cuTVlfVkFMX0xJU1Q7CiAgICAgIH0gZWxzZSBpZiAocm93Lk1ZX1ZBTCAhPT0gdW5kZWZpbmVkICYmIHJvdy5NWV9WQUwgIT09IG51bGwpIHsKICAgICAgICBmaWx0ZXJWYWx1ZSA9IFtyb3cuTVlfVkFMXTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbmZsaWN0UGtWYWx1ZSkgewogICAgICAgIGZpbHRlclZhbHVlID0gW3RoaXMuY29uZmxpY3RQa1ZhbHVlXTsKICAgICAgfQogICAgICB0aGlzLiRlbWl0KCdvcGVuLXRhYmxlJywgewogICAgICAgIGNvbm5JZDogdGhpcy5jb25uSWQsCiAgICAgICAgc2NoZW1hOiB0aGlzLmN1cnJlbnRTY2hlbWEsCiAgICAgICAgdGFibGVOYW1lOiByb3cuVEFCTEVfTkFNRSwKICAgICAgICBpbml0Vmlld01vZGU6ICdkYXRhJywKICAgICAgICBmaWx0ZXI6IHsKICAgICAgICAgIGZpZWxkOiByb3cuQ09MVU1OX05BTUUsCiAgICAgICAgICB2YWx1ZTogZmlsdGVyVmFsdWUgLy8g5Lyg5pWw57uECiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBhc3luYyBoYW5kbGVTaG93RERMKCkgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMucmVxdWVzdCgnZ2V0JywgJy9kZGwnLCB7CiAgICAgICAgICBzY2hlbWE6IHRoaXMuY3VycmVudFNjaGVtYSwKICAgICAgICAgIHRhYmxlTmFtZTogdGhpcy5hY3RpdmVUYWJsZQogICAgICAgIH0pOwogICAgICAgIGxldCByYXdEREwgPSByZXMuZGF0YS5kYXRhIHx8ICcnOwogICAgICAgIHRoaXMuY3VycmVudERETCA9IHJhd0RETC5yZXBsYWNlKC8mcXVvdDsvZywgJyInKS5yZXBsYWNlKC8mYXBvczsvZywgIiciKS5yZXBsYWNlKC8mbHQ7L2csICc8JykucmVwbGFjZSgvJmd0Oy9nLCAnPicpLnJlcGxhY2UoLyZhbXA7L2csICcmJyk7CiAgICAgICAgdGhpcy5kZGxWaXNpYmxlID0gdHJ1ZTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZSwgJ+iOt+WPlkRETOWksei0pScpOwogICAgICB9CiAgICB9LAogICAgLy8gLi4uIERlc2lnbiB0YWJsZSByZWxhdGVkIG1ldGhvZHMgKG9taXR0ZWQgZm9yIGJyZXZpdHksIGtlZXAgYXMgaXMpIC4uLgogICAgYXN5bmMgaGFuZGxlRGVzaWduVGFibGUoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgY29sUmVzID0gYXdhaXQgdGhpcy5yZXF1ZXN0KCdnZXQnLCAnL2NvbHVtbnMnLCB7CiAgICAgICAgICBzY2hlbWE6IHRoaXMuY3VycmVudFNjaGVtYSwKICAgICAgICAgIHRhYmxlTmFtZTogdGhpcy5hY3RpdmVUYWJsZQogICAgICAgIH0pOwogICAgICAgIGNvbnN0IGNvbHMgPSBjb2xSZXMuZGF0YS5kYXRhOwogICAgICAgIHRoaXMub3JpZ2luYWxDb2x1bW5zID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjb2xzLm1hcChjID0+ICh7CiAgICAgICAgICAuLi5jLAogICAgICAgICAgREFUQV9MRU5HVEg6IGMuREFUQV9MRU5HVEggPyBTdHJpbmcoYy5EQVRBX0xFTkdUSCkgOiAnJywKICAgICAgICAgIENPTU1FTlRTOiBjLkNPTU1FTlRTIHx8ICcnLAogICAgICAgICAgREFUQV9ERUZBVUxUOiBjLkRBVEFfREVGQVVMVCB8fCAnJywKICAgICAgICAgIElTX1BLOiBbJzEnLCAxLCAnWScsICd5JywgJ3RydWUnLCB0cnVlXS5pbmNsdWRlcyhjLklTX1BLKQogICAgICAgIH0pKSkpOwogICAgICAgIHRoaXMuZGVzaWduQ29sdW1ucyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5vcmlnaW5hbENvbHVtbnMpKS5tYXAoYyA9PiAoewogICAgICAgICAgLi4uYywKICAgICAgICAgIF9zdGF0dXM6ICdvcmlnaW5hbCcsCiAgICAgICAgICBfb3JpZ2luYWxOYW1lOiBjLkNPTFVNTl9OQU1FCiAgICAgICAgfSkpOwogICAgICAgIHRyeSB7CiAgICAgICAgICBjb25zdCBpZHhSZXMgPSBhd2FpdCB0aGlzLnJlcXVlc3QoJ2dldCcsICcvaW5kZXhlcycsIHsKICAgICAgICAgICAgc2NoZW1hOiB0aGlzLmN1cnJlbnRTY2hlbWEsCiAgICAgICAgICAgIHRhYmxlTmFtZTogdGhpcy5hY3RpdmVUYWJsZQogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAoaWR4UmVzLmRhdGEuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIHRoaXMuZGVzaWduSW5kZXhlcyA9IGlkeFJlcy5kYXRhLmRhdGEubWFwKGkgPT4gKHsKICAgICAgICAgICAgICAuLi5pLAogICAgICAgICAgICAgIF9zdGF0dXM6ICdvcmlnaW5hbCcsCiAgICAgICAgICAgICAgQ09MVU1OUzogaS5DT0xVTU5TLnNwbGl0KCcsJykKICAgICAgICAgICAgfSkpOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHRoaXMuZGVzaWduSW5kZXhlcyA9IFtdOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgY29uc3QgZmtSZXMgPSBhd2FpdCB0aGlzLnJlcXVlc3QoJ2dldCcsICcvZm9yZWlnbi1rZXlzJywgewogICAgICAgICAgICBzY2hlbWE6IHRoaXMuY3VycmVudFNjaGVtYSwKICAgICAgICAgICAgdGFibGVOYW1lOiB0aGlzLmFjdGl2ZVRhYmxlCiAgICAgICAgICB9KTsKICAgICAgICAgIGlmIChma1Jlcy5kYXRhLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICB0aGlzLmRlc2lnbkZvcmVpZ25LZXlzID0gZmtSZXMuZGF0YS5kYXRhLm1hcChmID0+ICh7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBfc3RhdHVzOiAnb3JpZ2luYWwnCiAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgY29uc3QgcmVmVGFibGVzID0gWy4uLm5ldyBTZXQodGhpcy5kZXNpZ25Gb3JlaWduS2V5cy5tYXAoZiA9PiBmLlJfVEFCTEVfTkFNRSkuZmlsdGVyKHQgPT4gdCkpXTsKICAgICAgICAgICAgcmVmVGFibGVzLmZvckVhY2godCA9PiB0aGlzLmxvYWRSZWZDb2x1bW5zKHQpKTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICB0aGlzLmRlc2lnbkZvcmVpZ25LZXlzID0gW107CiAgICAgICAgfQogICAgICAgIGNvbnN0IHRhYmxlc1JlcyA9IGF3YWl0IHRoaXMucmVxdWVzdCgnZ2V0JywgJy90YWJsZXMnLCB7CiAgICAgICAgICBzY2hlbWE6IHRoaXMuY3VycmVudFNjaGVtYQogICAgICAgIH0pOwogICAgICAgIHRoaXMuYWxsVGFibGVOYW1lcyA9ICh0YWJsZXNSZXMuZGF0YS5kYXRhIHx8IFtdKS5tYXAodCA9PiB0LlRBQkxFX05BTUUpOwogICAgICAgIHRoaXMuZGVsZXRlQ29sdW1uTGlzdCA9IFtdOwogICAgICAgIHRoaXMuZGVsZXRlSW5kZXhMaXN0ID0gW107CiAgICAgICAgdGhpcy5kZWxldGVGa0xpc3QgPSBbXTsKICAgICAgICB0aGlzLmRlc2lnbkFjdGl2ZVRhYiA9ICdjb2x1bW5zJzsKICAgICAgICB0aGlzLmRlc2lnblZpc2libGUgPSB0cnVlOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlLCAn5Yqg6L296K6+6K6h5Zmo5aSx6LSlJyk7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBsb2FkUmVmQ29sdW1ucyh0YWJsZU5hbWUpIHsKICAgICAgaWYgKCF0YWJsZU5hbWUgfHwgdGhpcy5yZWZDb2x1bW5zQ2FjaGVbdGFibGVOYW1lXSkgcmV0dXJuOwogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMucmVxdWVzdCgnZ2V0JywgJy9jb2x1bW5zJywgewogICAgICAgICAgc2NoZW1hOiB0aGlzLmN1cnJlbnRTY2hlbWEsCiAgICAgICAgICB0YWJsZU5hbWU6IHRhYmxlTmFtZQogICAgICAgIH0pOwogICAgICAgIHRoaXMuJHNldCh0aGlzLnJlZkNvbHVtbnNDYWNoZSwgdGFibGVOYW1lLCByZXMuZGF0YS5kYXRhIHx8IFtdKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoIuWKoOi9veW8leeUqOihqOWIl+Wksei0pSIsIGUpOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlUmVmVGFibGVDaGFuZ2Uocm93KSB7CiAgICAgIHJvdy5SX0NPTFVNTl9OQU1FID0gJyc7CiAgICAgIGlmIChyb3cuUl9UQUJMRV9OQU1FKSB7CiAgICAgICAgdGhpcy5sb2FkUmVmQ29sdW1ucyhyb3cuUl9UQUJMRV9OQU1FKTsKICAgICAgfQogICAgfSwKICAgIGlzRGlmZihuZXdWYWwsIG9sZFZhbCkgewogICAgICBjb25zdCBuID0gbmV3VmFsID09PSBudWxsIHx8IG5ld1ZhbCA9PT0gdW5kZWZpbmVkID8gIiIgOiBTdHJpbmcobmV3VmFsKS50cmltKCk7CiAgICAgIGNvbnN0IG8gPSBvbGRWYWwgPT09IG51bGwgfHwgb2xkVmFsID09PSB1bmRlZmluZWQgPyAiIiA6IFN0cmluZyhvbGRWYWwpLnRyaW0oKTsKICAgICAgcmV0dXJuIG4gIT09IG87CiAgICB9LAogICAgYWRkRGVzaWduQ29sdW1uKCkgewogICAgICB0aGlzLmRlc2lnbkNvbHVtbnMucHVzaCh7CiAgICAgICAgQ09MVU1OX05BTUU6ICdORVdfQ09MJywKICAgICAgICBEQVRBX1RZUEU6ICdWQVJDSEFSMicsCiAgICAgICAgREFUQV9MRU5HVEg6ICc1MCcsCiAgICAgICAgTlVMTEFCTEU6ICdZJywKICAgICAgICBJU19QSzogZmFsc2UsCiAgICAgICAgX3N0YXR1czogJ25ldycKICAgICAgfSk7CiAgICB9LAogICAgcmVtb3ZlRGVzaWduQ29sdW1uKGluZGV4LCByb3cpIHsKICAgICAgaWYgKHJvdy5fc3RhdHVzICE9PSAnbmV3JykgdGhpcy5kZWxldGVDb2x1bW5MaXN0LnB1c2gocm93LkNPTFVNTl9OQU1FKTsKICAgICAgdGhpcy5kZXNpZ25Db2x1bW5zLnNwbGljZShpbmRleCwgMSk7CiAgICB9LAogICAgbWFya01vZGlmaWVkKHJvdykgewogICAgICBpZiAocm93Ll9zdGF0dXMgPT09ICduZXcnKSByZXR1cm47CiAgICAgIGNvbnN0IG9yaWdpbmFsID0gdGhpcy5vcmlnaW5hbENvbHVtbnMuZmluZChvID0+IG8uQ09MVU1OX05BTUUgPT09IHJvdy5fb3JpZ2luYWxOYW1lKTsKICAgICAgaWYgKCFvcmlnaW5hbCkgcmV0dXJuOwogICAgICBjb25zdCBpc0NoYW5nZWQgPSB0aGlzLmlzRGlmZihyb3cuQ09MVU1OX05BTUUsIG9yaWdpbmFsLkNPTFVNTl9OQU1FKSB8fCB0aGlzLmlzRGlmZihyb3cuREFUQV9UWVBFLCBvcmlnaW5hbC5EQVRBX1RZUEUpIHx8IHRoaXMuaXNEaWZmKHJvdy5EQVRBX0xFTkdUSCwgb3JpZ2luYWwuREFUQV9MRU5HVEgpIHx8IHJvdy5JU19QSyAhPT0gb3JpZ2luYWwuSVNfUEsgfHwgdGhpcy5pc0RpZmYocm93Lk5VTExBQkxFLCBvcmlnaW5hbC5OVUxMQUJMRSkgfHwgdGhpcy5pc0RpZmYocm93LkRBVEFfREVGQVVMVCwgb3JpZ2luYWwuREFUQV9ERUZBVUxUKSB8fCB0aGlzLmlzRGlmZihyb3cuQ09NTUVOVFMsIG9yaWdpbmFsLkNPTU1FTlRTKTsKICAgICAgcm93Ll9zdGF0dXMgPSBpc0NoYW5nZWQgPyAnbW9kaWZpZWQnIDogJ29yaWdpbmFsJzsKICAgIH0sCiAgICBoYW5kbGVQa0NoYW5nZShyb3cpIHsKICAgICAgdGhpcy5tYXJrTW9kaWZpZWQocm93KTsKICAgIH0sCiAgICBhZGREZXNpZ25JbmRleCgpIHsKICAgICAgdGhpcy5kZXNpZ25JbmRleGVzLnB1c2goewogICAgICAgIElOREVYX05BTUU6ICcnLAogICAgICAgIElOREVYX1RZUEU6ICdOT1JNQUwnLAogICAgICAgIENPTFVNTlM6IFtdLAogICAgICAgIF9zdGF0dXM6ICduZXcnCiAgICAgIH0pOwogICAgfSwKICAgIHJlbW92ZURlc2lnbkluZGV4KGluZGV4LCByb3cpIHsKICAgICAgaWYgKHJvdy5fc3RhdHVzICE9PSAnbmV3JykgdGhpcy5kZWxldGVJbmRleExpc3QucHVzaChyb3cuSU5ERVhfTkFNRSk7CiAgICAgIHRoaXMuZGVzaWduSW5kZXhlcy5zcGxpY2UoaW5kZXgsIDEpOwogICAgfSwKICAgIGFkZERlc2lnbkZrKCkgewogICAgICB0aGlzLmRlc2lnbkZvcmVpZ25LZXlzLnB1c2goewogICAgICAgIENPTlNUUkFJTlRfTkFNRTogJycsCiAgICAgICAgQ09MVU1OX05BTUU6ICcnLAogICAgICAgIFJfVEFCTEVfTkFNRTogJycsCiAgICAgICAgUl9DT0xVTU5fTkFNRTogJycsCiAgICAgICAgREVMRVRFX1JVTEU6ICdOTyBBQ1RJT04nLAogICAgICAgIF9zdGF0dXM6ICduZXcnCiAgICAgIH0pOwogICAgfSwKICAgIHJlbW92ZURlc2lnbkZrKGluZGV4LCByb3cpIHsKICAgICAgaWYgKHJvdy5fc3RhdHVzICE9PSAnbmV3JykgdGhpcy5kZWxldGVGa0xpc3QucHVzaChyb3cuQ09OU1RSQUlOVF9OQU1FKTsKICAgICAgdGhpcy5kZXNpZ25Gb3JlaWduS2V5cy5zcGxpY2UoaW5kZXgsIDEpOwogICAgfSwKICAgIGdlbmVyYXRlQW5kUnVuQWx0ZXIoKSB7CiAgICAgIGxldCBzcWxzID0gW107CiAgICAgIGNvbnN0IHMgPSB0aGlzLmN1cnJlbnRTY2hlbWE7CiAgICAgIGNvbnN0IHQgPSB0aGlzLmFjdGl2ZVRhYmxlOwogICAgICBjb25zdCBuYW1lUmVnZXggPSAvXlthLXpBLVowLTlfXSskLzsKICAgICAgZm9yIChjb25zdCBjIG9mIHRoaXMuZGVzaWduQ29sdW1ucykgewogICAgICAgIGlmICghbmFtZVJlZ2V4LnRlc3QoYy5DT0xVTU5fTkFNRSkpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoYOWIl+WQjSAiJHtjLkNPTFVNTl9OQU1FfSIg5LiN5ZCI5rOV77yM5LuF5pSv5oyB5a2X5q+N44CB5pWw5a2X5ZKM5LiL5YiS57q/44CCYCk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMuZGVsZXRlQ29sdW1uTGlzdC5mb3JFYWNoKGMgPT4gc3Fscy5wdXNoKGBBTFRFUiBUQUJMRSAiJHtzfSIuIiR7dH0iIERST1AgQ09MVU1OICIke2N9IjtgKSk7CiAgICAgIHRoaXMuZGVzaWduQ29sdW1ucy5maWx0ZXIoYyA9PiBjLl9zdGF0dXMgPT09ICdtb2RpZmllZCcpLmZvckVhY2goYyA9PiB7CiAgICAgICAgY29uc3Qgb3JpZ2luYWwgPSB0aGlzLm9yaWdpbmFsQ29sdW1ucy5maW5kKG8gPT4gby5DT0xVTU5fTkFNRSA9PT0gYy5fb3JpZ2luYWxOYW1lKTsKICAgICAgICBpZiAoIW9yaWdpbmFsKSByZXR1cm47CiAgICAgICAgaWYgKHRoaXMuaXNEaWZmKGMuQ09MVU1OX05BTUUsIGMuX29yaWdpbmFsTmFtZSkpIHsKICAgICAgICAgIHNxbHMucHVzaChgQUxURVIgVEFCTEUgIiR7c30iLiIke3R9IiBSRU5BTUUgQ09MVU1OICIke2MuX29yaWdpbmFsTmFtZX0iIFRPICIke2MuQ09MVU1OX05BTUV9IjtgKTsKICAgICAgICB9CiAgICAgICAgbGV0IHR5cGVMZW4gPSBjLkRBVEFfVFlQRTsKICAgICAgICBpZiAoYy5EQVRBX0xFTkdUSCAmJiAhWydOVU1CRVInLCAnREFURScsICdUSU1FU1RBTVAnLCAnQ0xPQicsICdCTE9CJ10uaW5jbHVkZXMoYy5EQVRBX1RZUEUpKSB0eXBlTGVuICs9IGAoJHtjLkRBVEFfTEVOR1RIfSlgOwogICAgICAgIGxldCBtb2RpZnlTcWwgPSBgQUxURVIgVEFCTEUgIiR7c30iLiIke3R9IiBNT0RJRlkgIiR7Yy5DT0xVTU5fTkFNRX0iICR7dHlwZUxlbn1gOwogICAgICAgIGlmIChjLkRBVEFfREVGQVVMVCAmJiB0aGlzLmlzRGlmZihjLkRBVEFfREVGQVVMVCwgb3JpZ2luYWwuREFUQV9ERUZBVUxUKSkgbW9kaWZ5U3FsICs9IGAgREVGQVVMVCAke2MuREFUQV9ERUZBVUxUfWA7CiAgICAgICAgaWYgKHRoaXMuaXNEaWZmKGMuTlVMTEFCTEUsIG9yaWdpbmFsLk5VTExBQkxFKSkgbW9kaWZ5U3FsICs9IGMuTlVMTEFCTEUgPT09ICdOJyA/ICcgTk9UIE5VTEwnIDogJyBOVUxMJzsKICAgICAgICBjb25zdCBpc0F0dHJDaGFuZ2VkID0gdGhpcy5pc0RpZmYoYy5EQVRBX1RZUEUsIG9yaWdpbmFsLkRBVEFfVFlQRSkgfHwgdGhpcy5pc0RpZmYoYy5EQVRBX0xFTkdUSCwgb3JpZ2luYWwuREFUQV9MRU5HVEgpIHx8IHRoaXMuaXNEaWZmKGMuTlVMTEFCTEUsIG9yaWdpbmFsLk5VTExBQkxFKSB8fCB0aGlzLmlzRGlmZihjLkRBVEFfREVGQVVMVCwgb3JpZ2luYWwuREFUQV9ERUZBVUxUKTsKICAgICAgICBpZiAoaXNBdHRyQ2hhbmdlZCkgc3Fscy5wdXNoKG1vZGlmeVNxbCArICc7Jyk7CiAgICAgICAgaWYgKHRoaXMuaXNEaWZmKGMuQ09NTUVOVFMsIG9yaWdpbmFsLkNPTU1FTlRTKSkgewogICAgICAgICAgc3Fscy5wdXNoKGBDT01NRU5UIE9OIENPTFVNTiAiJHtzfSIuIiR7dH0iLiIke2MuQ09MVU1OX05BTUV9IiBJUyAnJHtjLkNPTU1FTlRTfSc7YCk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgY29uc3Qgb2xkUGtDb2xzID0gdGhpcy5vcmlnaW5hbENvbHVtbnMuZmlsdGVyKGMgPT4gWycxJywgMSwgJ1knLCB0cnVlXS5pbmNsdWRlcyhjLklTX1BLKSkubWFwKGMgPT4gYy5DT0xVTU5fTkFNRSkuc29ydCgpOwogICAgICBjb25zdCBuZXdQa0NvbHMgPSB0aGlzLmRlc2lnbkNvbHVtbnMuZmlsdGVyKGMgPT4gYy5JU19QSykubWFwKGMgPT4gYy5DT0xVTU5fTkFNRSkuc29ydCgpOwogICAgICBjb25zdCBpc1BrQ2hhbmdlZCA9IEpTT04uc3RyaW5naWZ5KG9sZFBrQ29scykgIT09IEpTT04uc3RyaW5naWZ5KG5ld1BrQ29scyk7CiAgICAgIGlmIChpc1BrQ2hhbmdlZCkgewogICAgICAgIGlmIChvbGRQa0NvbHMubGVuZ3RoID4gMCkgc3Fscy5wdXNoKGBBTFRFUiBUQUJMRSAiJHtzfSIuIiR7dH0iIERST1AgUFJJTUFSWSBLRVk7YCk7CiAgICAgICAgaWYgKG5ld1BrQ29scy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBjb25zdCBwa0xpc3QgPSBuZXdQa0NvbHMubWFwKGMgPT4gYCIke2N9ImApLmpvaW4oJywnKTsKICAgICAgICAgIHNxbHMucHVzaChgQUxURVIgVEFCTEUgIiR7c30iLiIke3R9IiBBREQgUFJJTUFSWSBLRVkgKCR7cGtMaXN0fSk7YCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMuZGVzaWduQ29sdW1ucy5maWx0ZXIoYyA9PiBjLl9zdGF0dXMgPT09ICduZXcnKS5mb3JFYWNoKGMgPT4gewogICAgICAgIGxldCBsID0gYEFMVEVSIFRBQkxFICIke3N9Ii4iJHt0fSIgQUREICIke2MuQ09MVU1OX05BTUV9IiAke2MuREFUQV9UWVBFfWA7CiAgICAgICAgaWYgKGMuREFUQV9MRU5HVEggJiYgIVsnTlVNQkVSJywgJ0RBVEUnLCAnVElNRVNUQU1QJywgJ0NMT0InLCAnQkxPQiddLmluY2x1ZGVzKGMuREFUQV9UWVBFKSkgbCArPSBgKCR7Yy5EQVRBX0xFTkdUSH0pYDsKICAgICAgICBpZiAoYy5EQVRBX0RFRkFVTFQpIGwgKz0gYCBERUZBVUxUICR7Yy5EQVRBX0RFRkFVTFR9YDsKICAgICAgICBpZiAoYy5OVUxMQUJMRSA9PT0gJ04nKSBsICs9ICcgTk9UIE5VTEwnOwogICAgICAgIHNxbHMucHVzaChsICsgJzsnKTsKICAgICAgICBpZiAoYy5DT01NRU5UUykgc3Fscy5wdXNoKGBDT01NRU5UIE9OIENPTFVNTiAiJHtzfSIuIiR7dH0iLiIke2MuQ09MVU1OX05BTUV9IiBJUyAnJHtjLkNPTU1FTlRTfSc7YCk7CiAgICAgIH0pOwogICAgICB0aGlzLmRlbGV0ZUluZGV4TGlzdC5mb3JFYWNoKGlkeCA9PiBzcWxzLnB1c2goYERST1AgSU5ERVggIiR7c30iLiIke2lkeH0iO2ApKTsKICAgICAgdGhpcy5kZXNpZ25JbmRleGVzLmZpbHRlcihpID0+IGkuX3N0YXR1cyA9PT0gJ25ldycpLmZvckVhY2goaSA9PiB7CiAgICAgICAgaWYgKCFpLklOREVYX05BTUUgfHwgaS5DT0xVTU5TLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgICAgIGNvbnN0IGNvbHMgPSBpLkNPTFVNTlMubWFwKGMgPT4gYCIke2N9ImApLmpvaW4oJywnKTsKICAgICAgICBjb25zdCB1bmlxdWUgPSBpLklOREVYX1RZUEUgPT09ICdVTklRVUUnID8gJ1VOSVFVRScgOiBpLklOREVYX1RZUEUgPT09ICdCSVRNQVAnID8gJ0JJVE1BUCcgOiAnJzsKICAgICAgICBzcWxzLnB1c2goYENSRUFURSAke3VuaXF1ZX0gSU5ERVggIiR7aS5JTkRFWF9OQU1FfSIgT04gIiR7c30iLiIke3R9IiAoJHtjb2xzfSk7YCk7CiAgICAgIH0pOwogICAgICB0aGlzLmRlbGV0ZUZrTGlzdC5mb3JFYWNoKGZrID0+IHNxbHMucHVzaChgQUxURVIgVEFCTEUgIiR7c30iLiIke3R9IiBEUk9QIENPTlNUUkFJTlQgIiR7Zmt9IjtgKSk7CiAgICAgIHRoaXMuZGVzaWduRm9yZWlnbktleXMuZmlsdGVyKGYgPT4gZi5fc3RhdHVzID09PSAnbmV3JykuZm9yRWFjaChmID0+IHsKICAgICAgICBpZiAoIWYuQ09OU1RSQUlOVF9OQU1FIHx8ICFmLkNPTFVNTl9OQU1FIHx8ICFmLlJfVEFCTEVfTkFNRSB8fCAhZi5SX0NPTFVNTl9OQU1FKSByZXR1cm47CiAgICAgICAgbGV0IHNxbCA9IGBBTFRFUiBUQUJMRSAiJHtzfSIuIiR7dH0iIEFERCBDT05TVFJBSU5UICIke2YuQ09OU1RSQUlOVF9OQU1FfSIgRk9SRUlHTiBLRVkgKCIke2YuQ09MVU1OX05BTUV9IikgUkVGRVJFTkNFUyAiJHtzfSIuIiR7Zi5SX1RBQkxFX05BTUV9IigiJHtmLlJfQ09MVU1OX05BTUV9IilgOwogICAgICAgIGlmIChmLkRFTEVURV9SVUxFID09PSAnQ0FTQ0FERScpIHNxbCArPSAnIE9OIERFTEVURSBDQVNDQURFJztlbHNlIGlmIChmLkRFTEVURV9SVUxFID09PSAnU0VUIE5VTEwnKSBzcWwgKz0gJyBPTiBERUxFVEUgU0VUIE5VTEwnOwogICAgICAgIHNxbHMucHVzaChzcWwgKyAnOycpOwogICAgICB9KTsKICAgICAgaWYgKCFzcWxzLmxlbmd0aCkgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuaW5mbygn5peg57uT5p6E5Y+Y5pu0Jyk7CiAgICAgIHRoaXMuZ2VuZXJhdGVkU3FsID0gc3Fscy5qb2luKCdcbicpOwogICAgICB0aGlzLnNxbENvbmZpcm1WaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBhc3luYyBleGVjdXRlQWx0ZXIoKSB7CiAgICAgIHRoaXMuYWx0ZXJpbmcgPSB0cnVlOwogICAgICB0cnkgewogICAgICAgIGNvbnN0IHN0YXRlbWVudHMgPSB0aGlzLmdlbmVyYXRlZFNxbC5zcGxpdCgnOycpLm1hcChzID0+IHMudHJpbSgpKS5maWx0ZXIocyA9PiBzKTsKICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnJlcXVlc3QoJ3Bvc3QnLCAnL2V4ZWN1dGUvYmF0Y2gnLCB7CiAgICAgICAgICBzcWxzOiBzdGF0ZW1lbnRzCiAgICAgICAgfSk7CiAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfkv67mlLnmiJDlip8nKTsKICAgICAgICAgIHRoaXMuc3FsQ29uZmlybVZpc2libGUgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuZGVzaWduVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgaWYgKHRoaXMudmlld01vZGUgPT09ICdyZWxhdGlvbicpIHsKICAgICAgICAgICAgdGhpcy5sb2FkUmVsYXRpb25zKCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmxvYWREYXRhKCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcihyZXMuZGF0YS5tc2cpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZSwgJ+ihqOe7k+aehOWPmOabtOWksei0pScpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHRoaXMuYWx0ZXJpbmcgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIGluZGV4TWV0aG9kKGluZGV4KSB7CiAgICAgIHJldHVybiAodGhpcy5jdXJyZW50UGFnZSAtIDEpICogdGhpcy5wYWdlU2l6ZSArIGluZGV4ICsgMTsKICAgIH0sCiAgICBoYW5kbGVTb3J0Q2hhbmdlKHsKICAgICAgcHJvcCwKICAgICAgb3JkZXIKICAgIH0pIHsKICAgICAgaWYgKCFwcm9wKSByZXR1cm47CiAgICAgIGNvbnN0IHNvcnRlZERhdGEgPSBbLi4udGhpcy5jdXJyZW50RGF0YUxpc3RdOwogICAgICBzb3J0ZWREYXRhLnNvcnQoKGEsIGIpID0+IHsKICAgICAgICBsZXQgdmFsQSA9IGFbcHJvcF07CiAgICAgICAgbGV0IHZhbEIgPSBiW3Byb3BdOwogICAgICAgIGlmICh2YWxBID09IG51bGwpIHZhbEEgPSAnJzsKICAgICAgICBpZiAodmFsQiA9PSBudWxsKSB2YWxCID0gJyc7CiAgICAgICAgaWYgKHZhbEEgPiB2YWxCKSByZXR1cm4gb3JkZXIgPT09ICdhc2NlbmRpbmcnID8gMSA6IC0xOwogICAgICAgIGlmICh2YWxBIDwgdmFsQikgcmV0dXJuIG9yZGVyID09PSAnYXNjZW5kaW5nJyA/IC0xIDogMTsKICAgICAgICByZXR1cm4gMDsKICAgICAgfSk7CiAgICAgIHRoaXMuY3VycmVudERhdGFMaXN0ID0gc29ydGVkRGF0YTsKICAgIH0sCiAgICBoYW5kbGVTaXplQ2hhbmdlKHYpIHsKICAgICAgdGhpcy5wYWdlU2l6ZSA9IHY7CiAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSAxOwogICAgICB0aGlzLmxvYWREYXRhKCk7CiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZSh2KSB7CiAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSB2OwogICAgICB0aGlzLmxvYWREYXRhKCk7CiAgICB9LAogICAgYXN5bmMgcnVuU3FsKCkgewogICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnJlcXVlc3QoJ3Bvc3QnLCAnL2V4ZWN1dGUnLCB7CiAgICAgICAgc3FsOiB0aGlzLmN1c3RvbVNxbAogICAgICB9KTsKICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDIwMCkgdGhpcy5zcWxSZXN1bHQgPSByZXMuZGF0YS5kYXRhOwogICAgfSwKICAgIGRlc3Ryb3lHcmFwaCgpIHsKICAgICAgaWYgKHRoaXMuZ3JhcGhJbnN0YW5jZSkgewogICAgICAgIHRoaXMuZ3JhcGhJbnN0YW5jZS5kZXN0cm95KCk7CiAgICAgICAgdGhpcy5ncmFwaEluc3RhbmNlID0gbnVsbDsKICAgICAgfQogICAgICBjb25zdCBjID0gdGhpcy4kcmVmcy5yZWxhdGlvbkNhbnZhczsKICAgICAgaWYgKGMpIGMuaW5uZXJIVE1MID0gJyc7CiAgICB9LAogICAgaGFuZGxlU2hvd0FsbENoYW5nZSh2YWwpIHsKICAgICAgaWYgKHZhbCkgewogICAgICAgIGlmICh0aGlzLmdyYXBoTm9kZUlkcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICB0aGlzLmV4cGFuZGVkVGFibGVMaXN0ID0gWy4uLnRoaXMuZ3JhcGhOb2RlSWRzXTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5leHBhbmRlZFRhYmxlTGlzdCA9IFtdOwogICAgICB9CiAgICAgIHRoaXMubG9hZFJlbGF0aW9ucygpOwogICAgfSwKICAgIGFzeW5jIGxvYWRSZWxhdGlvbnMoKSB7CiAgICAgIHRoaXMuZGVzdHJveUdyYXBoKCk7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5yZXF1ZXN0KCdnZXQnLCAnL2VyLWRhdGEnLCB7CiAgICAgICAgICBzY2hlbWE6IHRoaXMuY3VycmVudFNjaGVtYSwKICAgICAgICAgIHRhYmxlTmFtZTogdGhpcy5hY3RpdmVUYWJsZSwKICAgICAgICAgIHNob3dBbGw6IHRoaXMuc2hvd0FsbENvbHVtbnMsCiAgICAgICAgICBleHBhbmRlZFRhYmxlczogdGhpcy5leHBhbmRlZFRhYmxlTGlzdC5qb2luKCcsJykKICAgICAgICB9KTsKICAgICAgICBpZiAodGhpcy52aWV3TW9kZSA9PT0gJ3JlbGF0aW9uJykgewogICAgICAgICAgdGhpcy5ncmFwaE5vZGVJZHMgPSByZXMuZGF0YS5kYXRhLm5vZGVzLm1hcChuID0+IG4uaWQpOwogICAgICAgICAgdGhpcy5jaGVja0F1dG9FeHBhbmRTdGF0ZSgpOwogICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gdGhpcy5pbml0R3JhcGgocmVzLmRhdGEuZGF0YSkpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkge30KICAgIH0sCiAgICBjaGVja0F1dG9FeHBhbmRTdGF0ZSgpIHsKICAgICAgaWYgKHRoaXMuZ3JhcGhOb2RlSWRzLmxlbmd0aCA+IDApIHsKICAgICAgICBjb25zdCBhbGxFeHBhbmRlZCA9IHRoaXMuZ3JhcGhOb2RlSWRzLmV2ZXJ5KGlkID0+IHRoaXMuZXhwYW5kZWRUYWJsZUxpc3QuaW5jbHVkZXMoaWQpKTsKICAgICAgICBpZiAodGhpcy5zaG93QWxsQ29sdW1ucyAhPT0gYWxsRXhwYW5kZWQpIHsKICAgICAgICAgIHRoaXMuc2hvd0FsbENvbHVtbnMgPSBhbGxFeHBhbmRlZDsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVHcmFwaFpvb20ocmF0aW8pIHsKICAgICAgaWYgKCF0aGlzLmdyYXBoSW5zdGFuY2UpIHJldHVybjsKICAgICAgY29uc3Qgem9vbSA9IHRoaXMuZ3JhcGhJbnN0YW5jZS5nZXRab29tKCk7CiAgICAgIHRoaXMuZ3JhcGhJbnN0YW5jZS56b29tVG8oem9vbSAqIHJhdGlvLCB7CiAgICAgICAgeDogdGhpcy4kcmVmcy5yZWxhdGlvbkNhbnZhcy5vZmZzZXRXaWR0aCAvIDIsCiAgICAgICAgeTogdGhpcy4kcmVmcy5yZWxhdGlvbkNhbnZhcy5vZmZzZXRIZWlnaHQgLyAyCiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZUdyYXBoRml0KCkgewogICAgICBpZiAoIXRoaXMuZ3JhcGhJbnN0YW5jZSkgcmV0dXJuOwogICAgICB0aGlzLmdyYXBoSW5zdGFuY2UuZml0VmlldygpOwogICAgfSwKICAgIGluaXRHcmFwaChkYXRhKSB7CiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuJHJlZnMucmVsYXRpb25DYW52YXM7CiAgICAgIGlmICghY29udGFpbmVyKSByZXR1cm47CiAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnJzsKICAgICAgY29uc3Qgbm9kZUNvdW50ID0gZGF0YS5ub2Rlcy5sZW5ndGg7CiAgICAgIGNvbnN0IHJhbmtzZXAgPSBub2RlQ291bnQgPiA1ID8gMTUwIDogMTAwOwogICAgICB0aGlzLmdyYXBoSW5zdGFuY2UgPSBuZXcgRzYuR3JhcGgoewogICAgICAgIGNvbnRhaW5lciwKICAgICAgICB3aWR0aDogY29udGFpbmVyLm9mZnNldFdpZHRoLAogICAgICAgIGhlaWdodDogY29udGFpbmVyLm9mZnNldEhlaWdodCwKICAgICAgICBmaXRWaWV3OiB0cnVlLAogICAgICAgIGZpdFZpZXdQYWRkaW5nOiA0MCwKICAgICAgICByZW5kZXJlcjogJ2NhbnZhcycsCiAgICAgICAgbGF5b3V0OiB7CiAgICAgICAgICB0eXBlOiAnZGFncmUnLAogICAgICAgICAgcmFua2RpcjogJ0xSJywKICAgICAgICAgIG5vZGVzZXA6IDUwLAogICAgICAgICAgcmFua3NlcDogcmFua3NlcAogICAgICAgIH0sCiAgICAgICAgZGVmYXVsdE5vZGU6IHsKICAgICAgICAgIHR5cGU6ICdkYi10YWJsZScsCiAgICAgICAgICBhbmNob3JQb2ludHM6IFtbMCwgMC41XSwgWzEsIDAuNV1dCiAgICAgICAgfSwKICAgICAgICBkZWZhdWx0RWRnZTogewogICAgICAgICAgdHlwZTogJ2N1YmljLWhvcml6b250YWwnLAogICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgc3Ryb2tlOiAnI0EzQjFCRicsCiAgICAgICAgICAgIGxpbmVXaWR0aDogMiwKICAgICAgICAgICAgZW5kQXJyb3c6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICBsYWJlbENmZzogewogICAgICAgICAgICBhdXRvUm90YXRlOiB0cnVlLAogICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgIGZvbnRTaXplOiAxMCwKICAgICAgICAgICAgICBmaWxsOiAnI2FhYScKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgbW9kZXM6IHsKICAgICAgICAgIGRlZmF1bHQ6IFsnZHJhZy1jYW52YXMnLCAnem9vbS1jYW52YXMnLCAnZHJhZy1ub2RlJ10KICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmdyYXBoSW5zdGFuY2UuZGF0YShKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRhdGEpKSk7CiAgICAgIHRoaXMuZ3JhcGhJbnN0YW5jZS5yZW5kZXIoKTsKICAgICAgdGhpcy5ncmFwaEluc3RhbmNlLm9uKCdub2RlOmNsaWNrJywgZSA9PiB7CiAgICAgICAgY29uc3Qgc2hhcGVOYW1lID0gZS50YXJnZXQuZ2V0KCduYW1lJyk7CiAgICAgICAgY29uc3Qgbm9kZUlkID0gZS5pdGVtLmdldE1vZGVsKCkuaWQ7CiAgICAgICAgaWYgKHNoYXBlTmFtZSA9PT0gJ2V4cGFuZC10ZXh0JykgewogICAgICAgICAgaWYgKCF0aGlzLmV4cGFuZGVkVGFibGVMaXN0LmluY2x1ZGVzKG5vZGVJZCkpIHsKICAgICAgICAgICAgdGhpcy5leHBhbmRlZFRhYmxlTGlzdC5wdXNoKG5vZGVJZCk7CiAgICAgICAgICAgIHRoaXMubG9hZFJlbGF0aW9ucygpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoc2hhcGVOYW1lID09PSAnY29sbGFwc2UtdGV4dCcpIHsKICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5leHBhbmRlZFRhYmxlTGlzdC5pbmRleE9mKG5vZGVJZCk7CiAgICAgICAgICBpZiAoaW5kZXggPiAtMSkgewogICAgICAgICAgICB0aGlzLmV4cGFuZGVkVGFibGVMaXN0LnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgICAgIHRoaXMuc2hvd0FsbENvbHVtbnMgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5sb2FkUmVsYXRpb25zKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5ncmFwaEluc3RhbmNlLm9uKCdub2RlOmRibGNsaWNrJywgZSA9PiB7CiAgICAgICAgY29uc3QgdCA9IGUuaXRlbS5nZXRNb2RlbCgpLmxhYmVsOwogICAgICAgIGlmICh0ICE9PSB0aGlzLmFjdGl2ZVRhYmxlKSB7CiAgICAgICAgICB0aGlzLiRlbWl0KCdvcGVuLXRhYmxlJywgewogICAgICAgICAgICBjb25uSWQ6IHRoaXMuY29ubklkLAogICAgICAgICAgICBzY2hlbWE6IHRoaXMuY3VycmVudFNjaGVtYSwKICAgICAgICAgICAgdGFibGVOYW1lOiB0LAogICAgICAgICAgICBpbml0Vmlld01vZGU6ICdkYXRhJwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIGJlZm9yZURlc3Ryb3koKSB7CiAgICB0aGlzLmRlc3Ryb3lHcmFwaCgpOwogIH0KfTs="},{"version":3,"names":["request","G6","SqlEditor","registerNode","draw","cfg","group","label","tableComment","columns","isCenter","isTruncated","totalColCount","width","headerHeight","rowHeight","contentHeight","length","footerHeight","height","addShape","attrs","x","y","fill","stroke","lineWidth","radius","name","text","fontSize","fontWeight","textBaseline","forEach","col","i","COLUMN_NAME","IS_PK","r","COMMENTS","comment","substring","textAlign","cursor","get","components","props","data","currentSchema","schema","activeTable","tableName","viewMode","initViewMode","loading","saving","currentDataList","totalCount","currentPage","pageSize","editingCell","originalDataMap","modifiedRows","Set","newRows","tableColumns","conditions","logicalOperator","conflictVisible","conflictList","conflictPkValue","conflictType","customSql","sqlResult","ddlVisible","currentDDL","editViewVisible","viewSql","isSimpleView","jumpFromConflict","selectedRows","designVisible","designActiveTab","designColumns","originalColumns","deleteColumnList","designIndexes","deleteIndexList","designForeignKeys","deleteFkList","allTableNames","refColumnsCache","showAllColumns","expandedTableList","graphNodeIds","sqlConfirmVisible","generatedSql","altering","computed","rawKeys","Object","keys","filter","k","hasChanges","size","isReadOnly","tableType","isParentMissing","CNT","conflictTitle","conflictMessage","mounted","initView","watch","initialFilter","immediate","deep","handler","val","field","value","undefined","handleViewModeSwitch","applyAutoFilter","loadData","methods","method","url","dataOrParams","config","headers","connId","startsWith","params","handleError","e","title","_e$response","_e$response2","rawMsg","response","msg","message","includes","split","pop","replace","trim","$alert","dangerouslyUseHTMLString","confirmButtonText","type","customClass","destroyGraph","loadRelations","$confirm","then","resetEditState","_doSwitch","catch","mode","$emit","$nextTick","colRes","list","total","page","filterRes","logic","isView","dataRes","row","DB_INTERNAL_ID","JSON","parse","stringify","addedCount","cond","operator","handleAddRow","$message","duration","showClose","handleEditView","res","rawDDL","submitViewAlter","sql","code","success","Error","handleDiscardChanges","handleCellDblClick","column","rowId","_tempId","property","inputs","document","getElementsByTagName","focus","isCellEditing","colName","id","finishEditing","originalRow","newVal","oldVal","String","add","getCellStyle","backgroundColor","has","original","color","prefillValue","prefillField","newRow","Date","now","Math","random","toString","substr","c","fieldName","matchKey","find","toUpperCase","unshift","push","getPkColumnName","pkCol","idCol","getCleanRowData","cleanData","submitBatchChanges","insertList","map","clean","updateList","Array","from","info","loadingInstance","$loading","lock","background","close","handleDeleteRow","index","splice","idx","indexOf","pkName","pkVal","internalId","pkValue","handleSelectionChange","handleBatchDelete","existRowsToDelete","newRowsToDelete","nIdx","addCondition","removeCondition","handleQuery","resetFilters","isArray","v","resolveConflict","filterValue","MY_VAL_LIST","MY_VAL","TABLE_NAME","handleShowDDL","handleDesignTable","cols","DATA_LENGTH","DATA_DEFAULT","_status","_originalName","idxRes","COLUMNS","fkRes","f","refTables","R_TABLE_NAME","t","loadRefColumns","tablesRes","$set","console","error","handleRefTableChange","R_COLUMN_NAME","isDiff","n","o","addDesignColumn","DATA_TYPE","NULLABLE","removeDesignColumn","markModified","isChanged","handlePkChange","addDesignIndex","INDEX_NAME","INDEX_TYPE","removeDesignIndex","addDesignFk","CONSTRAINT_NAME","DELETE_RULE","removeDesignFk","generateAndRunAlter","sqls","s","nameRegex","test","typeLen","modifySql","isAttrChanged","oldPkCols","sort","newPkCols","isPkChanged","pkList","join","l","unique","fk","executeAlter","statements","indexMethod","handleSortChange","prop","order","sortedData","a","b","valA","valB","handleSizeChange","handleCurrentChange","runSql","graphInstance","destroy","$refs","relationCanvas","innerHTML","handleShowAllChange","showAll","expandedTables","nodes","checkAutoExpandState","initGraph","allExpanded","every","handleGraphZoom","ratio","zoom","getZoom","zoomTo","offsetWidth","offsetHeight","handleGraphFit","fitView","container","nodeCount","ranksep","Graph","fitViewPadding","renderer","layout","rankdir","nodesep","defaultNode","anchorPoints","defaultEdge","style","endArrow","labelCfg","autoRotate","modes","default","render","on","shapeName","target","nodeId","item","getModel","beforeDestroy"],"sources":["src/components/TableDetail.vue"],"sourcesContent":["<template>\r\n    <div class=\"table-detail-wrapper\">\r\n        <el-container class=\"main-workspace\">\r\n            <el-header height=\"50px\" class=\"workspace-header\">\r\n                <div class=\"header-left\">\r\n                    <el-breadcrumb separator=\"/\">\r\n                        <el-breadcrumb-item><i class=\"el-icon-connection\"></i> {{ connName }}</el-breadcrumb-item>\r\n                        <el-breadcrumb-item>{{ currentSchema }}</el-breadcrumb-item>\r\n                        <el-breadcrumb-item>\r\n                            <i v-if=\"tableType === 'view'\" class=\"el-icon-view\"\r\n                                style=\"color: #E6A23C; margin-right: 4px;\"></i>\r\n                            <i v-else class=\"el-icon-document-copy\" style=\"color: #409EFF; margin-right: 4px;\"></i>\r\n                            <b>{{ activeTable }}</b>\r\n                        </el-breadcrumb-item>\r\n                    </el-breadcrumb>\r\n                </div>\r\n                <div class=\"header-right\">\r\n                    <el-button-group style=\"margin-right: 15px\">\r\n                        <el-button size=\"small\" icon=\"el-icon-document\" @click=\"handleShowDDL\">查看DDL</el-button>\r\n                        <el-button v-if=\"tableType === 'table'\" size=\"small\" icon=\"el-icon-edit-outline\"\r\n                            @click=\"handleDesignTable\">设计表</el-button>\r\n                        <el-button v-else-if=\"tableType === 'view'\" size=\"small\" icon=\"el-icon-edit\"\r\n                            @click=\"handleEditView\">修改视图</el-button>\r\n                    </el-button-group>\r\n\r\n                    <el-radio-group v-model=\"viewMode\" size=\"small\" @change=\"handleViewModeSwitch\">\r\n                        <el-radio-button label=\"data\"><i class=\"el-icon-s-grid\"></i> 数据视图</el-radio-button>\r\n                        <el-radio-button label=\"relation\"><i class=\"el-icon-share\"></i> 关联关系</el-radio-button>\r\n                        <el-radio-button label=\"sql\"><i class=\"el-icon-cpu\"></i> SQL终端</el-radio-button>\r\n                    </el-radio-group>\r\n                </div>\r\n            </el-header>\r\n\r\n            <el-main class=\"content-area\">\r\n                <div v-if=\"viewMode === 'data'\" key=\"view-data\" class=\"full-height view-container\">\r\n                    <div class=\"filter-card\">\r\n                        <div class=\"compact-query-panel\">\r\n                            <div class=\"query-actions-top-bar\">\r\n                                <div class=\"left-btns\">\r\n                                    <span class=\"panel-title\"><i class=\"el-icon-search\"></i> 筛选条件</span>\r\n                                    <el-divider direction=\"vertical\"></el-divider>\r\n                                    <el-button type=\"text\" size=\"mini\" icon=\"el-icon-plus\"\r\n                                        @click=\"addCondition\">添加条件</el-button>\r\n                                    <template v-if=\"conditions.length > 1\">\r\n                                        <span class=\"v-divider\"></span>\r\n                                        <el-radio-group v-model=\"logicalOperator\" size=\"mini\">\r\n                                            <el-radio label=\"AND\">AND</el-radio>\r\n                                            <el-radio label=\"OR\">OR</el-radio>\r\n                                        </el-radio-group>\r\n                                    </template>\r\n                                </div>\r\n                                <div class=\"right-btns\">\r\n                                    <el-button type=\"primary\" size=\"mini\" icon=\"el-icon-search\" @click=\"handleQuery\"\r\n                                        :loading=\"loading\">查询</el-button>\r\n                                    <el-button size=\"mini\" icon=\"el-icon-refresh-left\"\r\n                                        @click=\"resetFilters\">重置</el-button>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"query-conditions-scroll-area\" v-if=\"conditions.length > 0\">\r\n                                <div class=\"query-grid\">\r\n                                    <div v-for=\"(cond, index) in conditions\" :key=\"index\" class=\"query-item\">\r\n                                        <span class=\"cond-index\">{{ index + 1 }}.</span>\r\n                                        <el-select v-model=\"cond.field\" placeholder=\"字段\" size=\"mini\" class=\"field-sel\"\r\n                                            filterable>\r\n                                            <el-option v-for=\"col in tableColumns\"\r\n                                                :key=\"col.COLUMN_NAME + '_' + (col.COMMENTS || '')\"\r\n                                                :label=\"col.COLUMN_NAME\" :value=\"col.COLUMN_NAME\">\r\n                                                <span style=\"float: left\">{{ col.COLUMN_NAME }}</span>\r\n                                                <span style=\"float: right; color: #8492a6; font-size: 12px\">{{\r\n                                                    col.COMMENTS }}</span>\r\n                                            </el-option>\r\n                                        </el-select>\r\n                                        <el-select v-model=\"cond.operator\" size=\"mini\" class=\"op-sel\">\r\n                                            <el-option label=\"=\" value=\"=\"></el-option>\r\n                                            <el-option label=\"LIKE\" value=\"LIKE\"></el-option>\r\n                                            <el-option label=\">\" value=\">\"></el-option>\r\n                                            <el-option label=\"<\" value=\"<\"></el-option>\r\n                                            <el-option label=\"IS NULL\" value=\"IS NULL\"></el-option>\r\n                                        </el-select>\r\n                                        <el-input v-if=\"!cond.operator.includes('NULL')\" v-model=\"cond.value\"\r\n                                            placeholder=\"值\" size=\"mini\" class=\"val-input\"\r\n                                            @keyup.enter.native=\"handleQuery\"></el-input>\r\n                                        <el-button type=\"text\" icon=\"el-icon-close\" class=\"cond-del\"\r\n                                            @click=\"removeCondition(index)\"></el-button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"table-card\">\r\n                        <div class=\"data-toolbar\">\r\n                            <div class=\"tool-left\" v-if=\"!isReadOnly\">\r\n                                <el-button size=\"mini\" icon=\"el-icon-plus\" @click=\"handleAddRow\">插入行</el-button>\r\n                                <el-button size=\"mini\" type=\"success\" icon=\"el-icon-check\" @click=\"submitBatchChanges\"\r\n                                    :disabled=\"!hasChanges\" :loading=\"saving\">保存修改</el-button>\r\n                                <el-button size=\"mini\" icon=\"el-icon-close\" @click=\"handleDiscardChanges\"\r\n                                    :disabled=\"!hasChanges\">放弃修改</el-button>\r\n                                <el-divider direction=\"vertical\"></el-divider>\r\n                                <el-button size=\"mini\" type=\"danger\" icon=\"el-icon-delete\" @click=\"handleBatchDelete\"\r\n                                    :disabled=\"selectedRows.length === 0\" plain>批量删除</el-button>\r\n                                <el-divider direction=\"vertical\"></el-divider>\r\n                                <el-tag v-if=\"tableType === 'view'\" size=\"small\" type=\"success\" effect=\"plain\"\r\n                                    style=\"margin-right: 10px;\">\r\n                                    <i class=\"el-icon-check\"></i> 简单视图 (可编辑)\r\n                                </el-tag>\r\n                                <el-button size=\"mini\" icon=\"el-icon-refresh\" @click=\"loadData\">刷新</el-button>\r\n                            </div>\r\n                            <div class=\"tool-left\" v-else>\r\n                                <el-tag size=\"small\" type=\"warning\" effect=\"plain\" style=\"margin-right: 10px;\">\r\n                                    <i class=\"el-icon-lock\"></i> 复杂视图 (只读)\r\n                                </el-tag>\r\n                                <el-button size=\"mini\" icon=\"el-icon-refresh\" @click=\"loadData\">刷新数据</el-button>\r\n                            </div>\r\n\r\n                            <div class=\"data-stats\">\r\n                                <span v-if=\"selectedRows.length > 0\" style=\"color: #409EFF; margin-right: 15px;\">已选 {{\r\n                                    selectedRows.length\r\n                                    }} 行</span>\r\n                                <span v-if=\"hasChanges\" style=\"color: #E6A23C; margin-right: 10px;\"><i\r\n                                        class=\"el-icon-warning\"></i>\r\n                                    有未保存的更改</span>\r\n                                <i class=\"el-icon-info\"></i> 共 <b>{{ totalCount }}</b> 条记录\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"table-wrapper\" v-loading=\"loading\">\r\n                            <el-table ref=\"dataTable\" :data=\"currentDataList\" border height=\"100%\" size=\"mini\" stripe\r\n                                class=\"custom-table\" highlight-current-row @sort-change=\"handleSortChange\"\r\n                                @selection-change=\"handleSelectionChange\" @cell-dblclick=\"handleCellDblClick\"\r\n                                :cell-style=\"getCellStyle\">\r\n                                <el-table-column type=\"selection\" width=\"45\" align=\"center\"\r\n                                    fixed=\"left\"></el-table-column>\r\n                                <el-table-column type=\"index\" width=\"55\" align=\"center\" fixed=\"left\" label=\"#\"\r\n                                    :index=\"indexMethod\"></el-table-column>\r\n                                <template v-if=\"tableColumns.length > 0\">\r\n                                    <el-table-column v-for=\"col in tableColumns\"\r\n                                        :key=\"col.COLUMN_NAME + '_' + (col.COMMENTS || '')\" :prop=\"col.COLUMN_NAME\"\r\n                                        min-width=\"150\" show-overflow-tooltip sortable=\"custom\">\r\n                                        <template slot=\"header\" slot-scope=\"scope\">\r\n                                            <div class=\"custom-header\">\r\n                                                <div class=\"col-name\">\r\n                                                    <i v-if=\"col.IS_PK == 1\" class=\"el-icon-key\"\r\n                                                        style=\"color:#E6A23C;margin-right:2px;\" title=\"主键\"></i>\r\n                                                    {{ col.COLUMN_NAME }}\r\n                                                </div>\r\n                                                <div v-if=\"col.COMMENTS\" class=\"col-comment\">{{ col.COMMENTS }}</div>\r\n                                            </div>\r\n                                        </template>\r\n                                        <template slot-scope=\"scope\">\r\n                                            <div v-if=\"!isReadOnly && isCellEditing(scope.row, col.COLUMN_NAME)\"\r\n                                                class=\"inline-input-box\">\r\n                                                <el-input v-model=\"scope.row[col.COLUMN_NAME]\" size=\"mini\"\r\n                                                    @blur=\"finishEditing(scope.row, col.COLUMN_NAME)\"\r\n                                                    @keyup.enter.native=\"$event.target.blur()\"></el-input>\r\n                                            </div>\r\n                                            <span v-else>{{ scope.row[col.COLUMN_NAME] }}</span>\r\n                                        </template>\r\n                                    </el-table-column>\r\n                                </template>\r\n\r\n                                <el-table-column v-if=\"!isReadOnly\" label=\"操作\" width=\"80\" fixed=\"right\" align=\"center\">\r\n                                    <template slot-scope=\"scope\">\r\n                                        <el-button type=\"text\" size=\"mini\" icon=\"el-icon-delete\" class=\"danger-text\"\r\n                                            @click=\"handleDeleteRow(scope.$index, scope.row)\"></el-button>\r\n                                    </template>\r\n                                </el-table-column>\r\n                            </el-table>\r\n                        </div>\r\n\r\n                        <div class=\"pagination-bar\">\r\n                            <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\r\n                                :current-page=\"currentPage\" :page-sizes=\"[20, 50, 100]\" :page-size=\"pageSize\"\r\n                                layout=\"total, sizes, prev, pager, next, jumper\" :total=\"totalCount\"></el-pagination>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div v-else-if=\"viewMode === 'relation'\" key=\"view-relation\"\r\n                    class=\"relation-view-container view-container\">\r\n                    <div class=\"relation-toolbar\">\r\n                        <div class=\"legend-box\">\r\n                            <span class=\"legend-item\"><span class=\"dot active\"></span> 当前表</span>\r\n                            <span class=\"legend-item\"><span class=\"dot normal\"></span> 关联表</span>\r\n                            <el-divider direction=\"vertical\"></el-divider>\r\n                            <el-switch v-model=\"showAllColumns\" active-text=\"全部展开\" @change=\"handleShowAllChange\"\r\n                                size=\"mini\"></el-switch>\r\n                        </div>\r\n                        <div class=\"zoom-btns\">\r\n                            <el-button-group>\r\n                                <el-button size=\"mini\" icon=\"el-icon-zoom-in\" @click=\"handleGraphZoom(1.1)\"></el-button>\r\n                                <el-button size=\"mini\" icon=\"el-icon-zoom-out\"\r\n                                    @click=\"handleGraphZoom(0.9)\"></el-button>\r\n                                <el-button size=\"mini\" icon=\"el-icon-aim\" @click=\"handleGraphFit\"></el-button>\r\n                            </el-button-group>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"canvas-wrapper\">\r\n                        <div ref=\"relationCanvas\" class=\"g6-canvas-box\"></div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div v-else-if=\"viewMode === 'sql'\" key=\"view-sql\" class=\"full-height view-container\">\r\n                    <div class=\"sql-box\"\r\n                        style=\"height: 300px; padding: 0; border: 1px solid #dcdfe6; overflow: hidden; display: flex; flex-direction: column;\">\r\n                        <SqlEditor v-model=\"customSql\" language=\"sql\" style=\"flex: 1; width: 100%;\" />\r\n                    </div>\r\n                    <div style=\"text-align: right; padding: 10px 0;\"><el-button type=\"success\" size=\"small\"\r\n                            @click=\"runSql\" icon=\"el-icon-video-play\">执行 SQL</el-button></div>\r\n                    <div class=\"sql-result\" v-if=\"sqlResult.length\">\r\n                        <el-divider content-position=\"left\">结果预览</el-divider>\r\n                        <el-table :data=\"sqlResult\" border height=\"100%\" size=\"mini\" stripe><el-table-column\r\n                                v-for=\"(val, key) in sqlResult[0]\" :key=\"key\" :prop=\"key\" :label=\"key\"\r\n                                show-overflow-tooltip></el-table-column></el-table>\r\n                    </div>\r\n                </div>\r\n            </el-main>\r\n        </el-container>\r\n\r\n        <el-dialog title=\"编辑视图定义\" :visible.sync=\"editViewVisible\" width=\"900px\" append-to-body\r\n            :close-on-click-modal=\"false\">\r\n            <div style=\"margin-bottom: 10px;\">\r\n                <el-alert title=\"修改视图定义将执行 CREATE OR REPLACE VIEW 语句。\" type=\"warning\" show-icon\r\n                    :closable=\"false\"></el-alert>\r\n            </div>\r\n            <div style=\"height: 450px; border: 1px solid #dcdfe6;\">\r\n                <SqlEditor v-model=\"viewSql\" language=\"sql\" />\r\n            </div>\r\n            <div slot=\"footer\">\r\n                <el-button @click=\"editViewVisible = false\">取消</el-button>\r\n                <el-button type=\"primary\" @click=\"submitViewAlter\" :loading=\"altering\">保存修改</el-button>\r\n            </div>\r\n        </el-dialog>\r\n\r\n        <el-dialog :title=\"conflictTitle\" :visible.sync=\"conflictVisible\" width=\"750px\" append-to-body\r\n            :close-on-click-modal=\"false\">\r\n            <div class=\"conflict-alert\"\r\n                :style=\"{ backgroundColor: isParentMissing ? '#fef0f0' : '#fdf6ec', color: isParentMissing ? '#F56C6C' : '#e6a23c', borderColor: isParentMissing ? '#fde2e2' : '#faecd8' }\">\r\n                <i class=\"el-icon-warning\" style=\"margin-right: 8px;\"></i>\r\n                {{ conflictMessage }}\r\n            </div>\r\n            <el-table :data=\"conflictList\" border size=\"small\" style=\"margin-top: 15px;\">\r\n                <el-table-column :label=\"isParentMissing ? '目标主表名' : '引用表名'\" width=\"220\" prop=\"TABLE_NAME\">\r\n                    <template slot-scope=\"scope\"><el-tag size=\"mini\" type=\"info\">{{ scope.row.TABLE_NAME\r\n                            }}</el-tag></template>\r\n                </el-table-column>\r\n                <el-table-column :label=\"isParentMissing ? '目标主键列' : '关联字段'\" width=\"180\"\r\n                    prop=\"COLUMN_NAME\"></el-table-column>\r\n                <el-table-column :label=\"isParentMissing ? '状态' : '冲突记录数'\" align=\"center\" width=\"120\">\r\n                    <template slot-scope=\"scope\">\r\n                        <span v-if=\"scope.row.CNT === 'MISSING'\" style=\"color:#F56C6C;font-weight:bold;\">主键缺失</span>\r\n                        <span v-else style=\"color:#F56C6C;font-weight:bold;\">{{ scope.row.CNT }}</span>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"操作\" align=\"center\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button type=\"primary\" plain size=\"mini\" @click=\"resolveConflict(scope.row)\">\r\n                            去处理 <i class=\"el-icon-right\"></i>\r\n                        </el-button>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n            <div slot=\"footer\"><el-button @click=\"conflictVisible = false\">关闭</el-button></div>\r\n        </el-dialog>\r\n\r\n        <el-dialog title=\"DDL 预览\" :visible.sync=\"ddlVisible\" width=\"800px\" append-to-body>\r\n            <div style=\"height: 500px; border: 1px solid #dcdfe6;\">\r\n                <SqlEditor v-model=\"currentDDL\" :readOnly=\"true\" />\r\n            </div>\r\n            <div slot=\"footer\"><el-button @click=\"ddlVisible = false\">关闭</el-button></div>\r\n        </el-dialog>\r\n\r\n        <el-dialog title=\"设计表结构\" :visible.sync=\"designVisible\" width=\"1100px\" append-to-body\r\n            :close-on-click-modal=\"false\" top=\"5vh\">\r\n            <div style=\"margin-bottom: 10px;\"><el-alert title=\"注意：修改结构会生成 ALTER TABLE 语句。请谨慎操作。\" type=\"warning\"\r\n                    show-icon :closable=\"false\"></el-alert></div>\r\n            <el-tabs v-model=\"designActiveTab\" type=\"card\">\r\n                <el-tab-pane label=\"字段列 (Columns)\" name=\"columns\">\r\n                    <div style=\"margin-bottom: 10px; text-align: right;\"><el-button size=\"mini\" type=\"primary\"\r\n                            icon=\"el-icon-plus\" @click=\"addDesignColumn\">添加列</el-button></div>\r\n                    <el-table :data=\"designColumns\" border size=\"mini\" height=\"400\">\r\n                        <el-table-column label=\"状态\" width=\"50\" align=\"center\"><template slot-scope=\"scope\"><i\r\n                                    v-if=\"scope.row._status === 'new'\" class=\"el-icon-plus\" style=\"color:green\"></i><i\r\n                                    v-else-if=\"scope.row._status === 'modified'\" class=\"el-icon-edit\"\r\n                                    style=\"color:orange\"></i></template></el-table-column>\r\n                        <el-table-column label=\"列名\" width=\"150\"><template slot-scope=\"scope\"><el-input\r\n                                    v-model=\"scope.row.COLUMN_NAME\" @change=\"markModified(scope.row)\"\r\n                                    size=\"mini\"></el-input></template></el-table-column>\r\n                        <el-table-column label=\"类型\" width=\"120\"><template slot-scope=\"scope\"><el-select\r\n                                    v-model=\"scope.row.DATA_TYPE\" @change=\"markModified(scope.row)\" size=\"mini\"\r\n                                    filterable allow-create><el-option value=\"VARCHAR2\"></el-option><el-option\r\n                                        value=\"NUMBER\"></el-option><el-option\r\n                                        value=\"DATE\"></el-option></el-select></template></el-table-column>\r\n                        <el-table-column label=\"长度\" width=\"100\"><template slot-scope=\"scope\"><el-input\r\n                                    v-model=\"scope.row.DATA_LENGTH\" @change=\"markModified(scope.row)\"\r\n                                    size=\"mini\"></el-input></template></el-table-column>\r\n                        <el-table-column label=\"主键\" width=\"50\"><template slot-scope=\"scope\"><el-checkbox\r\n                                    v-model=\"scope.row.IS_PK\"\r\n                                    @change=\"handlePkChange(scope.row)\"></el-checkbox></template></el-table-column>\r\n                        <el-table-column label=\"空值\" width=\"50\"><template slot-scope=\"scope\"><el-checkbox\r\n                                    v-model=\"scope.row.NULLABLE\" @change=\"markModified(scope.row)\" true-label=\"Y\"\r\n                                    false-label=\"N\"></el-checkbox></template></el-table-column>\r\n                        <el-table-column label=\"注释\"><template slot-scope=\"scope\"><el-input v-model=\"scope.row.COMMENTS\"\r\n                                    @change=\"markModified(scope.row)\"\r\n                                    size=\"mini\"></el-input></template></el-table-column>\r\n                        <el-table-column label=\"操作\"><template slot-scope=\"scope\"><el-button type=\"text\"\r\n                                    style=\"color:#F56C6C\" icon=\"el-icon-delete\"\r\n                                    @click=\"removeDesignColumn(scope.$index, scope.row)\"></el-button></template></el-table-column>\r\n                    </el-table>\r\n                </el-tab-pane>\r\n                <el-tab-pane label=\"索引 (Indexes)\" name=\"indexes\">\r\n                    <div style=\"margin-bottom: 10px; text-align: right;\"><el-button size=\"mini\" type=\"primary\"\r\n                            icon=\"el-icon-plus\" @click=\"addDesignIndex\">添加索引</el-button></div>\r\n                    <el-table :data=\"designIndexes\" border size=\"mini\" height=\"400\">\r\n                        <el-table-column label=\"状态\" width=\"50\" align=\"center\"><template slot-scope=\"scope\"><i\r\n                                    v-if=\"scope.row._status === 'new'\" class=\"el-icon-plus\"\r\n                                    style=\"color:green\"></i></template></el-table-column>\r\n                        <el-table-column label=\"索引名称\" width=\"200\"><template slot-scope=\"scope\"><el-input\r\n                                    v-model=\"scope.row.INDEX_NAME\" size=\"mini\"></el-input></template></el-table-column>\r\n                        <el-table-column label=\"包含列\"><template slot-scope=\"scope\"><el-select v-model=\"scope.row.COLUMNS\"\r\n                                    multiple size=\"mini\" style=\"width: 100%\"><el-option v-for=\"c in designColumns\"\r\n                                        :key=\"c.COLUMN_NAME\" :label=\"c.COLUMN_NAME\"\r\n                                        :value=\"c.COLUMN_NAME\"></el-option></el-select></template></el-table-column>\r\n                        <el-table-column label=\"操作\" width=\"60\" align=\"center\"><template slot-scope=\"scope\"><el-button\r\n                                    type=\"text\" style=\"color:#F56C6C\" icon=\"el-icon-delete\"\r\n                                    @click=\"removeDesignIndex(scope.$index, scope.row)\"></el-button></template></el-table-column>\r\n                    </el-table>\r\n                </el-tab-pane>\r\n                <el-tab-pane label=\"外键 (Foreign Keys)\" name=\"fks\">\r\n                    <div style=\"margin-bottom: 10px; text-align: right;\"><el-button size=\"mini\" type=\"primary\"\r\n                            icon=\"el-icon-plus\" @click=\"addDesignFk\">添加外键</el-button></div>\r\n                    <el-table :data=\"designForeignKeys\" border size=\"mini\" height=\"400\">\r\n                        <el-table-column label=\"状态\" width=\"50\" align=\"center\"><template slot-scope=\"scope\"><i\r\n                                    v-if=\"scope.row._status === 'new'\" class=\"el-icon-plus\"\r\n                                    style=\"color:green\"></i></template></el-table-column>\r\n                        <el-table-column label=\"外键名称\" width=\"180\"><template slot-scope=\"scope\"><el-input\r\n                                    v-model=\"scope.row.CONSTRAINT_NAME\"\r\n                                    size=\"mini\"></el-input></template></el-table-column>\r\n                        <el-table-column label=\"本表字段\" width=\"150\"><template slot-scope=\"scope\"><el-select\r\n                                    v-model=\"scope.row.COLUMN_NAME\" size=\"mini\"><el-option v-for=\"c in designColumns\"\r\n                                        :key=\"c.COLUMN_NAME\" :label=\"c.COLUMN_NAME\"\r\n                                        :value=\"c.COLUMN_NAME\"></el-option></el-select></template></el-table-column>\r\n                        <el-table-column label=\"关联主表\" width=\"180\"><template slot-scope=\"scope\"><el-select\r\n                                    v-model=\"scope.row.R_TABLE_NAME\" size=\"mini\" allow-create\r\n                                    @change=\"handleRefTableChange(scope.row)\"><el-option v-for=\"t in allTableNames\"\r\n                                        :key=\"t\" :label=\"t\"\r\n                                        :value=\"t\"></el-option></el-select></template></el-table-column>\r\n                        <el-table-column label=\"目标列\" width=\"150\"><template slot-scope=\"scope\"><el-select\r\n                                    v-model=\"scope.row.R_COLUMN_NAME\" size=\"mini\"\r\n                                    @visible-change=\"(vis) => vis && loadRefColumns(scope.row.R_TABLE_NAME)\"><el-option\r\n                                        v-for=\"col in (refColumnsCache[scope.row.R_TABLE_NAME] || [])\"\r\n                                        :key=\"col.COLUMN_NAME\" :label=\"col.COLUMN_NAME\"\r\n                                        :value=\"col.COLUMN_NAME\"></el-option></el-select></template></el-table-column>\r\n                        <el-table-column label=\"操作\" width=\"60\" align=\"center\"><template slot-scope=\"scope\"><el-button\r\n                                    type=\"text\" style=\"color:#F56C6C\" icon=\"el-icon-delete\"\r\n                                    @click=\"removeDesignFk(scope.$index, scope.row)\"></el-button></template></el-table-column>\r\n                    </el-table>\r\n                </el-tab-pane>\r\n            </el-tabs>\r\n            <div slot=\"footer\"><el-button @click=\"designVisible = false\">取消</el-button><el-button type=\"primary\"\r\n                    @click=\"generateAndRunAlter\">预览并保存</el-button></div>\r\n        </el-dialog>\r\n\r\n        <el-dialog title=\"确认修改\" :visible.sync=\"sqlConfirmVisible\" width=\"600px\" append-to-body>\r\n            <div style=\"margin-bottom:10px;\">即将执行以下变更语句：</div>\r\n            <div style=\"height: 300px; border: 1px solid #dcdfe6;\">\r\n                <SqlEditor v-model=\"generatedSql\" />\r\n            </div>\r\n            <div slot=\"footer\"><el-button @click=\"sqlConfirmVisible = false\">取消</el-button><el-button type=\"primary\"\r\n                    @click=\"executeAlter\" :loading=\"altering\">确认执行</el-button></div>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport request from '@/utils/request';\r\nimport G6 from '@antv/g6';\r\nimport SqlEditor from './SqlEditor.vue';\r\n\r\n// G6 logic remains same\r\nG6.registerNode('db-table', {\r\n    draw: (cfg, group) => {\r\n        const { label, tableComment, columns = [], isCenter, isTruncated, totalColCount } = cfg;\r\n        const width = 300;\r\n        const headerHeight = 50;\r\n        const rowHeight = 28;\r\n        const contentHeight = columns.length * rowHeight;\r\n\r\n        let footerHeight = 0;\r\n        if (isTruncated) footerHeight = 24;\r\n        else if (totalColCount > 10) footerHeight = 24;\r\n\r\n        const height = headerHeight + contentHeight + footerHeight + 8;\r\n\r\n        group.addShape('rect', { attrs: { x: 0, y: 0, width, height, fill: '#fff', stroke: isCenter ? '#409EFF' : '#DCDFE6', lineWidth: 1, radius: 4 }, name: 'container-shape' });\r\n        group.addShape('rect', { attrs: { x: 0, y: 0, width, height: headerHeight, fill: isCenter ? '#409EFF' : '#F2F6FC', radius: [4, 4, 0, 0] }, name: 'header-shape' });\r\n\r\n        group.addShape('text', { attrs: { x: 10, y: 20, text: label, fill: isCenter ? '#fff' : '#333', fontSize: 13, fontWeight: 'bold', textBaseline: 'middle' }, name: 'title-text' });\r\n        if (tableComment) {\r\n            group.addShape('text', { attrs: { x: 10, y: 38, text: tableComment, fill: isCenter ? '#eee' : '#909399', fontSize: 11, textBaseline: 'middle' }, name: 'comment-text' });\r\n        }\r\n\r\n        columns.forEach((col, i) => {\r\n            const y = headerHeight + (i * rowHeight) + (rowHeight / 2);\r\n            group.addShape('text', { attrs: { x: 28, y: y, text: col.COLUMN_NAME, fill: col.IS_PK ? '#E6A23C' : '#333', fontSize: 12, textBaseline: 'middle', fontWeight: col.IS_PK ? 'bold' : 'normal' } });\r\n            if (col.IS_PK) {\r\n                group.addShape('circle', { attrs: { x: 14, y: y, r: 3, fill: '#E6A23C' } });\r\n            }\r\n            if (col.COMMENTS) {\r\n                let comment = col.COMMENTS;\r\n                if (comment.length > 10) comment = comment.substring(0, 10) + '...';\r\n                group.addShape('text', { attrs: { x: 160, y: y, text: comment, fill: '#909399', fontSize: 11, textBaseline: 'middle' } });\r\n            }\r\n        });\r\n\r\n        const y = headerHeight + contentHeight + 12;\r\n        if (isTruncated) {\r\n            group.addShape('text', { attrs: { x: width / 2, y: y, text: `... (共 ${totalColCount} 列，点击展开)`, fill: '#909399', fontSize: 11, textAlign: 'center', textBaseline: 'middle', cursor: 'pointer' }, name: 'expand-text' });\r\n        } else if (totalColCount > 10) {\r\n            group.addShape('text', { attrs: { x: width / 2, y: y, text: '⬆ 点击折叠', fill: '#409EFF', fontSize: 11, textAlign: 'center', textBaseline: 'middle', cursor: 'pointer' }, name: 'collapse-text' });\r\n        }\r\n\r\n        return group.get('children')[0];\r\n    }\r\n});\r\n\r\nexport default {\r\n    name: 'TableDetail',\r\n    components: { SqlEditor },\r\n    props: ['connId', 'connName', 'schema', 'tableName', 'initialFilter', 'initViewMode', 'tableType'],\r\n    data() {\r\n        return {\r\n            currentSchema: this.schema, activeTable: this.tableName,\r\n            viewMode: this.initViewMode || 'data',\r\n            loading: false, saving: false,\r\n            currentDataList: [], totalCount: 0, currentPage: 1, pageSize: 50,\r\n            editingCell: null, originalDataMap: {}, modifiedRows: new Set(), newRows: [],\r\n            tableColumns: [], conditions: [], logicalOperator: 'AND',\r\n            conflictVisible: false, conflictList: [], conflictPkValue: null, conflictType: 'delete',\r\n            customSql: '', sqlResult: [],\r\n            ddlVisible: false, currentDDL: '',\r\n\r\n            editViewVisible: false, viewSql: '',\r\n            isSimpleView: true,\r\n\r\n            // 标记是否从冲突跳转\r\n            jumpFromConflict: false,\r\n\r\n            // 【新增】选中的行\r\n            selectedRows: [],\r\n\r\n            designVisible: false, designActiveTab: 'columns',\r\n            designColumns: [], originalColumns: [], deleteColumnList: [],\r\n            designIndexes: [], deleteIndexList: [],\r\n            designForeignKeys: [], deleteFkList: [],\r\n            allTableNames: [], refColumnsCache: {},\r\n\r\n            showAllColumns: false, expandedTableList: [], graphNodeIds: [],\r\n            sqlConfirmVisible: false, generatedSql: '', altering: false\r\n        };\r\n    },\r\n\r\n    computed: {\r\n        rawKeys() { return this.currentDataList.length ? Object.keys(this.currentDataList[0]).filter(k => k !== 'DB_INTERNAL_ID') : []; },\r\n        hasChanges() { return this.modifiedRows.size > 0 || this.newRows.length > 0; },\r\n        isReadOnly() {\r\n            if (this.tableType === 'table') return false;\r\n            if (this.tableType === 'view') return !this.isSimpleView;\r\n            return true;\r\n        },\r\n        isParentMissing() {\r\n            return this.conflictList.length > 0 && this.conflictList[0].CNT === 'MISSING';\r\n        },\r\n        conflictTitle() {\r\n            if (this.isParentMissing) return '⚠️ 保存失败：目标主键缺失';\r\n            return this.conflictType === 'delete' ? '⚠️ 无法删除：存在关联引用' : '⚠️ 无法修改：存在关联引用';\r\n        },\r\n        conflictMessage() {\r\n            if (this.isParentMissing) return '您输入的 外键值 在目标主表中不存在。请先在主表中创建该数据，或修改为已存在的值。';\r\n            return `该记录被以下 ${this.conflictList.length} 张表引用，请先处理这些关联数据。`;\r\n        }\r\n    },\r\n\r\n    mounted() { this.initView(); },\r\n\r\n    watch: {\r\n        initialFilter: {\r\n            immediate: true, deep: true,\r\n            handler(val) {\r\n                if (val && val.field && val.value !== undefined) {\r\n                    if (this.viewMode !== 'data') this.handleViewModeSwitch('data');\r\n                    // 标记从外部跳转\r\n                    this.jumpFromConflict = true;\r\n                    this.applyAutoFilter(val);\r\n                }\r\n            }\r\n        },\r\n        tableName: {\r\n            immediate: true,\r\n            handler(val) {\r\n                if (val) {\r\n                    this.activeTable = val;\r\n                    this.currentSchema = this.schema;\r\n                    this.currentPage = 1;\r\n                    this.expandedTableList = [];\r\n                    this.showAllColumns = false;\r\n                    this.selectedRows = []; // 清空选中\r\n\r\n                    // 如果有跳转条件，跳过普通加载\r\n                    if (this.initialFilter && this.initialFilter.field) {\r\n                        return;\r\n                    }\r\n                    this.loadData();\r\n                }\r\n            }\r\n        },\r\n        initViewMode(val) { if (val && val !== this.viewMode) this.handleViewModeSwitch(val); },\r\n    },\r\n\r\n    methods: {\r\n        async request(method, url, dataOrParams = {}) {\r\n            const config = { method, url, headers: { 'Conn-Id': this.connId } };\r\n            if (!url.startsWith('/db')) url = '/db' + url;\r\n            config.url = url;\r\n            if (method === 'get' || method === 'delete') config.params = dataOrParams; else config.data = dataOrParams;\r\n            return request(config);\r\n        },\r\n\r\n        handleError(e, title = '操作失败') {\r\n            let rawMsg = e.response?.data?.msg || e.response?.data?.message || e.message || '未知错误';\r\n            if (rawMsg.includes('nested exception is')) rawMsg = rawMsg.split('nested exception is').pop();\r\n            rawMsg = rawMsg.replace(/[\\w\\.]*Exception:\\s*/g, '').trim();\r\n            if (rawMsg.length > 300) rawMsg = rawMsg.substring(0, 300) + '...';\r\n            this.$alert(`<div style=\"font-size: 14px; line-height: 1.5; color: #606266;\"><p style=\"font-weight: bold; color: #F56C6C;\">❌ ${title}：</p><p style=\"background: #fef0f0; padding: 8px; border-radius: 4px; margin: 5px 0; word-break: break-all;\">${rawMsg}</p></div>`, title, { dangerouslyUseHTMLString: true, confirmButtonText: '知道了', type: 'error', customClass: 'error-dialog-width' });\r\n        },\r\n\r\n        initView() {\r\n            this.destroyGraph();\r\n            if (this.viewMode === 'relation') this.loadRelations();\r\n            else if (this.viewMode === 'data') {\r\n                if (!this.initialFilter || !this.initialFilter.field) this.loadData();\r\n            }\r\n        },\r\n\r\n        handleViewModeSwitch(val) {\r\n            if (this.hasChanges) {\r\n                this.$confirm('当前有未保存的修改，切换视图将丢失这些修改，是否继续？', '提示', { type: 'warning' })\r\n                    .then(() => { this.resetEditState(); this._doSwitch(val); })\r\n                    .catch(() => { this.viewMode = 'data'; });\r\n            } else { this._doSwitch(val); }\r\n        },\r\n\r\n        _doSwitch(val) {\r\n            const mode = (typeof val === 'string') ? val : this.viewMode;\r\n            this.viewMode = mode;\r\n            this.$emit('view-mode-change', mode);\r\n            if (mode === 'relation') this.$nextTick(() => { this.loadRelations(); });\r\n            else { this.destroyGraph(); if (mode === 'data') this.loadData(); }\r\n        },\r\n\r\n        async loadData() {\r\n            this.resetEditState();\r\n            this.selectedRows = [];\r\n            this.loading = true;\r\n            try {\r\n                const colRes = await this.request('get', '/columns', { schema: this.currentSchema, tableName: this.activeTable });\r\n                this.tableColumns = colRes.data.data || [];\r\n                let list = []; let total = 0;\r\n                const params = { schema: this.currentSchema, tableName: this.activeTable, page: this.currentPage, size: this.pageSize };\r\n                if (this.conditions.length > 0) {\r\n                    const filterRes = await this.request('post', '/filter', { ...params, logic: this.logicalOperator, conditions: this.conditions });\r\n                    list = filterRes.data.data.list || []; total = filterRes.data.data.total || 0; if (filterRes.data.data.isView) { this.isSimpleView = filterRes.data.data.isSimpleView; }\r\n                } else {\r\n                    const dataRes = await this.request('get', '/data', params);\r\n                    list = dataRes.data.data.list || []; total = dataRes.data.data.total || 0; if (dataRes.data.data.isView) { this.isSimpleView = dataRes.data.data.isSimpleView; }\r\n                }\r\n                this.currentDataList = list; this.totalCount = total; this.originalDataMap = {}; list.forEach(row => { if (row.DB_INTERNAL_ID) this.originalDataMap[row.DB_INTERNAL_ID] = JSON.parse(JSON.stringify(row)); });\r\n\r\n                // 【核心优化】从冲突跳转来且无数据 -> 批量自动插入\r\n                if (this.jumpFromConflict && this.totalCount === 0) {\r\n                    this.jumpFromConflict = false;\r\n                    this.$nextTick(() => {\r\n                        // 遍历所有过滤条件，如果存在多个 OR 条件，生成多行\r\n                        if (this.conditions.length > 0 && this.logicalOperator === 'OR') {\r\n                            let addedCount = 0;\r\n                            this.conditions.forEach(cond => {\r\n                                if (cond.operator === '=' && cond.value) {\r\n                                    this.handleAddRow(cond.value, cond.field);\r\n                                    addedCount++;\r\n                                }\r\n                            });\r\n                            if (addedCount > 0) {\r\n                                this.$message({ message: `已为您批量创建 ${addedCount} 条新行并填入缺失的主键，请补充其他信息。`, type: 'success', duration: 6000, showClose: true });\r\n                            }\r\n                        } else {\r\n                            // 单条件情况\r\n                            this.handleAddRow();\r\n                            this.$message({ message: '未找到指定主键记录，已自动为您创建新行并填入主键，请补充其他信息。', type: 'success', duration: 5000, showClose: true });\r\n                        }\r\n                    });\r\n                } else if (this.totalCount > 0) {\r\n                    this.jumpFromConflict = false;\r\n                }\r\n            } catch (e) { this.handleError(e, '数据加载失败'); } finally { this.loading = false; }\r\n        },\r\n\r\n        async handleEditView() {\r\n            try {\r\n                const res = await this.request('get', '/ddl', { schema: this.currentSchema, tableName: this.activeTable });\r\n                let rawDDL = res.data.data || '';\r\n                this.viewSql = rawDDL.replace(/&quot;/g, '\"').replace(/&apos;/g, \"'\").replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&amp;/g, '&');\r\n                this.editViewVisible = true;\r\n            } catch (e) { this.handleError(e, '获取视图定义失败'); }\r\n        },\r\n\r\n        async submitViewAlter() {\r\n            this.altering = true;\r\n            try {\r\n                const res = await this.request('post', '/execute', { sql: this.viewSql });\r\n                if (res.data.code === 200) {\r\n                    this.$message.success('视图修改成功');\r\n                    this.editViewVisible = false;\r\n                    this.loadData();\r\n                } else {\r\n                    throw new Error(res.data.msg);\r\n                }\r\n            } catch (e) {\r\n                this.handleError(e, '修改视图失败');\r\n            } finally {\r\n                this.altering = false;\r\n            }\r\n        },\r\n\r\n        resetEditState() { this.editingCell = null; this.modifiedRows = new Set(); this.newRows = []; },\r\n        handleDiscardChanges() { this.resetEditState(); this.loadData(); },\r\n        handleCellDblClick(row, column) {\r\n            if (this.isReadOnly) return;\r\n            this.editingCell = { rowId: row.DB_INTERNAL_ID || row._tempId, col: column.property };\r\n            this.$nextTick(() => { const inputs = document.getElementsByTagName('input'); if (inputs && inputs.length > 0) inputs[inputs.length - 1].focus(); });\r\n        },\r\n        isCellEditing(row, colName) { if (!this.editingCell) return false; const id = row.DB_INTERNAL_ID || row._tempId; return this.editingCell.rowId === id && this.editingCell.col === colName; },\r\n        finishEditing(row, colName) { this.editingCell = null; const id = row.DB_INTERNAL_ID; if (!id) return; const originalRow = this.originalDataMap[id]; let newVal = row[colName]; let oldVal = originalRow ? originalRow[colName] : ''; if (newVal == null) newVal = ''; if (oldVal == null) oldVal = ''; if (String(newVal) !== String(oldVal)) { this.modifiedRows.add(id); this.modifiedRows = new Set(this.modifiedRows); } },\r\n        getCellStyle({ row, column }) { const id = row.DB_INTERNAL_ID; const col = column.property; if (!id && row._tempId) return { backgroundColor: '#f0f9eb' }; if (this.modifiedRows.has(id)) { const original = this.originalDataMap[id]; let newVal = row[col]; let oldVal = original ? original[col] : ''; if (newVal == null) newVal = ''; if (oldVal == null) oldVal = ''; if (String(newVal) !== String(oldVal)) return { backgroundColor: '#fdf6ec', color: '#E6A23C', fontWeight: 'bold' }; } return {}; },\r\n\r\n        // 【核心修改】支持参数化填充\r\n        handleAddRow(prefillValue = null, prefillField = null) {\r\n            const newRow = { _tempId: 'NEW_' + Date.now() + Math.random().toString(36).substr(2, 5) };\r\n            this.tableColumns.forEach(c => newRow[c.COLUMN_NAME] = null);\r\n\r\n            // 优先使用传入的填充值\r\n            if (prefillValue !== null && prefillField) {\r\n                newRow[prefillField] = prefillValue;\r\n            }\r\n            // 否则使用当前的筛选条件 (单条件)\r\n            else if (this.conditions.length === 1 && this.conditions[0].operator === '=') {\r\n                const fieldName = this.conditions[0].field;\r\n                const val = this.conditions[0].value;\r\n                const matchKey = Object.keys(newRow).find(k => k.toUpperCase() === fieldName.toUpperCase());\r\n                if (matchKey && val !== undefined && val !== null) {\r\n                    newRow[matchKey] = val;\r\n                }\r\n            }\r\n            this.currentDataList.unshift(newRow);\r\n            this.newRows.push(newRow);\r\n        },\r\n\r\n        getPkColumnName() {\r\n            const pkCol = this.tableColumns.find(c => ['1', 1, 'Y', true].includes(c.IS_PK));\r\n            if (pkCol) return pkCol.COLUMN_NAME;\r\n            const idCol = this.tableColumns.find(c => c.COLUMN_NAME.toUpperCase() === 'ID');\r\n            if (idCol) return idCol.COLUMN_NAME;\r\n            if (this.tableColumns.length > 0) return this.tableColumns[0].COLUMN_NAME;\r\n            return null;\r\n        },\r\n        getCleanRowData(row) { const cleanData = {}; this.tableColumns.forEach(col => { cleanData[col.COLUMN_NAME] = row[col.COLUMN_NAME]; }); if (row.DB_INTERNAL_ID) cleanData.DB_INTERNAL_ID = row.DB_INTERNAL_ID; return cleanData; },\r\n\r\n        async submitBatchChanges() {\r\n            if (this.saving) return;\r\n            this.saving = true;\r\n\r\n            const insertList = this.newRows.map(row => {\r\n                const clean = this.getCleanRowData(row);\r\n                delete clean.DB_INTERNAL_ID;\r\n                return clean;\r\n            });\r\n\r\n            const updateList = Array.from(this.modifiedRows).map(id => {\r\n                const row = this.currentDataList.find(r => r.DB_INTERNAL_ID === id);\r\n                return row ? this.getCleanRowData(row) : null;\r\n            }).filter(r => r !== null);\r\n\r\n            if (insertList.length === 0 && updateList.length === 0) {\r\n                this.$message.info(\"没有检测到有效变更\");\r\n                this.saving = false;\r\n                return;\r\n            }\r\n\r\n            const loadingInstance = this.$loading({ lock: true, text: '正在批量保存中...', background: 'rgba(0, 0, 0, 0.7)' });\r\n\r\n            try {\r\n                const res = await this.request('post', `/save/batch?schema=${this.currentSchema}&tableName=${this.activeTable}`, {\r\n                    insertList,\r\n                    updateList\r\n                });\r\n\r\n                loadingInstance.close();\r\n\r\n                if (res.data.code === 200) {\r\n                    this.$message.success('批量保存成功！');\r\n                    this.loadData();\r\n                } else if (res.data.code === 503) {\r\n                    this.conflictList = res.data.data;\r\n                    this.conflictType = 'save';\r\n                    this.conflictVisible = true;\r\n                } else {\r\n                    throw new Error(res.data.msg);\r\n                }\r\n            } catch (e) {\r\n                loadingInstance.close();\r\n                this.handleError(e, '保存失败');\r\n            } finally {\r\n                this.saving = false;\r\n            }\r\n        },\r\n\r\n        handleDeleteRow(index, row) {\r\n            if (!row.DB_INTERNAL_ID) { this.currentDataList.splice(index, 1); const idx = this.newRows.indexOf(row); if (idx > -1) this.newRows.splice(idx, 1); }\r\n            else {\r\n                this.$confirm('确定删除该行数据吗?', '提示', { type: 'warning' }).then(async () => {\r\n                    const pkName = this.getPkColumnName(); const pkVal = pkName ? row[pkName] : null;\r\n                    const res = await this.request('delete', '/delete', { schema: this.currentSchema, tableName: this.activeTable, internalId: row.DB_INTERNAL_ID, pkValue: pkVal });\r\n                    if (res.data.code === 200) { this.$message.success('删除成功'); this.loadData(); }\r\n                    else if (res.data.code === 503) { this.conflictList = res.data.data; this.conflictPkValue = pkVal; this.conflictType = 'delete'; this.conflictVisible = true; }\r\n                    else { throw new Error(res.data.msg); }\r\n                }).catch((e) => {\r\n                    if (e !== 'cancel') this.handleError({ message: e.message || '删除失败' }, '删除失败');\r\n                });\r\n            }\r\n        },\r\n\r\n        // 【新增】选区变更\r\n        handleSelectionChange(val) {\r\n            this.selectedRows = val;\r\n        },\r\n\r\n        // 【新增】批量删除方法\r\n        async handleBatchDelete() {\r\n            if (this.selectedRows.length === 0) return;\r\n            const existRowsToDelete = this.selectedRows.filter(row => row.DB_INTERNAL_ID).map(row => row.DB_INTERNAL_ID);\r\n            const newRowsToDelete = this.selectedRows.filter(row => !row.DB_INTERNAL_ID);\r\n\r\n            this.$confirm(`确定要删除选中的 ${this.selectedRows.length} 条数据吗？`, '批量删除', { type: 'warning' }).then(async () => {\r\n                // 1. 先删本地新行\r\n                newRowsToDelete.forEach(row => {\r\n                    const idx = this.currentDataList.indexOf(row);\r\n                    if (idx > -1) this.currentDataList.splice(idx, 1);\r\n                    const nIdx = this.newRows.indexOf(row);\r\n                    if (nIdx > -1) this.newRows.splice(nIdx, 1);\r\n                });\r\n\r\n                // 2. 再调后端删持久化行\r\n                if (existRowsToDelete.length > 0) {\r\n                    const loadingInstance = this.$loading({ lock: true, text: '正在批量删除...', background: 'rgba(0,0,0,0.7)' });\r\n                    try {\r\n                        const res = await this.request('post', `/delete/batch?schema=${this.currentSchema}&tableName=${this.activeTable}`, existRowsToDelete);\r\n                        loadingInstance.close();\r\n\r\n                        if (res.data.code === 200) {\r\n                            this.$message.success('批量删除成功');\r\n                            this.loadData();\r\n                        } else if (res.data.code === 503) {\r\n                            this.conflictList = res.data.data;\r\n                            this.conflictType = 'delete';\r\n                            this.conflictVisible = true;\r\n                        } else {\r\n                            throw new Error(res.data.msg);\r\n                        }\r\n                    } catch (e) {\r\n                        loadingInstance.close();\r\n                        this.handleError(e, '批量删除失败');\r\n                    }\r\n                } else {\r\n                    this.$message.success('删除成功');\r\n                }\r\n            }).catch(() => { });\r\n        },\r\n\r\n        addCondition() { if (this.tableColumns.length > 0) this.conditions.push({ field: this.tableColumns[0].COLUMN_NAME, operator: '=', value: '' }); },\r\n        removeCondition(index) { this.conditions.splice(index, 1); },\r\n        handleQuery() { this.currentPage = 1; this.loadData(); },\r\n        resetFilters() { this.conditions = []; this.handleQuery(); },\r\n        // 【核心修复】自动筛选：支持多值 (OR)\r\n        applyAutoFilter(filter) {\r\n            if (Array.isArray(filter.value)) {\r\n                this.conditions = filter.value.map(v => ({\r\n                    field: filter.field,\r\n                    operator: '=',\r\n                    value: v\r\n                }));\r\n                this.logicalOperator = 'OR';\r\n            } else {\r\n                this.conditions = [{ field: filter.field, operator: '=', value: filter.value }];\r\n            }\r\n            this.$nextTick(() => { this.handleQuery(); });\r\n        },\r\n\r\n        // 【核心修复】处理聚合冲突列表\r\n        resolveConflict(row) {\r\n            this.conflictVisible = false;\r\n\r\n            // 优先使用聚合值列表\r\n            let filterValue = [];\r\n            if (row.MY_VAL_LIST && row.MY_VAL_LIST.length > 0) {\r\n                filterValue = row.MY_VAL_LIST;\r\n            } else if (row.MY_VAL !== undefined && row.MY_VAL !== null) {\r\n                filterValue = [row.MY_VAL];\r\n            } else if (this.conflictPkValue) {\r\n                filterValue = [this.conflictPkValue];\r\n            }\r\n\r\n            this.$emit('open-table', {\r\n                connId: this.connId,\r\n                schema: this.currentSchema,\r\n                tableName: row.TABLE_NAME,\r\n                initViewMode: 'data',\r\n                filter: {\r\n                    field: row.COLUMN_NAME,\r\n                    value: filterValue // 传数组\r\n                }\r\n            });\r\n        },\r\n        async handleShowDDL() {\r\n            try {\r\n                const res = await this.request('get', '/ddl', { schema: this.currentSchema, tableName: this.activeTable });\r\n                let rawDDL = res.data.data || '';\r\n                this.currentDDL = rawDDL.replace(/&quot;/g, '\"').replace(/&apos;/g, \"'\").replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&amp;/g, '&');\r\n                this.ddlVisible = true;\r\n            } catch (e) { this.handleError(e, '获取DDL失败'); }\r\n        },\r\n\r\n        // ... Design table related methods (omitted for brevity, keep as is) ...\r\n        async handleDesignTable() {\r\n            try {\r\n                const colRes = await this.request('get', '/columns', { schema: this.currentSchema, tableName: this.activeTable });\r\n                const cols = colRes.data.data;\r\n                this.originalColumns = JSON.parse(JSON.stringify(cols.map(c => ({\r\n                    ...c,\r\n                    DATA_LENGTH: c.DATA_LENGTH ? String(c.DATA_LENGTH) : '',\r\n                    COMMENTS: c.COMMENTS || '',\r\n                    DATA_DEFAULT: c.DATA_DEFAULT || '',\r\n                    IS_PK: ['1', 1, 'Y', 'y', 'true', true].includes(c.IS_PK)\r\n                }))));\r\n\r\n                this.designColumns = JSON.parse(JSON.stringify(this.originalColumns)).map(c => ({ ...c, _status: 'original', _originalName: c.COLUMN_NAME }));\r\n\r\n                try {\r\n                    const idxRes = await this.request('get', '/indexes', { schema: this.currentSchema, tableName: this.activeTable });\r\n                    if (idxRes.data.code === 200) {\r\n                        this.designIndexes = idxRes.data.data.map(i => ({ ...i, _status: 'original', COLUMNS: i.COLUMNS.split(',') }));\r\n                    }\r\n                } catch (e) { this.designIndexes = []; }\r\n\r\n                try {\r\n                    const fkRes = await this.request('get', '/foreign-keys', { schema: this.currentSchema, tableName: this.activeTable });\r\n                    if (fkRes.data.code === 200) {\r\n                        this.designForeignKeys = fkRes.data.data.map(f => ({ ...f, _status: 'original' }));\r\n                        const refTables = [...new Set(this.designForeignKeys.map(f => f.R_TABLE_NAME).filter(t => t))];\r\n                        refTables.forEach(t => this.loadRefColumns(t));\r\n                    }\r\n                } catch (e) { this.designForeignKeys = []; }\r\n\r\n                const tablesRes = await this.request('get', '/tables', { schema: this.currentSchema });\r\n                this.allTableNames = (tablesRes.data.data || []).map(t => t.TABLE_NAME);\r\n\r\n                this.deleteColumnList = [];\r\n                this.deleteIndexList = [];\r\n                this.deleteFkList = [];\r\n                this.designActiveTab = 'columns';\r\n                this.designVisible = true;\r\n            } catch (e) { this.handleError(e, '加载设计器失败'); }\r\n        },\r\n\r\n        async loadRefColumns(tableName) {\r\n            if (!tableName || this.refColumnsCache[tableName]) return;\r\n            try {\r\n                const res = await this.request('get', '/columns', { schema: this.currentSchema, tableName: tableName });\r\n                this.$set(this.refColumnsCache, tableName, res.data.data || []);\r\n            } catch (e) {\r\n                console.error(\"加载引用表列失败\", e);\r\n            }\r\n        },\r\n\r\n        handleRefTableChange(row) {\r\n            row.R_COLUMN_NAME = '';\r\n            if (row.R_TABLE_NAME) {\r\n                this.loadRefColumns(row.R_TABLE_NAME);\r\n            }\r\n        },\r\n\r\n        isDiff(newVal, oldVal) {\r\n            const n = (newVal === null || newVal === undefined) ? \"\" : String(newVal).trim();\r\n            const o = (oldVal === null || oldVal === undefined) ? \"\" : String(oldVal).trim();\r\n            return n !== o;\r\n        },\r\n\r\n        addDesignColumn() { this.designColumns.push({ COLUMN_NAME: 'NEW_COL', DATA_TYPE: 'VARCHAR2', DATA_LENGTH: '50', NULLABLE: 'Y', IS_PK: false, _status: 'new' }); },\r\n\r\n        removeDesignColumn(index, row) { if (row._status !== 'new') this.deleteColumnList.push(row.COLUMN_NAME); this.designColumns.splice(index, 1); },\r\n\r\n        markModified(row) {\r\n            if (row._status === 'new') return;\r\n\r\n            const original = this.originalColumns.find(o => o.COLUMN_NAME === row._originalName);\r\n            if (!original) return;\r\n\r\n            const isChanged =\r\n                this.isDiff(row.COLUMN_NAME, original.COLUMN_NAME) ||\r\n                this.isDiff(row.DATA_TYPE, original.DATA_TYPE) ||\r\n                this.isDiff(row.DATA_LENGTH, original.DATA_LENGTH) ||\r\n                (row.IS_PK !== original.IS_PK) ||\r\n                this.isDiff(row.NULLABLE, original.NULLABLE) ||\r\n                this.isDiff(row.DATA_DEFAULT, original.DATA_DEFAULT) ||\r\n                this.isDiff(row.COMMENTS, original.COMMENTS);\r\n\r\n            row._status = isChanged ? 'modified' : 'original';\r\n        },\r\n\r\n        handlePkChange(row) {\r\n            this.markModified(row);\r\n        },\r\n\r\n        addDesignIndex() { this.designIndexes.push({ INDEX_NAME: '', INDEX_TYPE: 'NORMAL', COLUMNS: [], _status: 'new' }); },\r\n        removeDesignIndex(index, row) { if (row._status !== 'new') this.deleteIndexList.push(row.INDEX_NAME); this.designIndexes.splice(index, 1); },\r\n\r\n        addDesignFk() { this.designForeignKeys.push({ CONSTRAINT_NAME: '', COLUMN_NAME: '', R_TABLE_NAME: '', R_COLUMN_NAME: '', DELETE_RULE: 'NO ACTION', _status: 'new' }); },\r\n        removeDesignFk(index, row) { if (row._status !== 'new') this.deleteFkList.push(row.CONSTRAINT_NAME); this.designForeignKeys.splice(index, 1); },\r\n\r\n        generateAndRunAlter() {\r\n            let sqls = []; const s = this.currentSchema; const t = this.activeTable;\r\n\r\n            const nameRegex = /^[a-zA-Z0-9_]+$/;\r\n            for (const c of this.designColumns) {\r\n                if (!nameRegex.test(c.COLUMN_NAME)) {\r\n                    this.$message.error(`列名 \"${c.COLUMN_NAME}\" 不合法，仅支持字母、数字和下划线。`);\r\n                    return;\r\n                }\r\n            }\r\n\r\n            this.deleteColumnList.forEach(c => sqls.push(`ALTER TABLE \"${s}\".\"${t}\" DROP COLUMN \"${c}\";`));\r\n\r\n            this.designColumns.filter(c => c._status === 'modified').forEach(c => {\r\n                const original = this.originalColumns.find(o => o.COLUMN_NAME === c._originalName);\r\n                if (!original) return;\r\n\r\n                if (this.isDiff(c.COLUMN_NAME, c._originalName)) {\r\n                    sqls.push(`ALTER TABLE \"${s}\".\"${t}\" RENAME COLUMN \"${c._originalName}\" TO \"${c.COLUMN_NAME}\";`);\r\n                }\r\n\r\n                let typeLen = c.DATA_TYPE;\r\n                if (c.DATA_LENGTH && !['NUMBER', 'DATE', 'TIMESTAMP', 'CLOB', 'BLOB'].includes(c.DATA_TYPE)) typeLen += `(${c.DATA_LENGTH})`;\r\n\r\n                let modifySql = `ALTER TABLE \"${s}\".\"${t}\" MODIFY \"${c.COLUMN_NAME}\" ${typeLen}`;\r\n                if (c.DATA_DEFAULT && this.isDiff(c.DATA_DEFAULT, original.DATA_DEFAULT)) modifySql += ` DEFAULT ${c.DATA_DEFAULT}`;\r\n                if (this.isDiff(c.NULLABLE, original.NULLABLE)) modifySql += (c.NULLABLE === 'N' ? ' NOT NULL' : ' NULL');\r\n\r\n                const isAttrChanged = this.isDiff(c.DATA_TYPE, original.DATA_TYPE) ||\r\n                    this.isDiff(c.DATA_LENGTH, original.DATA_LENGTH) ||\r\n                    this.isDiff(c.NULLABLE, original.NULLABLE) ||\r\n                    this.isDiff(c.DATA_DEFAULT, original.DATA_DEFAULT);\r\n\r\n                if (isAttrChanged) sqls.push(modifySql + ';');\r\n\r\n                if (this.isDiff(c.COMMENTS, original.COMMENTS)) {\r\n                    sqls.push(`COMMENT ON COLUMN \"${s}\".\"${t}\".\"${c.COLUMN_NAME}\" IS '${c.COMMENTS}';`);\r\n                }\r\n            });\r\n\r\n            const oldPkCols = this.originalColumns.filter(c => ['1', 1, 'Y', true].includes(c.IS_PK)).map(c => c.COLUMN_NAME).sort();\r\n            const newPkCols = this.designColumns.filter(c => c.IS_PK).map(c => c.COLUMN_NAME).sort();\r\n\r\n            const isPkChanged = JSON.stringify(oldPkCols) !== JSON.stringify(newPkCols);\r\n\r\n            if (isPkChanged) {\r\n                if (oldPkCols.length > 0) sqls.push(`ALTER TABLE \"${s}\".\"${t}\" DROP PRIMARY KEY;`);\r\n                if (newPkCols.length > 0) {\r\n                    const pkList = newPkCols.map(c => `\"${c}\"`).join(',');\r\n                    sqls.push(`ALTER TABLE \"${s}\".\"${t}\" ADD PRIMARY KEY (${pkList});`);\r\n                }\r\n            }\r\n\r\n            this.designColumns.filter(c => c._status === 'new').forEach(c => {\r\n                let l = `ALTER TABLE \"${s}\".\"${t}\" ADD \"${c.COLUMN_NAME}\" ${c.DATA_TYPE}`;\r\n                if (c.DATA_LENGTH && !['NUMBER', 'DATE', 'TIMESTAMP', 'CLOB', 'BLOB'].includes(c.DATA_TYPE)) l += `(${c.DATA_LENGTH})`;\r\n                if (c.DATA_DEFAULT) l += ` DEFAULT ${c.DATA_DEFAULT}`;\r\n                if (c.NULLABLE === 'N') l += ' NOT NULL';\r\n                sqls.push(l + ';');\r\n                if (c.COMMENTS) sqls.push(`COMMENT ON COLUMN \"${s}\".\"${t}\".\"${c.COLUMN_NAME}\" IS '${c.COMMENTS}';`);\r\n            });\r\n\r\n            this.deleteIndexList.forEach(idx => sqls.push(`DROP INDEX \"${s}\".\"${idx}\";`));\r\n            this.designIndexes.filter(i => i._status === 'new').forEach(i => {\r\n                if (!i.INDEX_NAME || i.COLUMNS.length === 0) return;\r\n                const cols = i.COLUMNS.map(c => `\"${c}\"`).join(',');\r\n                const unique = i.INDEX_TYPE === 'UNIQUE' ? 'UNIQUE' : (i.INDEX_TYPE === 'BITMAP' ? 'BITMAP' : '');\r\n                sqls.push(`CREATE ${unique} INDEX \"${i.INDEX_NAME}\" ON \"${s}\".\"${t}\" (${cols});`);\r\n            });\r\n\r\n            this.deleteFkList.forEach(fk => sqls.push(`ALTER TABLE \"${s}\".\"${t}\" DROP CONSTRAINT \"${fk}\";`));\r\n            this.designForeignKeys.filter(f => f._status === 'new').forEach(f => {\r\n                if (!f.CONSTRAINT_NAME || !f.COLUMN_NAME || !f.R_TABLE_NAME || !f.R_COLUMN_NAME) return;\r\n                let sql = `ALTER TABLE \"${s}\".\"${t}\" ADD CONSTRAINT \"${f.CONSTRAINT_NAME}\" FOREIGN KEY (\"${f.COLUMN_NAME}\") REFERENCES \"${s}\".\"${f.R_TABLE_NAME}\"(\"${f.R_COLUMN_NAME}\")`;\r\n                if (f.DELETE_RULE === 'CASCADE') sql += ' ON DELETE CASCADE';\r\n                else if (f.DELETE_RULE === 'SET NULL') sql += ' ON DELETE SET NULL';\r\n                sqls.push(sql + ';');\r\n            });\r\n\r\n            if (!sqls.length) return this.$message.info('无结构变更');\r\n            this.generatedSql = sqls.join('\\n');\r\n            this.sqlConfirmVisible = true;\r\n        },\r\n\r\n        async executeAlter() {\r\n            this.altering = true;\r\n            try {\r\n                const statements = this.generatedSql.split(';').map(s => s.trim()).filter(s => s);\r\n                const res = await this.request('post', '/execute/batch', { sqls: statements });\r\n                if (res.data.code === 200) {\r\n                    this.$message.success('修改成功');\r\n                    this.sqlConfirmVisible = false;\r\n                    this.designVisible = false;\r\n\r\n                    if (this.viewMode === 'relation') {\r\n                        this.loadRelations();\r\n                    } else {\r\n                        this.loadData();\r\n                    }\r\n                } else {\r\n                    throw new Error(res.data.msg);\r\n                }\r\n            } catch (e) {\r\n                this.handleError(e, '表结构变更失败');\r\n            } finally { this.altering = false; }\r\n        },\r\n\r\n        indexMethod(index) { return (this.currentPage - 1) * this.pageSize + index + 1; },\r\n        handleSortChange({ prop, order }) { if (!prop) return; const sortedData = [...this.currentDataList]; sortedData.sort((a, b) => { let valA = a[prop]; let valB = b[prop]; if (valA == null) valA = ''; if (valB == null) valB = ''; if (valA > valB) return order === 'ascending' ? 1 : -1; if (valA < valB) return order === 'ascending' ? -1 : 1; return 0; }); this.currentDataList = sortedData; },\r\n        handleSizeChange(v) { this.pageSize = v; this.currentPage = 1; this.loadData(); },\r\n        handleCurrentChange(v) { this.currentPage = v; this.loadData(); },\r\n\r\n        async runSql() { const res = await this.request('post', '/execute', { sql: this.customSql }); if (res.data.code === 200) this.sqlResult = res.data.data; },\r\n        destroyGraph() { if (this.graphInstance) { this.graphInstance.destroy(); this.graphInstance = null; } const c = this.$refs.relationCanvas; if (c) c.innerHTML = ''; },\r\n\r\n        handleShowAllChange(val) {\r\n            if (val) {\r\n                if (this.graphNodeIds.length > 0) {\r\n                    this.expandedTableList = [...this.graphNodeIds];\r\n                }\r\n            } else {\r\n                this.expandedTableList = [];\r\n            }\r\n            this.loadRelations();\r\n        },\r\n\r\n        async loadRelations() {\r\n            this.destroyGraph();\r\n            try {\r\n                const res = await this.request('get', '/er-data', {\r\n                    schema: this.currentSchema,\r\n                    tableName: this.activeTable,\r\n                    showAll: this.showAllColumns,\r\n                    expandedTables: this.expandedTableList.join(',')\r\n                });\r\n                if (this.viewMode === 'relation') {\r\n                    this.graphNodeIds = res.data.data.nodes.map(n => n.id);\r\n                    this.checkAutoExpandState();\r\n                    this.$nextTick(() => this.initGraph(res.data.data));\r\n                }\r\n            } catch (e) { }\r\n        },\r\n\r\n        checkAutoExpandState() {\r\n            if (this.graphNodeIds.length > 0) {\r\n                const allExpanded = this.graphNodeIds.every(id => this.expandedTableList.includes(id));\r\n                if (this.showAllColumns !== allExpanded) {\r\n                    this.showAllColumns = allExpanded;\r\n                }\r\n            }\r\n        },\r\n\r\n        handleGraphZoom(ratio) {\r\n            if (!this.graphInstance) return;\r\n            const zoom = this.graphInstance.getZoom();\r\n            this.graphInstance.zoomTo(zoom * ratio, { x: this.$refs.relationCanvas.offsetWidth / 2, y: this.$refs.relationCanvas.offsetHeight / 2 });\r\n        },\r\n        handleGraphFit() {\r\n            if (!this.graphInstance) return;\r\n            this.graphInstance.fitView();\r\n        },\r\n\r\n        initGraph(data) {\r\n            const container = this.$refs.relationCanvas; if (!container) return;\r\n            container.innerHTML = '';\r\n\r\n            const nodeCount = data.nodes.length;\r\n            const ranksep = nodeCount > 5 ? 150 : 100;\r\n\r\n            this.graphInstance = new G6.Graph({\r\n                container,\r\n                width: container.offsetWidth,\r\n                height: container.offsetHeight,\r\n                fitView: true,\r\n                fitViewPadding: 40,\r\n                renderer: 'canvas',\r\n                layout: {\r\n                    type: 'dagre',\r\n                    rankdir: 'LR',\r\n                    nodesep: 50,\r\n                    ranksep: ranksep\r\n                },\r\n                defaultNode: {\r\n                    type: 'db-table',\r\n                    anchorPoints: [[0, 0.5], [1, 0.5]]\r\n                },\r\n                defaultEdge: {\r\n                    type: 'cubic-horizontal',\r\n                    style: { stroke: '#A3B1BF', lineWidth: 2, endArrow: true },\r\n                    labelCfg: { autoRotate: true, style: { fontSize: 10, fill: '#aaa' } }\r\n                },\r\n                modes: { default: ['drag-canvas', 'zoom-canvas', 'drag-node'] }\r\n            });\r\n            this.graphInstance.data(JSON.parse(JSON.stringify(data)));\r\n            this.graphInstance.render();\r\n\r\n            this.graphInstance.on('node:click', (e) => {\r\n                const shapeName = e.target.get('name');\r\n                const nodeId = e.item.getModel().id;\r\n\r\n                if (shapeName === 'expand-text') {\r\n                    if (!this.expandedTableList.includes(nodeId)) {\r\n                        this.expandedTableList.push(nodeId);\r\n                        this.loadRelations();\r\n                    }\r\n                } else if (shapeName === 'collapse-text') {\r\n                    const index = this.expandedTableList.indexOf(nodeId);\r\n                    if (index > -1) {\r\n                        this.expandedTableList.splice(index, 1);\r\n                        this.showAllColumns = false;\r\n                        this.loadRelations();\r\n                    }\r\n                }\r\n            });\r\n\r\n            this.graphInstance.on('node:dblclick', (e) => {\r\n                const t = e.item.getModel().label;\r\n                if (t !== this.activeTable) {\r\n                    this.$emit('open-table', { connId: this.connId, schema: this.currentSchema, tableName: t, initViewMode: 'data' });\r\n                }\r\n            });\r\n        }\r\n    },\r\n    beforeDestroy() { this.destroyGraph(); }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* 保持原有样式，省略以节省空间，与提供的 TableDetail.vue 原始样式一致 */\r\n.table-detail-wrapper {\r\n    height: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    background: #f5f7fa;\r\n}\r\n\r\n.workspace-header {\r\n    background: #fff;\r\n    border-bottom: 1px solid #e4e7ed;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    padding: 0 20px;\r\n    box-shadow: 0 1px 4px rgba(0, 21, 41, .08);\r\n    z-index: 10;\r\n}\r\n\r\n.content-area {\r\n    flex: 1;\r\n    padding: 15px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    overflow: hidden;\r\n}\r\n\r\n.view-container {\r\n    height: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 12px;\r\n    background: #f5f7fa;\r\n}\r\n\r\n.full-height {\r\n    height: 100%;\r\n}\r\n\r\n.filter-card {\r\n    background: #fff;\r\n    padding: 12px;\r\n    border-radius: 4px;\r\n    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.05);\r\n    flex-shrink: 0;\r\n}\r\n\r\n.compact-query-panel {\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n\r\n.query-actions-top-bar {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 8px;\r\n}\r\n\r\n.panel-title {\r\n    font-weight: bold;\r\n    color: #303133;\r\n    font-size: 14px;\r\n}\r\n\r\n.query-conditions-scroll-area {\r\n    max-height: 120px;\r\n    overflow-y: auto;\r\n    padding: 5px;\r\n    background: #fafafa;\r\n    border-radius: 4px;\r\n    border: 1px dashed #dcdfe6;\r\n}\r\n\r\n.query-grid {\r\n    display: grid;\r\n    grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));\r\n    gap: 10px;\r\n}\r\n\r\n.query-item {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n}\r\n\r\n.cond-index {\r\n    color: #909399;\r\n    font-size: 12px;\r\n    width: 15px;\r\n}\r\n\r\n.table-card {\r\n    flex: 1;\r\n    background: #fff;\r\n    border-radius: 4px;\r\n    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.05);\r\n    padding: 12px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    min-height: 0;\r\n}\r\n\r\n.data-toolbar {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 12px;\r\n}\r\n\r\n.data-stats {\r\n    font-size: 13px;\r\n    color: #606266;\r\n    background: #f4f4f5;\r\n    padding: 4px 10px;\r\n    border-radius: 4px;\r\n}\r\n\r\n.table-wrapper {\r\n    flex: 1;\r\n    min-height: 0;\r\n}\r\n\r\n.pagination-bar {\r\n    padding-top: 12px;\r\n    display: flex;\r\n    justify-content: flex-end;\r\n}\r\n\r\n.danger-text {\r\n    color: #F56C6C;\r\n}\r\n\r\n::v-deep .custom-table th>.cell {\r\n    display: flex !important;\r\n    align-items: center;\r\n    justify-content: flex-start;\r\n    line-height: 1.2;\r\n}\r\n\r\n.custom-header {\r\n    display: inline-flex;\r\n    flex-direction: column;\r\n    vertical-align: middle;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    max-width: calc(100% - 24px);\r\n}\r\n\r\n::v-deep .custom-table .caret-wrapper {\r\n    margin-left: 4px;\r\n    flex-shrink: 0;\r\n}\r\n\r\n::v-deep .custom-table th {\r\n    background-color: #eef1f6 !important;\r\n    color: #303133;\r\n    font-weight: 600;\r\n    height: 40px;\r\n    padding: 4px 0;\r\n}\r\n\r\n::v-deep .custom-table td {\r\n    padding: 6px 0;\r\n}\r\n\r\n::v-deep .el-table--striped .el-table__body tr.el-table__row--striped td {\r\n    background: #fafafa;\r\n}\r\n\r\n::v-deep .el-table--border,\r\n.el-table--group {\r\n    border-color: #dcdfe6;\r\n}\r\n\r\n::v-deep .el-table td,\r\n::v-deep .el-table th.is-leaf {\r\n    border-bottom: 1px solid #dcdfe6;\r\n}\r\n\r\n::v-deep .el-table--border td,\r\n::v-deep .el-table--border th {\r\n    border-right: 1px solid #dcdfe6;\r\n}\r\n\r\n.col-name {\r\n    font-size: 13px;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\n.col-comment {\r\n    font-size: 12px;\r\n    color: #909399;\r\n    font-weight: normal;\r\n    transform: scale(0.95);\r\n    transform-origin: left;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\n.inline-input-box {\r\n    width: 100%;\r\n    padding: 0 2px;\r\n}\r\n\r\n::v-deep .inline-input-box .el-input__inner {\r\n    height: 26px;\r\n    line-height: 26px;\r\n    padding: 0 5px;\r\n    border-radius: 0;\r\n    border: 1px solid #409EFF;\r\n}\r\n\r\n.conflict-alert {\r\n    background: #fdf6ec;\r\n    color: #e6a23c;\r\n    padding: 12px 15px;\r\n    border-radius: 4px;\r\n    display: flex;\r\n    align-items: center;\r\n    font-size: 14px;\r\n    border: 1px solid #faecd8;\r\n}\r\n\r\n.relation-view-container {\r\n    height: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    background: #f5f7fa;\r\n    position: relative;\r\n    overflow: hidden;\r\n}\r\n\r\n.relation-toolbar {\r\n    padding: 10px 20px;\r\n    background: #fff;\r\n    border-bottom: 1px solid #eee;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    z-index: 10;\r\n}\r\n\r\n.legend-box {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 15px;\r\n    font-size: 12px;\r\n    color: #666;\r\n}\r\n\r\n.dot {\r\n    width: 8px;\r\n    height: 8px;\r\n    display: inline-block;\r\n    border-radius: 50%;\r\n    margin-right: 5px;\r\n}\r\n\r\n.dot.active {\r\n    background: #409EFF;\r\n}\r\n\r\n.dot.normal {\r\n    background: #DCDFE6;\r\n}\r\n\r\n.canvas-wrapper {\r\n    width: 100%;\r\n    height: 100%;\r\n    background: #f5f7fa;\r\n    overflow: hidden;\r\n    position: relative;\r\n}\r\n\r\n.g6-canvas-box {\r\n    width: 100%;\r\n    height: 100%;\r\n    display: block;\r\n}\r\n\r\n.sql-box {\r\n    padding: 0;\r\n    background: #fff;\r\n    border-radius: 4px;\r\n    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.05);\r\n    display: flex;\r\n    flex-direction: column;\r\n    overflow: hidden;\r\n    height: 300px;\r\n}\r\n\r\n.sql-result {\r\n    flex: 1;\r\n    margin-top: 10px;\r\n    overflow: auto;\r\n    background: #fff;\r\n    padding: 10px;\r\n    border-radius: 4px;\r\n}\r\n\r\n.error-dialog-width {\r\n    max-width: 500px;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]}]}